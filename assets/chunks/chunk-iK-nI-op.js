import{r as Qe}from"./chunk-BOxfwLZt.js";function OS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function NS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b=typeof window<"u"?window:void 0,nt=typeof globalThis<"u"?globalThis:b;typeof self>"u"&&(nt.self=nt),typeof File>"u"&&(nt.File=function(){});var Xg=Array.prototype,Sf=Xg.forEach,Ef=Xg.indexOf,Rt=nt?.navigator,D=nt?.document,gt=nt?.location,Su=nt?.fetch,Eu=nt!=null&&nt.XMLHttpRequest&&"withCredentials"in new nt.XMLHttpRequest?nt.XMLHttpRequest:void 0,wf=nt?.AbortController,ht=Rt?.userAgent,Q=b??{},pn={DEBUG:!1,LIB_VERSION:"1.302.2"};function Tf(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,i)}function If(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(c){Tf(s,r,i,o,a,"next",c)}function a(c){Tf(s,r,i,o,a,"throw",c)}o(void 0)}))}}function B(){return B=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B.apply(null,arguments)}function Zg(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var LS=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],kf=function(t,e){if(e===void 0&&(e=[]),!t)return!1;var n=t.toLowerCase();return LS.concat(e).some((r=>{var i=r.toLowerCase();return n.indexOf(i)!==-1}))},DS=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function le(t,e){return t.indexOf(e)!==-1}var Wa=function(t){return t.trim()},wu=function(t){return t.replace(/^\$/,"")},$S=Array.isArray,Qg=Object.prototype,em=Qg.hasOwnProperty,ja=Qg.toString,we=$S||function(t){return ja.call(t)==="[object Array]"},Wn=t=>typeof t=="function",Ze=t=>t===Object(t)&&!we(t),Zr=t=>{if(Ze(t)){for(var e in t)if(em.call(t,e))return!1;return!0}return!1},N=t=>t===void 0,Ve=t=>ja.call(t)=="[object String]",Tu=t=>Ve(t)&&t.trim().length===0,Cn=t=>t===null,be=t=>N(t)||Cn(t),rn=t=>ja.call(t)=="[object Number]",jn=t=>ja.call(t)==="[object Boolean]",FS=t=>t instanceof FormData,US=t=>le(DS,t);function Iu(t){return t===null||typeof t!="object"}function Ko(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function tm(t){return!N(Event)&&(function(e,n){try{return e instanceof n}catch{return!1}})(t,Event)}var BS=[!0,"true",1,"1","yes"],Rc=t=>le(BS,t),HS=[!1,"false",0,"0","no"];function Kt(t,e,n,r,i){return e>n&&(r.warn("min cannot be greater than max."),e=n),rn(t)?t>n?(r.warn(" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(r.warn(" cannot be less than min: "+e+". Using min value instead."),e):t:(r.warn(" must be a number. using max or fallback. max: "+n+", fallback: "+i),Kt(i||n,e,n,r))}class WS{constructor(e){this.t={},this.i=e.i,this.o=Kt(e.bucketSize,0,100,e.h),this.m=Kt(e.refillRate,0,this.o,e.h),this.S=Kt(e.refillInterval,0,864e5,e.h)}$(e,n){var r=n-e.lastAccess,i=Math.floor(r/this.S);if(i>0){var s=i*this.m;e.tokens=Math.min(e.tokens+s,this.o),e.lastAccess=e.lastAccess+i*this.S}}consumeRateLimit(e){var n,r=Date.now(),i=String(e),s=this.t[i];return s?this.$(s,r):(s={tokens:this.o,lastAccess:r},this.t[i]=s),s.tokens===0||(s.tokens--,s.tokens===0&&((n=this.i)==null||n.call(this,e)),s.tokens===0)}stop(){this.t={}}}var eo,Rf,xc,jS=t=>t instanceof Error;function qS(t){var e=globalThis._posthogChunkIds;if(e){var n=Object.keys(e);return xc&&n.length===Rf||(Rf=n.length,xc=n.reduce(((r,i)=>{eo||(eo={});var s=eo[i];if(s)r[s[0]]=s[1];else for(var o=t(i),a=o.length-1;a>=0;a--){var c=o[a],u=c?.filename,l=e[i];if(u&&l){r[u]=l,eo[i]=[u,l];break}}return r}),{})),xc}}class zS{constructor(e,n,r){r===void 0&&(r=[]),this.coercers=e,this.stackParser=n,this.modifiers=r}buildFromUnknown(e,n){n===void 0&&(n={});var r=n&&n.mechanism||{handled:!0,type:"generic"},i=this.buildCoercingContext(r,n,0).apply(e),s=this.buildParsingContext(),o=this.parseStacktrace(i,s);return{$exception_list:this.convertToExceptionList(o,r),$exception_level:"error"}}modifyFrames(e){var n=this;return If((function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&we(r.stacktrace.frames)&&(r.stacktrace.frames=yield n.applyModifiers(r.stacktrace.frames));return e}))()}coerceFallback(e){var n;return{type:"Error",value:"Unknown error",stack:(n=e.syntheticException)==null?void 0:n.stack,synthetic:!0}}parseStacktrace(e,n){var r,i;return e.cause!=null&&(r=this.parseStacktrace(e.cause,n)),e.stack!=""&&e.stack!=null&&(i=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),n.chunkIdMap)),B({},e,{cause:r,stack:i})}applyChunkIds(e,n){return e.map((r=>(r.filename&&n&&(r.chunk_id=n[r.filename]),r)))}applyCoercers(e,n){for(var r of this.coercers)if(r.match(e))return r.coerce(e,n);return this.coerceFallback(n)}applyModifiers(e){var n=this;return If((function*(){var r=e;for(var i of n.modifiers)r=yield i(r);return r}))()}convertToExceptionList(e,n){var r,i,s,o={type:e.type,value:e.value,mechanism:{type:(r=n.type)!==null&&r!==void 0?r:"generic",handled:(i=n.handled)===null||i===void 0||i,synthetic:(s=e.synthetic)!==null&&s!==void 0&&s}};e.stack&&(o.stacktrace={type:"raw",frames:e.stack});var a=[o];return e.cause!=null&&a.push(...this.convertToExceptionList(e.cause,B({},n,{handled:!0}))),a}buildParsingContext(){return{chunkIdMap:qS(this.stackParser)}}buildCoercingContext(e,n,r){r===void 0&&(r=0);var i=(s,o)=>{if(o<=4){var a=this.buildCoercingContext(e,n,o);return this.applyCoercers(s,a)}};return B({},n,{syntheticException:r==0?n.syntheticException:void 0,mechanism:e,apply:s=>i(s,r),next:s=>i(s,r+1)})}}var di="?";function ku(t,e,n,r,i){var s={platform:t,filename:e,function:n==="<anonymous>"?di:n,in_app:!0};return N(r)||(s.lineno=r),N(i)||(s.colno=i),s}var nm=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:di,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},GS=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,VS=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,YS=/\((\S*)(?::(\d+))(?::(\d+))\)/,JS=(t,e)=>{var n=GS.exec(t);if(n){var[,r,i,s]=n;return ku(e,r,di,+i,+s)}var o=VS.exec(t);if(o){if(o[2]&&o[2].indexOf("eval")===0){var a=YS.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[c,u]=nm(o[1]||di,o[2]);return ku(e,u,c,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},KS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,XS=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ZS=(t,e)=>{var n=KS.exec(t);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var r=XS.exec(n[3]);r&&(n[1]=n[1]||"eval",n[3]=r[1],n[4]=r[2],n[5]="")}var i=n[3],s=n[1]||di;return[s,i]=nm(s,i),ku(e,i,s,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}},xf=/\(error: (.*)\)/,Cf=50;function QS(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(i,s){s===void 0&&(s=0);for(var o=[],a=i.split(`
`),c=s;c<a.length;c++){var u=a[c];if(!(u.length>1024)){var l=xf.test(u)?u.replace(xf,"$1"):u;if(!l.match(/\S*Error: /)){for(var d of n){var f=d(l,t);if(f){o.push(f);break}}if(o.length>=Cf)break}}}return(function(p){if(!p.length)return[];var h=Array.from(p);return h.reverse(),h.slice(0,Cf).map((g=>{return B({},g,{filename:g.filename||(m=h,m[m.length-1]||{}).filename,function:g.function||di});var m}))})(o)}}class eE{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,n){var r=Ve(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?n.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var n=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?n+": "+e.message:n}isDOMException(e){return Ko(e,"DOMException")}isDOMError(e){return Ko(e,"DOMError")}}class tE{match(e){return(n=>n instanceof Error)(e)}coerce(e,n){return{type:this.getType(e),value:this.getMessage(e,n),stack:this.getStack(e),cause:e.cause?n.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,n){var r=e.message;return r.error&&typeof r.error.message=="string"?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}class nE{constructor(){}match(e){return Ko(e,"ErrorEvent")&&e.error!=null}coerce(e,n){var r,i=n.apply(e.error);return i||{type:"ErrorEvent",value:e.message,stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}}var rE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class iE{match(e){return typeof e=="string"}coerce(e,n){var r,[i,s]=this.getInfos(e);return{type:i??"Error",value:s??e,stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}getInfos(e){var n="Error",r=e,i=e.match(rE);return i&&(n=i[1],r=i[2]),[n,r]}}var sE=["fatal","error","warning","log","info","debug"];function rm(t,e){e===void 0&&(e=40);var n=Object.keys(t);if(n.sort(),!n.length)return"[object has no keys]";for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length||i.length<=e?i:i.slice(0,e)+"..."}return""}class oE{match(e){return typeof e=="object"&&e!==null}coerce(e,n){var r,i=this.getErrorPropertyFromObject(e);return i?n.apply(i):{type:this.getType(e),value:this.getValue(e),stack:(r=n.syntheticException)==null?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return tm(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&typeof e.name=="string"){var n="'"+e.name+"' captured as exception";return"message"in e&&typeof e.message=="string"&&(n+=" with message: '"+e.message+"'"),n}if("message"in e&&typeof e.message=="string")return e.message;var r=this.getObjectClassName(e);return(r&&r!=="Object"?"'"+r+"'":"Object")+" captured as exception with keys: "+rm(e)}isSeverityLevel(e){return Ve(e)&&!Tu(e)&&sE.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];if(jS(r))return r}}getObjectClassName(e){try{var n=Object.getPrototypeOf(e);return n?n.constructor.name:void 0}catch{return}}}class aE{match(e){return tm(e)}coerce(e,n){var r,i=e.constructor.name;return{type:i,value:i+" captured as exception with keys: "+rm(e),stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class cE{match(e){return Iu(e)}coerce(e,n){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}}}class uE{match(e){return Ko(e,"PromiseRejectionEvent")}coerce(e,n){var r,i=this.getUnhandledRejectionReason(e);return Iu(i)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(i),stack:(r=n.syntheticException)==null?void 0:r.stack,synthetic:!0}:n.apply(i)}getUnhandledRejectionReason(e){if(Iu(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}}var im=function(t,e){var{debugEnabled:n}=e===void 0?{}:e,r={k:function(i){if(b&&(pn.DEBUG||Q.POSTHOG_DEBUG||n)&&!N(b.console)&&b.console){for(var s=("__rrweb_original__"in b.console[i])?b.console[i].__rrweb_original__:b.console[i],o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];s(t,...a)}},info:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.k("log",...s)},warn:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.k("warn",...s)},error:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];r.k("error",...s)},critical:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];console.error(t,...s)},uninitializedWarning:i=>{r.error("You must initialize PostHog before calling "+i)},createLogger:(i,s)=>im(t+" "+i,s)};return r},F=im("[PostHog.js]"),Ke=F.createLogger,lE=Ke("[ExternalScriptsLoader]"),Af=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return lE.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var r=D?.querySelectorAll("script");if(r){for(var i,s=function(){if(r[o].src===e){var c=r[o];return c.__posthog_loading_callback_fired?{v:n()}:(c.addEventListener("load",(u=>{c.__posthog_loading_callback_fired=!0,n(void 0,u)})),c.onerror=u=>n(u),{v:void 0})}},o=0;o<r.length;o++)if(i=s())return i.v}var a=()=>{if(!D)return n("document not found");var c=D.createElement("script");if(c.type="text/javascript",c.crossOrigin="anonymous",c.src=e,c.onload=d=>{c.__posthog_loading_callback_fired=!0,n(void 0,d)},c.onerror=d=>n(d),t.config.prepare_external_dependency_script&&(c=t.config.prepare_external_dependency_script(c)),!c)return n("prepare_external_dependency_script returned null");var u,l=D.querySelectorAll("body > script");l.length>0?(u=l[0].parentNode)==null||u.insertBefore(c,l[0]):D.body.appendChild(c)};D!=null&&D.body?a():D?.addEventListener("DOMContentLoaded",a)};Q.__PosthogExtensions__=Q.__PosthogExtensions__||{},Q.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var r="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(r="/array/"+t.config.token+"/config.js"),e==="toolbar"){var i=3e5;r=r+"&t="+Math.floor(Date.now()/i)*i}var s=t.requestRouter.endpointFor("assets",r);Af(t,s,n)},Q.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var r=t.requestRouter.endpointFor("api",e);Af(t,r,n)};var Xo={};function qn(t,e,n){if(we(t)){if(Sf&&t.forEach===Sf)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r)===Xo)return}}}function xe(t,e,n){if(!be(t)){if(we(t))return qn(t,e,n);if(FS(t)){for(var r of t.entries())if(e.call(n,r[1],r[0])===Xo)return}else for(var i in t)if(em.call(t,i)&&e.call(n,t[i],i)===Xo)return}}var Be=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return qn(n,(function(i){for(var s in i)i[s]!==void 0&&(t[s]=i[s])})),t},xi=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return qn(n,(function(i){qn(i,(function(s){t.push(s)}))})),t};function Ro(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}var Mf=function(t){try{return t()}catch{return}},dE=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(this,n)}catch(i){F.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),F.critical(i)}}},Dl=function(t){var e={};return xe(t,(function(n,r){(Ve(n)&&n.length>0||rn(n))&&(e[r]=n)})),e};function fE(t,e){return n=t,r=s=>Ve(s)&&!Cn(e)?s.slice(0,e):s,i=new Set,(function s(o,a){return o!==Object(o)?r?r(o,a):o:i.has(o)?void 0:(i.add(o),we(o)?(c=[],qn(o,(u=>{c.push(s(u))}))):(c={},xe(o,((u,l)=>{i.has(u)||(c[l]=s(u,l))}))),c);var c})(n);var n,r,i}var pE=["herokuapp.com","vercel.app","netlify.app"];function hE(t){var e=t?.hostname;if(!Ve(e))return!1;var n=e.split(".").slice(-2).join(".");for(var r of pE)if(n===r)return!1;return!0}function sm(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function We(t,e,n,r){var{capture:i=!1,passive:s=!0}=r??{};t?.addEventListener(e,n,{capture:i,passive:s})}var om="$people_distinct_id",Qi="__alias",es="__timers",Pf="$autocapture_disabled_server_side",Ru="$heatmaps_enabled_server_side",Of="$exception_capture_enabled_server_side",xu="$error_tracking_suppression_rules",Nf="$error_tracking_capture_extension_exceptions",Lf="$web_vitals_enabled_server_side",am="$dead_clicks_enabled_server_side",Df="$web_vitals_allowed_metrics",Cc="$session_recording_remote_config",Zo="$sesid",cm="$session_is_sampled",Qr="$enabled_feature_flags",ts="$early_access_features",Cu="$feature_flag_details",ns="$stored_person_properties",pr="$stored_group_properties",Au="$surveys",to="$surveys_activated",Qo="$flag_call_reported",hn="$user_state",Mu="$client_session_props",Pu="$capture_rate_limit",Ou="$initial_campaign_params",Nu="$initial_referrer_info",ea="$initial_person_info",ta="$epp",um="__POSTHOG_TOOLBAR__",ji="$posthog_cookieless",gE=[om,Qi,"__cmpns",es,"$session_recording_enabled_server_side",Ru,Zo,Qr,xu,hn,ts,Cu,pr,ns,Au,Qo,Mu,Pu,Ou,Nu,ta,ea];function $f(t){return t instanceof Element&&(t.id===um||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function qa(t){return!!t&&t.nodeType===1}function zn(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function lm(t){return!!t&&t.nodeType===3}function dm(t){return!!t&&t.nodeType===11}function $l(t){return t?Wa(t).split(/\s+/):[]}function Ff(t){var e=b?.location.href;return!!(e&&t&&t.some((n=>e.match(n))))}function na(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return $l(e)}function fm(t){return be(t)?null:Wa(t).split(/(\s+)/).filter((e=>ms(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Ms(t){var e="";return Lu(t)&&!_m(t)&&t.childNodes&&t.childNodes.length&&xe(t.childNodes,(function(n){var r;lm(n)&&n.textContent&&(e+=(r=fm(n.textContent))!==null&&r!==void 0?r:"")})),Wa(e)}function pm(t){return N(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var Fl=["a","button","form","input","select","textarea","label"];function hm(t,e){if(N(e))return!0;var n,r=function(s){if(e.some((o=>s.matches(o))))return{v:!0}};for(var i of t)if(n=r(i))return n.v;return!1}function gm(t){var e=t.parentNode;return!(!e||!qa(e))&&e}var mE=["next","previous","prev",">","<"],Uf=10,Bf=[".ph-no-rageclick",".ph-no-capture"];function _E(t,e){if(!b||Ul(t))return!1;var n,r,i;if(jn(e)?(n=!!e&&Bf,r=void 0):(n=(i=e?.css_selector_ignorelist)!==null&&i!==void 0?i:Bf,r=e?.content_ignorelist),n===!1)return!1;var{targetElementList:s}=mm(t,!1);return!(function(o,a){if(o===!1||N(o))return!1;var c;if(o===!0)c=mE;else{if(!we(o))return!1;if(o.length>Uf)return F.error("[PostHog] content_ignorelist array cannot exceed "+Uf+" items. Use css_selector_ignorelist for more complex matching."),!1;c=o.map((u=>u.toLowerCase()))}return a.some((u=>{var{safeText:l,ariaLabel:d}=u;return c.some((f=>l.includes(f)||d.includes(f)))}))})(r,s.map((o=>{var a;return{safeText:Ms(o).toLowerCase(),ariaLabel:((a=o.getAttribute("aria-label"))==null?void 0:a.toLowerCase().trim())||""}})))&&!hm(s,n)}var Ul=t=>!t||zn(t,"html")||!qa(t),mm=(t,e)=>{if(!b||Ul(t))return{parentIsUsefulElement:!1,targetElementList:[]};for(var n=!1,r=[t],i=t;i.parentNode&&!zn(i,"body");)if(dm(i.parentNode))r.push(i.parentNode.host),i=i.parentNode.host;else{var s=gm(i);if(!s)break;if(e||Fl.indexOf(s.tagName.toLowerCase())>-1)n=!0;else{var o=b.getComputedStyle(s);o&&o.getPropertyValue("cursor")==="pointer"&&(n=!0)}r.push(s),i=s}return{parentIsUsefulElement:n,targetElementList:r}};function yE(t,e,n,r,i){var s,o,a,c;if(n===void 0&&(n=void 0),!b||Ul(t)||(s=n)!=null&&s.url_allowlist&&!Ff(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&Ff(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var u=n.dom_event_allowlist;if(u&&!u.some((h=>e.type===h)))return!1}var{parentIsUsefulElement:l,targetElementList:d}=mm(t,r);if(!(function(h,g){var m=g?.element_allowlist;if(N(m))return!0;var _,v=function(E){if(m.some((C=>E.tagName.toLowerCase()===C)))return{v:!0}};for(var I of h)if(_=v(I))return _.v;return!1})(d,n)||!hm(d,(c=n)==null?void 0:c.css_selector_allowlist))return!1;var f=b.getComputedStyle(t);if(f&&f.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var p=t.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(e.type)>=0;default:return l?(i||["click"]).indexOf(e.type)>=0:(i||["click"]).indexOf(e.type)>=0&&(Fl.indexOf(p)>-1||t.getAttribute("contenteditable")==="true")}}function Lu(t){for(var e=t;e.parentNode&&!zn(e,"body");e=e.parentNode){var n=na(e);if(le(n,"ph-sensitive")||le(n,"ph-no-capture"))return!1}if(le(na(t),"ph-include"))return!0;var r=t.type||"";if(Ve(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=t.name||t.id||"";return!(Ve(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function _m(t){return!!(zn(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||zn(t,"select")||zn(t,"textarea")||t.getAttribute("contenteditable")==="true")}var ym="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",vE=new RegExp("^(?:"+ym+")$"),bE=new RegExp(ym),vm="\\d{3}-?\\d{2}-?\\d{4}",SE=new RegExp("^("+vm+")$"),EE=new RegExp("("+vm+")");function ms(t,e){return e===void 0&&(e=!0),!(be(t)||Ve(t)&&(t=Wa(t),(e?vE:bE).test((t||"").replace(/[- ]/g,""))||(e?SE:EE).test(t)))}function bm(t){var e=Ms(t);return ms(e=(e+" "+Sm(t)).trim())?e:""}function Sm(t){var e="";return t&&t.childNodes&&t.childNodes.length&&xe(t.childNodes,(function(n){var r;if(n&&((r=n.tagName)==null?void 0:r.toLowerCase())==="span")try{var i=Ms(n);e=(e+" "+i).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+Sm(n)).trim())}catch(s){F.error("[AutoCapture]",s)}})),e}function wE(t){return(function(e){var n=e.map((r=>{var i,s,o="";if(r.tag_name&&(o+=r.tag_name),r.attr_class)for(var a of(r.attr_class.sort(),r.attr_class))o+="."+a.replace(/"/g,"");var c=B({},r.text?{text:r.text}:{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(s=r.nth_of_type)!==null&&s!==void 0?s:0},r.href?{href:r.href}:{},r.attr_id?{attr_id:r.attr_id}:{},r.attributes),u={};return Ro(c).sort(((l,d)=>{var[f]=l,[p]=d;return f.localeCompare(p)})).forEach((l=>{var[d,f]=l;return u[Hf(d.toString())]=Hf(f.toString())})),o+=":",o+=Ro(u).map((l=>{var[d,f]=l;return d+'="'+f+'"'})).join("")}));return n.join(";")})((function(e){return e.map((n=>{var r,i,s={text:(r=n.$el_text)==null?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)==null?void 0:i.slice(0,2048),attr_class:TE(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ro(n).filter((o=>{var[a]=o;return a.indexOf("attr__")===0})).forEach((o=>{var[a,c]=o;return s.attributes[a]=c})),s}))})(t))}function Hf(t){return t.replace(/"|\\"/g,'\\"')}function TE(t){var e=t.attr__class;return e?we(e)?e:$l(e):void 0}class Em{constructor(e){this.disabled=e===!1;var n=Ze(e)?e:{};this.thresholdPx=n.threshold_px||30,this.timeoutMs=n.timeout_ms||1e3,this.clickCount=n.click_count||3,this.clicks=[]}isRageClick(e,n,r){if(this.disabled)return!1;var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(e-i.x)+Math.abs(n-i.y)<this.thresholdPx&&r-i.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:n,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:n,timestamp:r}];return!1}}var xo="$copy_autocapture",Jt=(function(t){return t.GZipJS="gzip-js",t.Base64="base64",t})({}),IE=["fatal","error","warning","log","info","debug"],ra=t=>{var e=D?.createElement("a");return N(e)?null:(e.href=t,e)},kE=function(t,e){var n,r;e===void 0&&(e="&");var i=[];return xe(t,(function(s,o){N(s)||N(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),r=encodeURIComponent(o),i[i.length]=r+"="+n)})),i.join(e)},ia=function(t,e){for(var n,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<r.length;i++){var s=r[i].split("=");if(s[0]===e){n=s;break}}if(!we(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{F.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Ps=function(t,e,n){if(!t||!e||!e.length)return t;for(var r=t.split("#"),i=r[0]||"",s=r[1],o=i.split("?"),a=o[1],c=o[0],u=(a||"").split("&"),l=[],d=0;d<u.length;d++){var f=u[d].split("=");we(f)&&(e.includes(f[0])?l.push(f[0]+"="+n):l.push(u[d]))}var p=c;return a!=null&&(p+="?"+l.join("&")),s!=null&&(p+="#"+s),p},sa=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},Wf=Ke("[AutoCapture]");function Ac(t,e){return e.length>t?e.slice(0,t)+"...":e}function RE(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!qa(e));return e}function xE(t,e,n,r){var i=t.tagName.toLowerCase(),s={tag_name:i};Fl.indexOf(i)>-1&&!n&&(i.toLowerCase()==="a"||i.toLowerCase()==="button"?s.$el_text=Ac(1024,bm(t)):s.$el_text=Ac(1024,Ms(t)));var o=na(t);o.length>0&&(s.classes=o.filter((function(l){return l!==""}))),xe(t.attributes,(function(l){var d;if((!_m(t)||["name","id","class","aria-label"].indexOf(l.name)!==-1)&&(r==null||!r.includes(l.name))&&!e&&ms(l.value)&&(d=l.name,!Ve(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=l.value;l.name==="class"&&(f=$l(f).join(" ")),s["attr__"+l.name]=Ac(1024,f)}}));for(var a=1,c=1,u=t;u=RE(u);)a++,u.tagName===t.tagName&&c++;return s.nth_child=a,s.nth_of_type=c,s}function CE(t,e){for(var n,r,{e:i,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:c}=e,u=[t],l=t;l.parentNode&&!zn(l,"body");)dm(l.parentNode)?(u.push(l.parentNode.host),l=l.parentNode.host):(u.push(l.parentNode),l=l.parentNode);var d,f=[],p={},h=!1,g=!1;if(xe(u,(E=>{var C=Lu(E);E.tagName.toLowerCase()==="a"&&(h=E.getAttribute("href"),h=C&&h&&ms(h)&&h),le(na(E),"ph-no-capture")&&(g=!0),f.push(xE(E,s,o,a));var A=(function(S){if(!Lu(S))return{};var w={};return xe(S.attributes,(function(W){if(W.name&&W.name.indexOf("data-ph-capture-attribute")===0){var T=W.name.replace("data-ph-capture-attribute-",""),M=W.value;T&&M&&ms(M)&&(w[T]=M)}})),w})(E);Be(p,A)})),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=bm(t):f[0].$el_text=Ms(t)),h){var m,_;f[0].attr__href=h;var v=(m=ra(h))==null?void 0:m.host,I=b==null||(_=b.location)==null?void 0:_.host;v&&I&&v!==I&&(d=h)}return{props:Be({$event_type:i.type,$ce_version:1},c?{}:{$elements:f},{$elements_chain:wE(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(r=f[0])==null?void 0:r.$el_text}:{},d&&i.type==="click"?{$external_click_url:d}:{},p)}}class AE{constructor(e){this.P=!1,this.T=null,this.R=!1,this.instance=e,this.rageclicks=new Em(e.config.rageclick),this.I=null}get F(){var e,n,r=Ze(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(e=r.url_allowlist)==null?void 0:e.map((i=>new RegExp(i))),r.url_ignorelist=(n=r.url_ignorelist)==null?void 0:n.map((i=>new RegExp(i))),r}C(){if(this.isBrowserSupported()){if(b&&D){var e=r=>{r=r||b?.event;try{this.M(r)}catch(i){Wf.error("Failed to capture event",i)}};if(We(D,"submit",e,{capture:!0}),We(D,"change",e,{capture:!0}),We(D,"click",e,{capture:!0}),this.F.capture_copied_text){var n=r=>{r=r||b?.event,this.M(r,xo)};We(D,"copy",n,{capture:!0}),We(D,"cut",n,{capture:!0})}}}else Wf.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.C(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.R=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[Pf]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.I=e}getElementSelectors(e){var n,r=[];return(n=this.I)==null||n.forEach((i=>{var s=D?.querySelectorAll(i);s?.forEach((o=>{e===o&&r.push(i)}))})),r}get isEnabled(){var e,n,r=(e=this.instance.persistence)==null?void 0:e.props[Pf],i=this.T;if(Cn(i)&&!jn(r)&&!this.instance.O())return!1;var s=(n=this.T)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!s}M(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var r,i=pm(e);lm(i)&&(i=i.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||new Date().getTime())&&_E(i,this.instance.config.rageclick)&&this.M(e,"$rageclick");var s=n===xo;if(i&&yE(i,e,this.F,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=CE(i,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.F.element_attribute_ignorelist,elementsChainAsString:this.R});if(a)return!1;var c=this.getElementSelectors(i);if(c&&c.length>0&&(o.$element_selectors=c),n===xo){var u,l=fm(b==null||(u=b.getSelection())==null?void 0:u.toString()),d=e.type||"clipboard";if(!l)return!1;o.$selected_content=l,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Wn(D?.querySelectorAll)}}Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return rn(t)&&isFinite(t)&&Math.floor(t)===t});var jf="0123456789abcdef";class oa{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,r,i){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||e<0||n<0||r<0||i<0||e>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=i>>>24,s[13]=i>>>16,s[14]=i>>>8,s[15]=i,new oa(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+jf.charAt(this.bytes[n]>>>4)+jf.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new oa(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var r=this.bytes[n]-e.bytes[n];if(r!==0)return Math.sign(r)}return 0}}class ME{constructor(){this.A=0,this.D=0,this.j=new PE}generate(){var e=this.generateOrAbort();if(N(e)){this.A=0;var n=this.generateOrAbort();if(N(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return oa.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var qf,wm=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};b&&!N(b.crypto)&&crypto.getRandomValues&&(wm=t=>crypto.getRandomValues(t));class PE{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(wm(this.N),this.U=0),this.N[this.U++]}}var Bn=()=>OE().toString(),OE=()=>(qf||(qf=new ME)).generate(),qi="",NE=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function LE(t,e){if(e){var n=(function(i,s){if(s===void 0&&(s=D),qi)return qi;if(!s||["localhost","127.0.0.1"].includes(i))return"";for(var o=i.split("."),a=Math.min(o.length,8),c="dmn_chk_"+Bn();!qi&&a--;){var u=o.slice(a).join("."),l=c+"=1;domain=."+u+";path=/";s.cookie=l+";max-age=3",s.cookie.includes(c)&&(s.cookie=l+";max-age=0",qi=u)}return qi})(t);if(!n){var r=(i=>{var s=i.match(NE);return s?s[0]:""})(t);r!==n&&F.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var Qt={H:()=>!!D,B:function(t){F.error("cookieStore error: "+t)},q:function(t){if(D){try{for(var e=t+"=",n=D.cookie.split(";").filter((s=>s.length)),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return decodeURIComponent(i.substring(e.length,i.length))}}catch{}return null}},W:function(t){var e;try{e=JSON.parse(Qt.q(t))||{}}catch{}return e},G:function(t,e,n,r,i){if(D)try{var s="",o="",a=LE(D.location.hostname,r);if(n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3),s="; expires="+c.toUTCString()}i&&(o="; secure");var u=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return u.length>3686.4&&F.warn("cookieStore warning: large cookie, len="+u.length),D.cookie=u,u}catch{return}},V:function(t,e){if(D!=null&&D.cookie)try{Qt.G(t,"",-1,e)}catch{return}}},Mc=null,Ne={H:function(){if(!Cn(Mc))return Mc;var t=!0;if(N(b))t=!1;else try{var e="__mplssupport__";Ne.G(e,"xyz"),Ne.q(e)!=='"xyz"'&&(t=!1),Ne.V(e)}catch{t=!1}return t||F.error("localStorage unsupported; falling back to cookie store"),Mc=t,t},B:function(t){F.error("localStorage error: "+t)},q:function(t){try{return b?.localStorage.getItem(t)}catch(e){Ne.B(e)}return null},W:function(t){try{return JSON.parse(Ne.q(t))||{}}catch{}return null},G:function(t,e){try{b?.localStorage.setItem(t,JSON.stringify(e))}catch(n){Ne.B(n)}},V:function(t){try{b?.localStorage.removeItem(t)}catch(e){Ne.B(e)}}},DE=["distinct_id",Zo,cm,ta,ea],no=B({},Ne,{W:function(t){try{var e={};try{e=Qt.W(t)||{}}catch{}var n=Be(e,JSON.parse(Ne.q(t)||"{}"));return Ne.G(t,n),n}catch{}return null},G:function(t,e,n,r,i,s){try{Ne.G(t,e,void 0,void 0,s);var o={};DE.forEach((a=>{e[a]&&(o[a]=e[a])})),Object.keys(o).length&&Qt.G(t,o,n,r,i,s)}catch(a){Ne.B(a)}},V:function(t,e){try{b?.localStorage.removeItem(t),Qt.V(t,e)}catch(n){Ne.B(n)}}}),ro={},$E={H:function(){return!0},B:function(t){F.error("memoryStorage error: "+t)},q:function(t){return ro[t]||null},W:function(t){return ro[t]||null},G:function(t,e){ro[t]=e},V:function(t){delete ro[t]}},cr=null,tt={H:function(){if(!Cn(cr))return cr;if(cr=!0,N(b))cr=!1;else try{var t="__support__";tt.G(t,"xyz"),tt.q(t)!=='"xyz"'&&(cr=!1),tt.V(t)}catch{cr=!1}return cr},B:function(t){F.error("sessionStorage error: ",t)},q:function(t){try{return b?.sessionStorage.getItem(t)}catch(e){tt.B(e)}return null},W:function(t){try{return JSON.parse(tt.q(t))||null}catch{}return null},G:function(t,e){try{b?.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){tt.B(n)}},V:function(t){try{b?.sessionStorage.removeItem(t)}catch(e){tt.B(e)}}},gn=(function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t})({});class FE{constructor(e){this._instance=e}get F(){return this._instance.config}get consent(){return this.J()?gn.DENIED:this.K}isOptedOut(){return this.F.cookieless_mode==="always"||this.consent===gn.DENIED||this.consent===gn.PENDING&&(this.F.opt_out_capturing_by_default||this.F.cookieless_mode==="on_reject")}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===gn.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.F.cookie_expiration,this.F.cross_subdomain_cookie,this.F.secure_cookie)}reset(){this.Y.V(this.X,this.F.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:n,consent_persistence_name:r}=this._instance.config;return r||(n?n+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return Rc(e)?gn.GRANTED:le(HS,e)?gn.DENIED:gn.PENDING}get Y(){if(!this.Z){var e=this.F.opt_out_capturing_persistence_type;this.Z=e==="localStorage"?Ne:Qt;var n=e==="localStorage"?Qt:Ne;n.q(this.X)&&(this.Z.q(this.X)||this.optInOut(Rc(n.q(this.X))),n.V(this.X,this.F.cross_subdomain_cookie))}return this.Z}J(){return!!this.F.respect_dnt&&!!sm([Rt?.doNotTrack,Rt?.msDoNotTrack,Q.doNotTrack],(e=>Rc(e)))}}var io=Ke("[Dead Clicks]"),UE=()=>!0,BE=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(am)),r=t.instance.config.capture_dead_clicks;return jn(r)?r:!!Ze(r)||n};class Tm{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,n,r){this.instance=e,this.isEnabled=n,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[am]:e?.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it((()=>{this.et()}))}it(e){var n,r;(n=Q.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(r=Q.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",(i=>{i?io.error("failed to load script",i):e()}))}et(){var e;if(D){if(!this.tt&&(e=Q.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=Ze(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.tt=Q.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.tt.start(D),io.info("starting...")}}else io.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,io.info("stopping..."))}}var zi=Ke("[ExceptionAutocapture]");class HE{constructor(e){var n,r,i;this.rt=()=>{var s;if(b&&this.isEnabled&&(s=Q.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Q.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Q.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,c=Q.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.F.capture_unhandled_errors&&(this.st=o(this.captureException.bind(this))),!this.nt&&this.F.capture_unhandled_rejections&&(this.nt=a(this.captureException.bind(this))),!this.ot&&this.F.capture_console_errors&&(this.ot=c(this.captureException.bind(this)))}catch(u){zi.error("failed to start",u),this.lt()}}},this._instance=e,this.ut=!((n=this._instance.persistence)==null||!n.props[Of]),this.F=this.ht(),this.vt=new WS({refillRate:(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&r!==void 0?r:1,bucketSize:(i=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&i!==void 0?i:10,refillInterval:1e4,h:zi}),this.startIfEnabled()}ht(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Ze(e)?n=B({},n,e):(N(e)?this.ut:e)&&(n=B({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.F.capture_console_errors||this.F.capture_unhandled_errors||this.F.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(zi.info("enabled"),this.it(this.rt))}it(e){var n,r;(n=Q.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(r=Q.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"exception-autocapture",(i=>{if(i)return zi.error("failed to load script",i);e()}))}lt(){var e,n,r;(e=this.st)==null||e.call(this),this.st=void 0,(n=this.nt)==null||n.call(this),this.nt=void 0,(r=this.ot)==null||r.call(this),this.ot=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.ut=!!n||!1,this.F=this.ht(),this._instance.persistence&&this._instance.persistence.register({[Of]:this.ut}),this.startIfEnabled()}captureException(e){var n,r,i=(n=e==null||(r=e.$exception_list)==null||(r=r[0])==null?void 0:r.type)!==null&&n!==void 0?n:"Exception";this.vt.consumeRateLimit(i)?zi.info("Skipping exception capture because of client rate limiting.",{exception:i}):this._instance.exceptions.sendExceptionEvent(e)}}function zf(t,e,n){try{if(!(e in t))return()=>{};var r=t[e],i=n(r);return Wn(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}class WE{constructor(e){var n;this._instance=e,this.dt=(b==null||(n=b.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(F.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ct&&this.ct(),this.ct=void 0,F.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(b&&b.history){var r=this;(e=b.history.pushState)!=null&&e.__posthog_wrapped__||zf(b.history,"pushState",(i=>function(s,o,a){i.call(this,s,o,a),r.ft("pushState")})),(n=b.history.replaceState)!=null&&n.__posthog_wrapped__||zf(b.history,"replaceState",(i=>function(s,o,a){i.call(this,s,o,a),r.ft("replaceState")})),this.gt()}}ft(e){try{var n,r=b==null||(n=b.location)==null?void 0:n.pathname;if(!r)return;r!==this.dt&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.dt=r}catch(i){F.error("Error capturing "+e+" pageview",i)}}gt(){if(!this.ct){var e=()=>{this.ft("popstate")};We(b,"popstate",e),this.ct=()=>{b&&b.removeEventListener("popstate",e)}}}}var Pc=Ke("[SegmentIntegration]");function jE(t,e){var n=t.config.segment;if(!n)return e();(function(r,i){var s=r.config.segment;if(!s)return i();var o=c=>{var u=()=>c.anonymousId()||Bn();r.config.get_device_id=u,c.id()&&(r.register({distinct_id:c.id(),$device_id:u()}),r.persistence.set_property(hn,"identified")),i()},a=s.user();"then"in a&&Wn(a.then)?a.then((c=>o(c))):o(a)})(t,(()=>{n.register((r=>{Promise&&Promise.resolve||Pc.warn("This browser does not have Promise support, and can not use the segment integration");var i=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===r.get_distinct_id()||(Pc.info("No userId set, resetting PostHog"),r.reset()),s.event.userId&&s.event.userId!==r.get_distinct_id()&&(Pc.info("UserId set, identifying with PostHog"),r.identify(s.event.userId));var a=r.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>i(s,s.event.event),page:s=>i(s,"$pageview"),identify:s=>i(s,"$identify"),screen:s=>i(s,"$screen")}})(t)).then((()=>{e()}))}))}var Im="posthog-js";function km(t,e){var{organization:n,projectId:r,prefix:i,severityAllowList:s=["error"],sendExceptionsToPostHog:o=!0}=e===void 0?{}:e;return a=>{var c,u,l,d,f;if(!(s==="*"||s.includes(a.level))||!t.__loaded)return a;a.tags||(a.tags={});var p=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());a.tags["PostHog Person URL"]=p,t.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var h=((c=a.exception)==null?void 0:c.values)||[],g=h.map((_=>B({},_,{stacktrace:_.stacktrace?B({},_.stacktrace,{type:"raw",frames:(_.stacktrace.frames||[]).map((v=>B({},v,{platform:"web:javascript"})))}):void 0}))),m={$exception_message:((u=h[0])==null?void 0:u.value)||a.message,$exception_type:(l=h[0])==null?void 0:l.type,$exception_level:a.level,$exception_list:g,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((d=h[0])==null?void 0:d.value)||a.message,$sentry_exception_type:(f=h[0])==null?void 0:f.type,$sentry_tags:a.tags};return n&&r&&(m.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+a.event_id),o&&t.exceptions.sendExceptionEvent(m),a}}class qE{constructor(e,n,r,i,s,o){this.name=Im,this.setupOnce=function(a){a(km(e,{organization:n,projectId:r,prefix:i,severityAllowList:s,sendExceptionsToPostHog:o==null||o}))}}}var zE=b!=null&&b.location?sa(b.location.hash,"__posthog")||sa(location.hash,"state"):null,Gf="_postHogToolbarParams",Vf=Ke("[Toolbar]"),Dn=(function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t})(Dn||{});class GE{constructor(e){this.instance=e}_t(e){Q.ph_toolbar_state=e}yt(){var e;return(e=Q.ph_toolbar_state)!==null&&e!==void 0?e:Dn.UNINITIALIZED}maybeLoadToolbar(e,n,r){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),!b||!D)return!1;e=e??b.location,r=r??b.history;try{if(!n){try{b.localStorage.setItem("test","test"),b.localStorage.removeItem("test")}catch{return!1}n=b?.localStorage}var i,s=zE||sa(e.hash,"__posthog")||sa(e.hash,"state"),o=s?Mf((()=>JSON.parse(atob(decodeURIComponent(s)))))||Mf((()=>JSON.parse(decodeURIComponent(s)))):null;return o&&o.action==="ph_authorize"?((i=o).source="url",i&&Object.keys(i).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((i=JSON.parse(n.getItem(Gf)||"{}")).source="localstorage",delete i.userIntent),!(!i.token||this.instance.config.token!==i.token)&&(this.loadToolbar(i),!0)}catch{return!1}}bt(e){var n=Q.ph_load_toolbar||Q.ph_load_editor;!be(n)&&Wn(n)?n(e,this.instance):Vf.warn("No toolbar load function found")}loadToolbar(e){var n=!(D==null||!D.getElementById(um));if(!b||n)return!1;var r=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,i=B({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(b.localStorage.setItem(Gf,JSON.stringify(B({},i,{source:void 0}))),this.yt()===Dn.LOADED)this.bt(i);else if(this.yt()===Dn.UNINITIALIZED){var s;this._t(Dn.LOADING),(s=Q.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",(o=>{if(o)return Vf.error("[Toolbar] Failed to load",o),void this._t(Dn.UNINITIALIZED);this._t(Dn.LOADED),this.bt(i)})),We(b,"turbolinks:load",(()=>{this._t(Dn.UNINITIALIZED),this.loadToolbar(i)}))}return!0}wt(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,r){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),r===void 0&&(r=void 0),this.maybeLoadToolbar(e,n,r)}}var VE=Ke("[TracingHeaders]");class YE{constructor(e){this.xt=void 0,this.St=void 0,this.rt=()=>{var n,r;N(this.xt)&&((n=Q.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),N(this.St)&&((r=Q.__PosthogExtensions__)==null||(r=r.tracingHeadersPatchFns)==null||r._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var n,r;(n=Q.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(r=Q.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"tracing-headers",(i=>{if(i)return VE.error("failed to load script",i);e()}))}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.it(this.rt):((e=this.xt)==null||e.call(this),(n=this.St)==null||n.call(this),this.xt=void 0,this.St=void 0)}}var At="Mobile",aa="iOS",Xt="Android",_s="Tablet",Rm=Xt+" "+_s,xm="iPad",Cm="Apple",Am=Cm+" Watch",ys="Safari",fi="BlackBerry",Mm="Samsung",Pm=Mm+"Browser",Om=Mm+" Internet",kr="Chrome",JE=kr+" OS",Nm=kr+" "+aa,Bl="Internet Explorer",Lm=Bl+" "+At,Hl="Opera",KE=Hl+" Mini",Wl="Edge",Dm="Microsoft "+Wl,si="Firefox",$m=si+" "+aa,vs="Nintendo",bs="PlayStation",oi="Xbox",Fm=Xt+" "+At,Um=At+" "+ys,rs="Windows",Du=rs+" Phone",Yf="Nokia",$u="Ouya",Bm="Generic",XE=Bm+" "+At.toLowerCase(),Hm=Bm+" "+_s.toLowerCase(),Fu="Konqueror",ct="(\\d+(\\.\\d+)?)",Oc=new RegExp("Version/"+ct),ZE=new RegExp(oi,"i"),QE=new RegExp(bs+" \\w+","i"),e0=new RegExp(vs+" \\w+","i"),jl=new RegExp(fi+"|PlayBook|BB10","i"),t0={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},n0=(t,e)=>e&&le(e,Cm)||(function(n){return le(n,ys)&&!le(n,kr)&&!le(n,Xt)})(t),Wm=function(t,e){return e=e||"",le(t," OPR/")&&le(t,"Mini")?KE:le(t," OPR/")?Hl:jl.test(t)?fi:le(t,"IE"+At)||le(t,"WPDesktop")?Lm:le(t,Pm)?Om:le(t,Wl)||le(t,"Edg/")?Dm:le(t,"FBIOS")?"Facebook "+At:le(t,"UCWEB")||le(t,"UCBrowser")?"UC Browser":le(t,"CriOS")?Nm:le(t,"CrMo")||le(t,kr)?kr:le(t,Xt)&&le(t,ys)?Fm:le(t,"FxiOS")?$m:le(t.toLowerCase(),Fu.toLowerCase())?Fu:n0(t,e)?le(t,At)?Um:ys:le(t,si)?si:le(t,"MSIE")||le(t,"Trident/")?Bl:le(t,"Gecko")?si:""},r0={[Lm]:[new RegExp("rv:"+ct)],[Dm]:[new RegExp(Wl+"?\\/"+ct)],[kr]:[new RegExp("("+kr+"|CrMo)\\/"+ct)],[Nm]:[new RegExp("CriOS\\/"+ct)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+ct)],[ys]:[Oc],[Um]:[Oc],[Hl]:[new RegExp("(Opera|OPR)\\/"+ct)],[si]:[new RegExp(si+"\\/"+ct)],[$m]:[new RegExp("FxiOS\\/"+ct)],[Fu]:[new RegExp("Konqueror[:/]?"+ct,"i")],[fi]:[new RegExp(fi+" "+ct),Oc],[Fm]:[new RegExp("android\\s"+ct,"i")],[Om]:[new RegExp(Pm+"\\/"+ct)],[Bl]:[new RegExp("(rv:|MSIE )"+ct)],Mozilla:[new RegExp("rv:"+ct)]},i0=function(t,e){var n=Wm(t,e),r=r0[n];if(N(r))return null;for(var i=0;i<r.length;i++){var s=r[i],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},Jf=[[new RegExp(oi+"; "+oi+" (.*?)[);]","i"),t=>[oi,t&&t[1]||""]],[new RegExp(vs,"i"),[vs,""]],[new RegExp(bs,"i"),[bs,""]],[jl,[fi,""]],[new RegExp(rs,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[Du,""];if(new RegExp(At).test(e)&&!/IEMobile\b/.test(e))return[rs+" "+At,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var r=n[1],i=t0[r]||"";return/arm/i.test(e)&&(i="RT"),[rs,i]}return[rs,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[aa,e.join(".")]}return[aa,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=N(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+Xt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+Xt+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[Xt,e.join(".")]}return[Xt,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[JE,""]],[/Linux|debian/i,["Linux",""]]],Kf=function(t){return e0.test(t)?vs:QE.test(t)?bs:ZE.test(t)?oi:new RegExp($u,"i").test(t)?$u:new RegExp("("+Du+"|WPDesktop)","i").test(t)?Du:/iPad/.test(t)?xm:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?Am:jl.test(t)?fi:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(Yf,"i").test(t)?Yf:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(At).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?Xt:Rm:Xt:new RegExp("(pda|"+At+")","i").test(t)?XE:new RegExp(_s,"i").test(t)&&!new RegExp(_s+" pc","i").test(t)?Hm:""},so="https?://(.*)",Ci=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],s0=xi(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],Ci),Os="<masked>",o0=["li_fat_id"];function jm(t,e,n){if(!D)return{};var r,i=e?xi([],Ci,n||[]):[],s=qm(Ps(D.URL,i,Os),t),o=(r={},xe(o0,(function(a){var c=Qt.q(a);r[a]=c||null})),r);return Be(o,s)}function qm(t,e){var n=s0.concat(e||[]),r={};return xe(n,(function(i){var s=ia(t,i);r[i]=s||null})),r}function zm(t){var e=(function(s){return s?s.search(so+"google.([^/?]*)")===0?"google":s.search(so+"bing.com")===0?"bing":s.search(so+"yahoo.com")===0?"yahoo":s.search(so+"duckduckgo.com")===0?"duckduckgo":null:null})(t),n=e!="yahoo"?"q":"p",r={};if(!Cn(e)){r.$search_engine=e;var i=D?ia(D.referrer,n):"";i.length&&(r.ph_keyword=i)}return r}function Xf(){return navigator.language||navigator.userLanguage}function Gm(){return D?.referrer||"$direct"}function Vm(t,e){var n=t?xi([],Ci,e||[]):[],r=gt?.href.substring(0,1e3);return{r:Gm().substring(0,1e3),u:r?Ps(r,n,Os):void 0}}function Ym(t){var e,{r:n,u:r}=t,i={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=ra(n))==null?void 0:e.host};if(r){i.$current_url=r;var s=ra(r);i.$host=s?.host,i.$pathname=s?.pathname;var o=qm(r);Be(i,o)}if(n){var a=zm(n);Be(i,a)}return i}function Jm(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function a0(){try{return new Date().getTimezoneOffset()}catch{return}}function c0(t,e){if(!ht)return{};var n,r,i,s=t?xi([],Ci,e||[]):[],[o,a]=(function(c){for(var u=0;u<Jf.length;u++){var[l,d]=Jf[u],f=l.exec(c),p=f&&(Wn(d)?d(f,c):d);if(p)return p}return["",""]})(ht);return Be(Dl({$os:o,$os_version:a,$browser:Wm(ht,navigator.vendor),$device:Kf(ht),$device_type:(r=ht,i=Kf(r),i===xm||i===Rm||i==="Kobo"||i==="Kindle Fire"||i===Hm?_s:i===vs||i===oi||i===bs||i===$u?"Console":i===Am?"Wearable":i?At:"Desktop"),$timezone:Jm(),$timezone_offset:a0()}),{$current_url:Ps(gt?.href,s,Os),$host:gt?.host,$pathname:gt?.pathname,$raw_user_agent:ht.length>1e3?ht.substring(0,997)+"...":ht,$browser_version:i0(ht,navigator.vendor),$browser_language:Xf(),$browser_language_prefix:(n=Xf(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:b?.screen.height,$screen_width:b?.screen.width,$viewport_height:b?.innerHeight,$viewport_width:b?.innerWidth,$lib:"web",$lib_version:pn.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var On=Ke("[Web Vitals]"),Zf=9e5;class u0{constructor(e){var n;this.Et=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.$t=()=>{clearTimeout(this.kt),this.N.metrics.length!==0&&(this._instance.capture("$web_vitals",this.N.metrics.reduce(((r,i)=>B({},r,{["$web_vitals_"+i.name+"_event"]:B({},i),["$web_vitals_"+i.name+"_value"]:i.value})),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Pt=r=>{var i,s=(i=this._instance.sessionManager)==null?void 0:i.checkAndGetSessionAndWindowId(!0);if(N(s))On.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.Tt();N(o)||(be(r?.name)||be(r?.value)?On.error("Invalid metric received",r):this.Rt&&r.value>=this.Rt?On.error("Ignoring metric with value >= "+this.Rt,r):(this.N.url!==o&&(this.$t(),this.kt=setTimeout(this.$t,this.flushToCaptureTimeoutMs)),N(this.N.url)&&(this.N.url=o),this.N.firstMetricTimestamp=N(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,r.attribution&&r.attribution.interactionTargetElement&&(r.attribution.interactionTargetElement=void 0),this.N.metrics.push(B({},r,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.$t()))}},this.rt=()=>{var r,i,s,o,a=Q.__PosthogExtensions__;N(a)||N(a.postHogWebVitalsCallbacks)||({onLCP:r,onCLS:i,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),r&&i&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&r(this.Pt.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&i(this.Pt.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Pt.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Pt.bind(this)),this.P=!0):On.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Et=!((n=this._instance.persistence)==null||!n.props[Lf]),this.startIfEnabled()}get allowedMetrics(){var e,n,r=Ze(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return N(r)?((n=this._instance.persistence)==null?void 0:n.props[Df])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Ze(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var e=Ze(this._instance.config.capture_performance)&&rn(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:Zf;return 0<e&&e<=6e4?Zf:e}get isEnabled(){var e=gt?.protocol;if(e!=="http:"&&e!=="https:")return On.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=Ze(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:jn(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return jn(n)?n:this.Et}startIfEnabled(){this.isEnabled&&!this.P&&(On.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var n=Ze(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Ze(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[Lf]:n}),this._instance.persistence.register({[Df]:r})),this.Et=n,this.startIfEnabled()}it(e){var n,r;(n=Q.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(r=Q.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"web-vitals",(i=>{i?On.error("failed to load script",i):e()}))}Tt(){var e=b?b.location.href:void 0;if(e){var n=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,i=n?xi([],Ci,r||[]):[];return Ps(e,i,Os)}On.error("Could not determine current URL")}}var l0=Ke("[Heatmaps]");function Qf(t){return Ze(t)&&"clientX"in t&&"clientY"in t&&rn(t.clientX)&&rn(t.clientY)}class d0{constructor(e){var n;this.Et=!1,this.P=!1,this.It=null,this.instance=e,this.Et=!((n=this.instance.persistence)==null||!n.props[Ru]),this.rageclicks=new Em(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return Ze(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return N(this.instance.config.capture_heatmaps)?N(this.instance.config.enable_heatmaps)?this.Et:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.P)return;l0.info("starting..."),this.Ft(),this.Ct()}else{var e;clearInterval((e=this.It)!==null&&e!==void 0?e:void 0),this.Mt(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[Ru]:n}),this.Et=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Ot(e){this.At(e.originalEvent,"deadclick")}Ct(){this.It&&clearInterval(this.It),this.It=(function(e){return e?.visibilityState==="visible"})(D)?setInterval(this.Dt.bind(this),this.flushIntervalMilliseconds):null}Ft(){b&&D&&(this.jt=this.Dt.bind(this),We(b,"beforeunload",this.jt),this.Lt=e=>this.At(e||b?.event),We(D,"click",this.Lt,{capture:!0}),this.Nt=e=>this.Ut(e||b?.event),We(D,"mousemove",this.Nt,{capture:!0}),this.zt=new Tm(this.instance,UE,this.Ot.bind(this)),this.zt.startIfEnabled(),this.Ht=this.Ct.bind(this),We(D,"visibilitychange",this.Ht),this.P=!0)}Mt(){var e;b&&D&&(this.jt&&b.removeEventListener("beforeunload",this.jt),this.Lt&&D.removeEventListener("click",this.Lt,{capture:!0}),this.Nt&&D.removeEventListener("mousemove",this.Nt,{capture:!0}),this.Ht&&D.removeEventListener("visibilitychange",this.Ht),clearTimeout(this.Bt),(e=this.zt)==null||e.stop(),this.P=!1)}qt(e,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=(function(a,c,u){for(var l=a;l&&qa(l)&&!zn(l,"body");){if(l===u)return!1;if(le(c,b?.getComputedStyle(l).position))return!0;l=gm(l)}return!1})(pm(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:i),y:e.clientY+(o?0:r),target_fixed:o,type:n}}At(e,n){var r;if(n===void 0&&(n="click"),!$f(e.target)&&Qf(e)){var i=this.qt(e,n);(r=this.rageclicks)!=null&&r.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.Wt(B({},i,{type:"rageclick"})),this.Wt(i)}}Ut(e){!$f(e.target)&&Qf(e)&&(clearTimeout(this.Bt),this.Bt=setTimeout((()=>{this.Wt(this.qt(e,"mousemove"))}),500))}Wt(e){if(b){var n=b.location.href,r=this.instance.config.mask_personal_data_properties,i=this.instance.config.custom_personal_data_properties,s=r?xi([],Ci,i||[]):[],o=Ps(n,s,Os);this.N=this.N||{},this.N[o]||(this.N[o]=[]),this.N[o].push(e)}}Dt(){this.N&&!Zr(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class f0{constructor(e){this._instance=e}doPageView(e,n){var r,i=this.Gt(e,n);return this.Vt={pathname:(r=b?.location.pathname)!==null&&r!==void 0?r:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),i}doPageLeave(e){var n;return this.Gt(e,(n=this.Vt)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.Vt)==null?void 0:e.pageViewId}}Gt(e,n){var r=this.Vt;if(!r)return{$pageview_id:n};var i={$pageview_id:n,$prev_pageview_id:r.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:c,maxContentHeight:u,lastContentY:l,maxContentY:d}=s;if(!(N(o)||N(a)||N(c)||N(u)||N(l)||N(d))){o=Math.ceil(o),a=Math.ceil(a),c=Math.ceil(c),u=Math.ceil(u),l=Math.ceil(l),d=Math.ceil(d);var f=o<=1?1:Kt(a/o,0,1,F),p=o<=1?1:Kt(c/o,0,1,F),h=u<=1?1:Kt(l/u,0,1,F),g=u<=1?1:Kt(d/u,0,1,F);i=Be(i,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:c,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:l,$prev_pageview_last_content_percentage:h,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return r.pathname&&(i.$prev_pageview_pathname=r.pathname),r.timestamp&&(i.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),i}}var Mt=Uint8Array,_t=Uint16Array,pi=Uint32Array,ql=new Mt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zl=new Mt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ep=new Mt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Km=function(t,e){for(var n=new _t(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new pi(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Xm=Km(ql,2),p0=Xm[0],Uu=Xm[1];p0[28]=258,Uu[258]=28;for(var tp=Km(zl,0)[1],Zm=new _t(32768),Ae=0;Ae<32768;++Ae){var ur=(43690&Ae)>>>1|(21845&Ae)<<1;ur=(61680&(ur=(52428&ur)>>>2|(13107&ur)<<2))>>>4|(3855&ur)<<4,Zm[Ae]=((65280&ur)>>>8|(255&ur)<<8)>>>1}var cs=function(t,e,n){for(var r=t.length,i=0,s=new _t(e);i<r;++i)++s[t[i]-1];var o,a=new _t(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;for(o=new _t(r),i=0;i<r;++i)o[i]=Zm[a[t[i]-1]++]>>>15-t[i];return o},Rr=new Mt(288);for(Ae=0;Ae<144;++Ae)Rr[Ae]=8;for(Ae=144;Ae<256;++Ae)Rr[Ae]=9;for(Ae=256;Ae<280;++Ae)Rr[Ae]=7;for(Ae=280;Ae<288;++Ae)Rr[Ae]=8;var ca=new Mt(32);for(Ae=0;Ae<32;++Ae)ca[Ae]=5;var h0=cs(Rr,9),g0=cs(ca,5),Qm=function(t){return(t/8>>0)+(7&t&&1)},e_=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof _t?_t:t instanceof pi?pi:Mt)(n-e);return r.set(t.subarray(e,n)),r},ln=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},Gi=function(t,e,n){n<<=7&e;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Nc=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Mt(0),0];if(i==1){var o=new Mt(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(C,A){return C.f-A.f})),n.push({s:-1,f:25001});var a=n[0],c=n[1],u=0,l=1,d=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};l!=i-1;)a=n[n[u].f<n[d].f?u++:d++],c=n[u!=l&&n[u].f<n[d].f?u++:d++],n[l++]={s:-1,f:a.f+c.f,l:a,r:c};var f=s[0].s;for(r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var p=new _t(f+1),h=Bu(n[l-1],p,0);if(h>e){r=0;var g=0,m=h-e,_=1<<m;for(s.sort((function(C,A){return p[A.s]-p[C.s]||C.f-A.f}));r<i;++r){var v=s[r].s;if(!(p[v]>e))break;g+=_-(1<<h-p[v]),p[v]=e}for(g>>>=m;g>0;){var I=s[r].s;p[I]<e?g-=1<<e-p[I]++-1:++r}for(;r>=0&&g;--r){var E=s[r].s;p[E]==e&&(--p[E],++g)}h=e}return[new Mt(p),h]},Bu=function(t,e,n){return t.s==-1?Math.max(Bu(t.l,e,n+1),Bu(t.r,e,n+1)):e[t.s]=n},np=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new _t(++e),r=0,i=t[0],s=1,o=function(c){n[r++]=c},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},Vi=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Hu=function(t,e,n){var r=n.length,i=Qm(e+2);t[i]=255&r,t[i+1]=r>>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<r;++s)t[i+s+4]=n[s];return 8*(i+4+r)},rp=function(t,e,n,r,i,s,o,a,c,u,l){ln(e,l++,n),++i[256];for(var d=Nc(i,15),f=d[0],p=d[1],h=Nc(s,15),g=h[0],m=h[1],_=np(f),v=_[0],I=_[1],E=np(g),C=E[0],A=E[1],S=new _t(19),w=0;w<v.length;++w)S[31&v[w]]++;for(w=0;w<C.length;++w)S[31&C[w]]++;for(var W=Nc(S,7),T=W[0],M=W[1],R=19;R>4&&!T[ep[R-1]];--R);var O,U,Y,ee,se=u+5<<3,k=Vi(i,Rr)+Vi(s,ca)+o,z=Vi(i,f)+Vi(s,g)+o+14+3*R+Vi(S,T)+(2*S[16]+3*S[17]+7*S[18]);if(se<=k&&se<=z)return Hu(e,l,t.subarray(c,c+u));if(ln(e,l,1+(z<k)),l+=2,z<k){O=cs(f,p),U=f,Y=cs(g,m),ee=g;var x=cs(T,M);for(ln(e,l,I-257),ln(e,l+5,A-1),ln(e,l+10,R-4),l+=14,w=0;w<R;++w)ln(e,l+3*w,T[ep[w]]);l+=3*R;for(var V=[v,C],J=0;J<2;++J){var K=V[J];for(w=0;w<K.length;++w){var ce=31&K[w];ln(e,l,x[ce]),l+=T[ce],ce>15&&(ln(e,l,K[w]>>>5&127),l+=K[w]>>>12)}}}else O=h0,U=Rr,Y=g0,ee=ca;for(w=0;w<a;++w)if(r[w]>255){ce=r[w]>>>18&31,Gi(e,l,O[ce+257]),l+=U[ce+257],ce>7&&(ln(e,l,r[w]>>>23&31),l+=ql[ce]);var Me=31&r[w];Gi(e,l,Y[Me]),l+=ee[Me],Me>3&&(Gi(e,l,r[w]>>>5&8191),l+=zl[Me])}else Gi(e,l,O[r[w]]),l+=U[r[w]];return Gi(e,l,O[256]),l+U[256]},m0=new pi([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_0=(function(){for(var t=new pi(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t})(),y0=function(t,e,n,r,i){return(function(s,o,a,c,u,l){var d=s.length,f=new Mt(c+d+5*(1+Math.floor(d/7e3))+u),p=f.subarray(c,f.length-u),h=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var m=g+65535;m<d?h=Hu(p,h,s.subarray(g,m)):(p[g]=l,h=Hu(p,h,s.subarray(g,d)))}else{for(var _=m0[o-1],v=_>>>13,I=8191&_,E=(1<<a)-1,C=new _t(32768),A=new _t(E+1),S=Math.ceil(a/3),w=2*S,W=function(Ue){return(s[Ue]^s[Ue+1]<<S^s[Ue+2]<<w)&E},T=new pi(25e3),M=new _t(288),R=new _t(32),O=0,U=0,Y=(g=0,0),ee=0,se=0;g<d;++g){var k=W(g),z=32767&g,x=A[k];if(C[z]=x,A[k]=z,ee<=g){var V=d-g;if((O>7e3||Y>24576)&&V>423){h=rp(s,p,0,T,M,R,U,Y,se,g-se,h),Y=O=U=0,se=g;for(var J=0;J<286;++J)M[J]=0;for(J=0;J<30;++J)R[J]=0}var K=2,ce=0,Me=I,qe=z-x&32767;if(V>2&&k==W(g-qe))for(var ze=Math.min(v,V)-1,Xe=Math.min(32767,g),ft=Math.min(258,V);qe<=Xe&&--Me&&z!=x;){if(s[g+K]==s[g+K-qe]){for(var Ge=0;Ge<ft&&s[g+Ge]==s[g+Ge-qe];++Ge);if(Ge>K){if(K=Ge,ce=qe,Ge>ze)break;var un=Math.min(qe,Ge-2),j=0;for(J=0;J<un;++J){var St=g-qe+J+32768&32767,ue=St-C[St]+32768&32767;ue>j&&(j=ue,x=St)}}}qe+=(z=x)-(x=C[z])+32768&32767}if(ce){T[Y++]=268435456|Uu[K]<<18|tp[ce];var ye=31&Uu[K],at=31&tp[ce];U+=ql[ye]+zl[at],++M[257+ye],++R[at],ee=g+K,++O}else T[Y++]=s[g],++M[s[g]]}}h=rp(s,p,l,T,M,R,U,Y,se,g-se,h)}return e_(f,0,c+Qm(h)+u)})(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,r,!0)},Lc=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function v0(t,e){e===void 0&&(e={});var n=(function(){var a=4294967295;return{p:function(c){for(var u=a,l=0;l<c.length;++l)u=_0[255&u^c[l]]^u>>>8;a=u},d:function(){return 4294967295^a}}})(),r=t.length;n.p(t);var i,s=y0(t,e,10+((i=e).filename&&i.filename.length+1||0),8),o=s.length;return(function(a,c){var u=c.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=c.level<2?4:c.level==9?2:0,a[9]=3,c.mtime!=0&&Lc(a,4,Math.floor(new Date(c.mtime||Date.now())/1e3)),u){a[3]=8;for(var l=0;l<=u.length;++l)a[l+10]=u.charCodeAt(l)}})(s,e),Lc(s,o-8,n.d()),Lc(s,o-4,r),s}var b0=function(t){var e,n,r,i,s="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var o=t.charCodeAt(i),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),Cn(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=i+1)}return n>e&&(s+=t.substring(e,t.length)),s},S0=!!Eu||!!Su,ip="text/plain",ua=function(t,e,n){var r;n===void 0&&(n=!0);var[i,s]=t.split("?"),o=B({},e),a=(r=s?.split("&").map((u=>{var l,[d,f]=u.split("="),p=n&&(l=o[d])!==null&&l!==void 0?l:f;return delete o[d],d+"="+p})))!==null&&r!==void 0?r:[],c=kE(o);return c&&a.push(c),i+"?"+a.join("&")},is=(t,e)=>JSON.stringify(t,((n,r)=>typeof r=="bigint"?r.toString():r),e),Dc=t=>{var{data:e,compression:n}=t;if(e){if(n===Jt.GZipJS){var r=v0((function(c,u){var l=c.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(c);for(var d=new Mt(c.length+(c.length>>>1)),f=0,p=function(_){d[f++]=_},h=0;h<l;++h){if(f+5>d.length){var g=new Mt(f+8+(l-h<<1));g.set(d),d=g}var m=c.charCodeAt(h);m<128||u?p(m):m<2048?(p(192|m>>>6),p(128|63&m)):m>55295&&m<57344?(p(240|(m=65536+(1047552&m)|1023&c.charCodeAt(++h))>>>18),p(128|m>>>12&63),p(128|m>>>6&63),p(128|63&m)):(p(224|m>>>12),p(128|m>>>6&63),p(128|63&m))}return e_(d,0,f)})(is(e)),{mtime:0}),i=new Blob([r],{type:ip});return{contentType:ip,body:i,estimatedSize:i.size}}if(n===Jt.Base64){var s=(function(c){var u,l,d,f,p,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,m=0,_="",v=[];if(!c)return c;c=b0(c);do u=(p=c.charCodeAt(g++)<<16|c.charCodeAt(g++)<<8|c.charCodeAt(g++))>>18&63,l=p>>12&63,d=p>>6&63,f=63&p,v[m++]=h.charAt(u)+h.charAt(l)+h.charAt(d)+h.charAt(f);while(g<c.length);switch(_=v.join(""),c.length%3){case 1:_=_.slice(0,-2)+"==";break;case 2:_=_.slice(0,-1)+"="}return _})(is(e)),o=(c=>"data="+encodeURIComponent(typeof c=="string"?c:is(c)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=is(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Co=[];Su&&Co.push({transport:"fetch",method:t=>{var e,n,{contentType:r,body:i,estimatedSize:s}=(e=Dc(t))!==null&&e!==void 0?e:{},o=new Headers;xe(t.headers,(function(l,d){o.append(d,l)})),r&&o.append("Content-Type",r);var a=t.url,c=null;if(wf){var u=new wf;c={signal:u.signal,timeout:setTimeout((()=>u.abort()),t.timeout)}}Su(a,B({method:t?.method||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:i,signal:(n=c)==null?void 0:n.signal},t.fetchOptions)).then((l=>l.text().then((d=>{var f={statusCode:l.status,text:d};if(l.status===200)try{f.json=JSON.parse(d)}catch(p){F.error(p)}t.callback==null||t.callback(f)})))).catch((l=>{F.error(l),t.callback==null||t.callback({statusCode:0,text:l})})).finally((()=>c?clearTimeout(c.timeout):null))}}),Eu&&Co.push({transport:"XHR",method:t=>{var e,n=new Eu;n.open(t.method||"GET",t.url,!0);var{contentType:r,body:i}=(e=Dc(t))!==null&&e!==void 0?e:{};xe(t.headers,(function(s,o){n.setRequestHeader(o,s)})),r&&n.setRequestHeader("Content-Type",r),t.timeout&&(n.timeout=t.timeout),t.disableXHRCredentials||(n.withCredentials=!0),n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(i)}}),Rt!=null&&Rt.sendBeacon&&Co.push({transport:"sendBeacon",method:t=>{var e=ua(t.url,{beacon:"1"});try{var n,{contentType:r,body:i}=(n=Dc(t))!==null&&n!==void 0?n:{},s=typeof i=="string"?new Blob([i],{type:r}):i;Rt.sendBeacon(e,s)}catch{}}});var la=function(t,e){if(!(function(n){try{new RegExp(n)}catch{return!1}return!0})(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function sp(t,e,n){return is({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var t_={exact:(t,e)=>e.some((n=>t.some((r=>n===r)))),is_not:(t,e)=>e.every((n=>t.every((r=>n!==r)))),regex:(t,e)=>e.some((n=>t.some((r=>la(n,r))))),not_regex:(t,e)=>e.every((n=>t.every((r=>!la(n,r))))),icontains:(t,e)=>e.map(oo).some((n=>t.map(oo).some((r=>n.includes(r))))),not_icontains:(t,e)=>e.map(oo).every((n=>t.map(oo).every((r=>!n.includes(r)))))},oo=t=>t.toLowerCase();function n_(t,e){return!t||Object.entries(t).every((n=>{var[r,i]=n,s=e?.[r];if(N(s)||Cn(s))return!1;var o=[String(s)],a=t_[i.operator];return!!a&&a(i.values,o)}))}var $c=Ke("[Error tracking]");class E0{constructor(e){var n,r;this.Jt=[],this.Kt=new zS([new eE,new uE,new nE,new tE,new aE,new oE,new iE,new cE],QS("web:javascript",JS,ZS)),this._instance=e,this.Jt=(n=(r=this._instance.persistence)==null?void 0:r.get_property(xu))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,r,i,s=(n=(r=e.errorTracking)==null?void 0:r.suppressionRules)!==null&&n!==void 0?n:[],o=(i=e.errorTracking)==null?void 0:i.captureExtensionExceptions;this.Jt=s,this._instance.persistence&&this._instance.persistence.register({[xu]:this.Jt,[Nf]:o})}get Yt(){var e,n=!!this._instance.get_property(Nf),r=this._instance.config.error_tracking.captureExtensionExceptions;return(e=r??n)!==null&&e!==void 0&&e}buildProperties(e,n){return this.Kt.buildFromUnknown(e,{syntheticException:n?.syntheticException,mechanism:{handled:n?.handled}})}sendExceptionEvent(e){var n=e.$exception_list;if(this.Xt(n)){if(this.Qt(n))return void $c.info("Skipping exception capture because a suppression rule matched");if(!this.Yt&&this.Zt(n))return void $c.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ti(n))return void $c.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}Qt(e){if(e.length===0)return!1;var n=e.reduce(((r,i)=>{var{type:s,value:o}=i;return Ve(s)&&s.length>0&&r.$exception_types.push(s),Ve(o)&&o.length>0&&r.$exception_values.push(o),r}),{$exception_types:[],$exception_values:[]});return this.Jt.some((r=>{var i=r.values.map((s=>{var o,a=t_[s.operator],c=we(s.value)?s.value:[s.value],u=(o=n[s.key])!==null&&o!==void 0?o:[];return c.length>0&&a(c,u)}));return r.type==="OR"?i.some(Boolean):i.every(Boolean)}))}Zt(e){return e.flatMap((n=>{var r,i;return(r=(i=n.stacktrace)==null?void 0:i.frames)!==null&&r!==void 0?r:[]})).some((n=>n.filename&&n.filename.startsWith("chrome-extension://")))}ti(e){if(e.length>0){var n,r,i,s,o=(n=(r=e[0].stacktrace)==null?void 0:r.frames)!==null&&n!==void 0?n:[],a=o[o.length-1];return(i=a==null||(s=a.filename)==null?void 0:s.includes("posthog.com/static"))!==null&&i!==void 0&&i}return!1}Xt(e){return!be(e)&&we(e)}}var $t=Ke("[FeatureFlags]"),Yi=Ke("[FeatureFlags]",{debugEnabled:!0}),Fc="$active_feature_flags",Wr="$override_feature_flags",op="$feature_flag_payloads",Ji="$override_feature_flag_payloads",ap="$feature_flag_request_id",cp="$feature_flag_evaluated_at",up=t=>{var e={};for(var[n,r]of Ro(t||{}))r&&(e[n]=r);return e},w0=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map((n=>{var r;return[n,(r=e[n].variant)!==null&&r!==void 0?r:e[n].enabled]}))),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter((n=>e[n].enabled)).filter((n=>{var r;return(r=e[n].metadata)==null?void 0:r.payload})).map((n=>{var r;return[n,(r=e[n].metadata)==null?void 0:r.payload]})))):$t.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},T0=(function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t})({});class I0{constructor(e){this.ii=!1,this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this._instance=e,this.featureFlagEventHandlers=[]}li(){var e=this._instance.config.evaluation_environments;return e!=null&&e.length?e.filter((n=>{var r=n&&typeof n=="string"&&n.trim().length>0;return r||$t.error("Invalid evaluation environment found:",n,"Expected non-empty string"),r})):[]}ui(){return this.li().length>0}flags(){if(this._instance.config.__preview_remote_config)this.oi=!0;else{var e=!this.hi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.vi({disableFlags:e})}}get hasLoadedFlags(){return this.ei}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Cu),n=this._instance.get_property(Wr),r=this._instance.get_property(Ji);if(!r&&!n)return e||{};var i=Be({},e||{}),s=[...new Set([...Object.keys(r||{}),...Object.keys(n||{})])];for(var o of s){var a,c,u=i[o],l=n?.[o],d=N(l)?(a=u?.enabled)!==null&&a!==void 0&&a:!!l,f=N(l)?u.variant:typeof l=="string"?l:void 0,p=r?.[o],h=B({},u,{enabled:d,variant:d?f??u?.variant:void 0});d!==u?.enabled&&(h.original_enabled=u?.enabled),f!==u?.variant&&(h.original_variant=u?.variant),p&&(h.metadata=B({},u?.metadata,{payload:p,original_payload:u==null||(c=u.metadata)==null?void 0:c.payload})),i[o]=h}return this.ii||($t.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:i}),this.ii=!0),i}getFlagVariants(){var e=this._instance.get_property(Qr),n=this._instance.get_property(Wr);if(!n)return e||{};for(var r=Be({},e),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this.ii||($t.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:r}),this.ii=!0),r}getFlagPayloads(){var e=this._instance.get_property(op),n=this._instance.get_property(Ji);if(!n)return e||{};for(var r=Be({},e||{}),i=Object.keys(n),s=0;s<i.length;s++)r[i[s]]=n[i[s]];return this.ii||($t.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:r}),this.ii=!0),r}reloadFeatureFlags(){this.si||this._instance.config.advanced_disable_feature_flags||this.hi||(this.hi=setTimeout((()=>{this.vi()}),5))}di(){clearTimeout(this.hi),this.hi=void 0}ensureFlagsLoaded(){this.ei||this.ri||this.hi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.si=e}vi(e){var n;if(this.di(),!this._instance.O())if(this.ri)this.ni=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:B({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(ns)||{}),group_properties:this._instance.get_property(pr)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0),this.ui()&&(r.evaluation_environments=this.li());var i=this._instance.config.__preview_remote_config,s=i?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("flags",s+o);i&&(r.timezone=Jm()),this.ri=!0,this._instance.ci({method:"POST",url:a,data:r,compression:this._instance.config.disable_compression?void 0:Jt.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var u,l,d=!0;if(c.statusCode===200&&(this.ni||(this.$anon_distinct_id=void 0),d=!1),this.ri=!1,this.oi||(this.oi=!0,this._instance.fi((l=c.json)!==null&&l!==void 0?l:{})),!r.disable_flags||this.ni)if(this.ai=!d,c.json&&(u=c.json.quotaLimited)!=null&&u.includes(T0.FeatureFlags))$t.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;r.disable_flags||this.receivedFeatureFlags((f=c.json)!==null&&f!==void 0?f:{},d),this.ni&&(this.ni=!1,this.vi())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],i=""+r,s=this._instance.get_property(ap)||void 0,o=this._instance.get_property(cp)||void 0,a=this._instance.get_property(Qo)||{};if((n.send_event||!("send_event"in n))&&(!(e in a)||!a[e].includes(i))){var c,u,l,d,f,p,h,g,m;we(a[e])?a[e].push(i):a[e]=[i],(c=this._instance.persistence)==null||c.register({[Qo]:a});var _=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_evaluated_at:o,$feature_flag_bootstrapped_response:((u=this._instance.config.bootstrap)==null||(u=u.featureFlags)==null?void 0:u[e])||null,$feature_flag_bootstrapped_payload:((l=this._instance.config.bootstrap)==null||(l=l.featureFlagPayloads)==null?void 0:l[e])||null,$used_bootstrap_value:!this.ai};N(_==null||(d=_.metadata)==null?void 0:d.version)||(v.$feature_flag_version=_.metadata.version);var I,E=(f=_==null||(p=_.reason)==null?void 0:p.description)!==null&&f!==void 0?f:_==null||(h=_.reason)==null?void 0:h.code;E&&(v.$feature_flag_reason=E),_!=null&&(g=_.metadata)!=null&&g.id&&(v.$feature_flag_id=_.metadata.id),N(_?.original_variant)&&N(_?.original_enabled)||(v.$feature_flag_original_response=N(_.original_variant)?_.original_enabled:_.original_variant),_!=null&&(m=_.metadata)!=null&&m.original_payload&&(v.$feature_flag_original_payload=_==null||(I=_.metadata)==null?void 0:I.original_payload),this._instance.capture("$feature_flag_called",v)}return r}$t.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var r=this._instance.config.token,i={distinct_id:this._instance.get_distinct_id(),token:r};this.ui()&&(i.evaluation_environments=this.li()),this._instance.ci({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:i,compression:this._instance.config.disable_compression?void 0:Jt.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:s=>{var o,a=(o=s.json)==null?void 0:o.featureFlagPayloads;n(a?.[e]||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,n);return N(r)?void 0:!!r}$t.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((n=>n!==e))}receivedFeatureFlags(e,n){if(this._instance.persistence){this.ei=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,c,u,l){c===void 0&&(c={}),u===void 0&&(u={}),l===void 0&&(l={});var d=w0(o),f=d.flags,p=d.featureFlags,h=d.featureFlagPayloads;if(p){var g=o.requestId,m=o.evaluatedAt;if(we(p)){$t.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var _={};if(p)for(var v=0;v<p.length;v++)_[p[v]]=!0;a&&a.register({[Fc]:p,[Qr]:_})}else{var I=p,E=h,C=f;o.errorsWhileComputingFlags&&(I=B({},c,I),E=B({},u,E),C=B({},l,C)),a&&a.register(B({[Fc]:Object.keys(up(I)),[Qr]:I||{},[op]:E||{},[Cu]:C||{}},g?{[ap]:g}:{},m?{[cp]:m}:{}))}}})(e,this._instance.persistence,r,i,s),this.pi(n)}}override(e,n){n===void 0&&(n=!1),$t.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return $t.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Wr),this._instance.persistence.unregister(Ji),this.pi(),Yi.info("All overrides cleared");if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,r=e;if(this.ii=!!((n=r.suppressWarning)!==null&&n!==void 0&&n),"flags"in r){if(r.flags===!1)this._instance.persistence.unregister(Wr),Yi.info("Flag overrides cleared");else if(r.flags){if(we(r.flags)){for(var i={},s=0;s<r.flags.length;s++)i[r.flags[s]]=!0;this._instance.persistence.register({[Wr]:i})}else this._instance.persistence.register({[Wr]:r.flags});Yi.info("Flag overrides set",{flags:r.flags})}}return"payloads"in r&&(r.payloads===!1?(this._instance.persistence.unregister(Ji),Yi.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[Ji]:r.payloads}),Yi.info("Payload overrides set",{payloads:r.payloads}))),void this.pi()}this.pi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ei){var{flags:n,flagVariants:r}=this.gi();e(n,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n,r){var i,s=(this._instance.get_property(ts)||[]).find((u=>u.flagKey===e)),o={["$feature_enrollment/"+e]:n},a={$feature_flag:e,$feature_enrollment:n,$set:o};s&&(a.$early_access_feature_name=s.name),r&&(a.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(o,!1);var c=B({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Fc]:Object.keys(up(c)),[Qr]:c}),this.pi()}getEarlyAccessFeatures(e,n,r){n===void 0&&(n=!1);var i=this._instance.get_property(ts),s=r?"&"+r.map((o=>"stage="+o)).join("&"):"";if(i&&!n)return e(i);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a,c;if(o.json){var u=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.unregister(ts),(c=this._instance.persistence)==null||c.register({[ts]:u}),e(u)}}})}gi(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter((r=>n[r])),flagVariants:Object.keys(n).filter((r=>n[r])).reduce(((r,i)=>(r[i]=n[i],r)),{})}}pi(e){var{flags:n,flagVariants:r}=this.gi();this.featureFlagEventHandlers.forEach((i=>i(n,r,{errorsLoading:e})))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(ns)||{};this._instance.register({[ns]:B({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(ns)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var r=this._instance.get_property(pr)||{};Object.keys(r).length!==0&&Object.keys(r).forEach((i=>{r[i]=B({},r[i],e[i]),delete e[i]})),this._instance.register({[pr]:B({},r,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(pr)||{};this._instance.register({[pr]:B({},n,{[e]:{}})})}else this._instance.unregister(pr)}reset(){this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this.$anon_distinct_id=void 0,this.di(),this.ii=!1}}var k0=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Uc{constructor(e,n){this.F=e,this.props={},this.mi=!1,this.yi=(r=>{var i="";return r.token&&(i=r.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),r.persistence_name?"ph_"+r.persistence_name:"ph_"+i+"_posthog"})(e),this.Y=this.bi(e),this.load(),e.debug&&F.info("Persistence loaded",e.persistence,B({},this.props)),this.update_config(e,e,n),this.save()}isDisabled(){return!!this.wi}bi(e){k0.indexOf(e.persistence.toLowerCase())===-1&&(F.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&Ne.H()?Ne:n==="localstorage+cookie"&&no.H()?no:n==="sessionstorage"&&tt.H()?tt:n==="memory"?$E:n==="cookie"?Qt:no.H()?no:Qt}properties(){var e={};return xe(this.props,(function(n,r){if(r===Qr&&Ze(n))for(var i=Object.keys(n),s=0;s<i.length;s++)e["$feature/"+i[s]]=n[i[s]];else a=r,c=!1,(Cn(o=gE)?c:Ef&&o.indexOf===Ef?o.indexOf(a)!=-1:(xe(o,(function(u){if(c||(c=u===a))return Xo})),c))||(e[r]=n);var o,a,c})),e}load(){if(!this.wi){var e=this.Y.W(this.yi);e&&(this.props=Be({},e))}}save(){this.wi||this.Y.G(this.yi,this.props,this.xi,this.Si,this.Ei,this.F.debug)}remove(){this.Y.V(this.yi,!1),this.Y.V(this.yi,!0)}clear(){this.remove(),this.props={}}register_once(e,n,r){if(Ze(e)){N(n)&&(n="None"),this.xi=N(r)?this.$i:r;var i=!1;if(xe(e,((s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,i=!0)})),i)return this.save(),!0}return!1}register(e,n){if(Ze(e)){this.xi=N(n)?this.$i:n;var r=!1;if(xe(e,((i,s)=>{e.hasOwnProperty(s)&&this.props[s]!==i&&(this.props[s]=i,r=!0)})),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.mi){var e=jm(this.F.custom_campaign_params,this.F.mask_personal_data_properties,this.F.custom_personal_data_properties);Zr(Dl(e))||this.register(e),this.mi=!0}}update_search_keyword(){var e;this.register((e=D?.referrer)?zm(e):{})}update_referrer_info(){var e;this.register_once({$referrer:Gm(),$referring_domain:D!=null&&D.referrer&&((e=ra(D.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Ou]||this.props[Nu]||this.register_once({[ea]:Vm(this.F.mask_personal_data_properties,this.F.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};xe([Nu,Ou],(o=>{var a=this.props[o];a&&xe(a,(function(c,u){e["$initial_"+wu(u)]=c}))}));var n,r,i=this.props[ea];if(i){var s=(n=Ym(i),r={},xe(n,(function(o,a){r["$initial_"+wu(a)]=o})),r);Be(e,s)}return e}safe_merge(e){return xe(this.props,(function(n,r){r in e||(e[r]=n)})),e}update_config(e,n,r){if(this.$i=this.xi=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.bi(e),s=this.props;this.clear(),this.Y=i,this.props=s,this.save()}}set_disabled(e){this.wi=e,this.wi?this.remove():this.save()}set_cross_subdomain(e){e!==this.Si&&(this.Si=e,this.remove(),this.save())}set_secure(e){e!==this.Ei&&(this.Ei=e,this.remove(),this.save())}set_event_timer(e,n){var r=this.props[es]||{};r[e]=n,this.props[es]=r,this.save()}remove_event_timer(e){var n=(this.props[es]||{})[e];return N(n)||(delete this.props[es][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}var Vr=(function(t){return t.Activation="events",t.Cancellation="cancelEvents",t})({}),R0=(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({}),x0=(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({}),C0=(function(t){return t.Top="top",t.Left="left",t.Right="right",t.Bottom="bottom",t})({}),Ao=(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t.ExternalSurvey="external_survey",t})({}),A0=(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({}),M0=(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({}),P0=(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({}),us=(function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t})({}),Wu=(function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t})({}),Gl=(function(t){return t.Popover="popover",t.Inline="inline",t})({});class Vl{constructor(){this.ki={},this.ki={}}on(e,n){return this.ki[e]||(this.ki[e]=[]),this.ki[e].push(n),()=>{this.ki[e]=this.ki[e].filter((r=>r!==n))}}emit(e,n){for(var r of this.ki[e]||[])r(n);for(var i of this.ki["*"]||[])i(e,n)}}function jr(t,e,n){if(be(t))return!1;switch(n){case"exact":return t===e;case"contains":var r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(r,"i").test(t);case"regex":try{return new RegExp(e).test(t)}catch{return!1}default:return!1}}class O0{constructor(e){this.Pi=new Vl,this.Ti=(n,r)=>this.Ri(n,r)&&this.Ii(n,r)&&this.Fi(n,r)&&this.Ci(n,r),this.Ri=(n,r)=>r==null||!r.event||n?.event===r?.event,this._instance=e,this.Mi=new Set,this.Oi=new Set}init(){var e;if(!N((e=this._instance)==null?void 0:e.Ai)){var n;(n=this._instance)==null||n.Ai(((r,i)=>{this.on(r,i)}))}}register(e){var n,r;if(!N((n=this._instance)==null?void 0:n.Ai)&&(e.forEach((o=>{var a,c;(a=this.Oi)==null||a.add(o),(c=o.steps)==null||c.forEach((u=>{var l;(l=this.Mi)==null||l.add(u?.event||"")}))})),(r=this._instance)!=null&&r.autocapture)){var i,s=new Set;e.forEach((o=>{var a;(a=o.steps)==null||a.forEach((c=>{c!=null&&c.selector&&s.add(c?.selector)}))})),(i=this._instance)==null||i.autocapture.setElementSelectors(s)}}on(e,n){var r;n!=null&&e.length!=0&&(this.Mi.has(e)||this.Mi.has(n?.event))&&this.Oi&&((r=this.Oi)==null?void 0:r.size)>0&&this.Oi.forEach((i=>{this.Di(n,i)&&this.Pi.emit("actionCaptured",i.name)}))}ji(e){this.onAction("actionCaptured",(n=>e(n)))}Di(e,n){if(n?.steps==null)return!1;for(var r of n.steps)if(this.Ti(e,r))return!0;return!1}onAction(e,n){return this.Pi.on(e,n)}Ii(e,n){if(n!=null&&n.url){var r,i=e==null||(r=e.properties)==null?void 0:r.$current_url;if(!i||typeof i!="string"||!jr(i,n.url,n.url_matching||"contains"))return!1}return!0}Fi(e,n){return!!this.Li(e,n)&&!!this.Ni(e,n)&&!!this.Ui(e,n)}Li(e,n){var r;if(n==null||!n.href)return!0;var i=this.zi(e);if(i.length>0)return i.some((a=>jr(a.href,n.href,n.href_matching||"exact")));var s,o=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!o&&jr((s=o.match(/(?::|")href="(.*?)"/))?s[1]:"",n.href,n.href_matching||"exact")}Ni(e,n){var r;if(n==null||!n.text)return!0;var i=this.zi(e);if(i.length>0)return i.some((u=>jr(u.text,n.text,n.text_matching||"exact")||jr(u.$el_text,n.text,n.text_matching||"exact")));var s,o,a,c=(e==null||(r=e.properties)==null?void 0:r.$elements_chain)||"";return!!c&&(s=(function(u){for(var l,d=[],f=/(?::|")text="(.*?)"/g;!be(l=f.exec(u));)d.includes(l[1])||d.push(l[1]);return d})(c),o=n.text,a=n.text_matching||"exact",s.some((u=>jr(u,o,a))))}Ui(e,n){var r,i;if(n==null||!n.selector)return!0;var s=e==null||(r=e.properties)==null?void 0:r.$element_selectors;if(s!=null&&s.includes(n.selector))return!0;var o=(e==null||(i=e.properties)==null?void 0:i.$elements_chain)||"";if(n.selector_regex&&o)try{return new RegExp(n.selector_regex).test(o)}catch{return!1}return!1}zi(e){var n;return(e==null||(n=e.properties)==null?void 0:n.$elements)==null?[]:e?.properties.$elements}Ci(e,n){return n==null||!n.properties||n.properties.length===0||n_(n.properties.reduce(((r,i)=>{var s=we(i.value)?i.value.map(String):i.value!=null?[String(i.value)]:[];return r[i.key]={values:s,operator:i.operator||"exact"},r}),{}),e?.properties)}}var ve=Ke("[Surveys]"),ju="seenSurvey_",N0=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n},lp=t=>{var e=""+ju+t.id;return t.current_iteration&&t.current_iteration>0&&(e=""+ju+t.id+"_"+t.current_iteration),e},L0=[Ao.Popover,Ao.Widget,Ao.API],D0={ignoreConditions:!1,ignoreDelay:!1,displayType:Gl.Popover};class $0{constructor(e){this._instance=e,this.Hi=new Map,this.Bi=new Map,this.qi=new Map}Wi(e,n){return!!e&&n_(e.propertyFilters,n?.properties)}Gi(e,n){var r=new Map;return e.forEach((i=>{var s;(s=i.conditions)==null||(s=s[n])==null||(s=s.values)==null||s.forEach((o=>{if(o!=null&&o.name){var a=r.get(o.name)||[];a.push(i.id),r.set(o.name,a)}}))})),r}Vi(e,n,r){var i,s=(r===Vr.Activation?this.Hi:this.Bi).get(e),o=[];return(i=this._instance)==null||i.getSurveys((a=>{o=a.filter((c=>s?.includes(c.id)))})),o.filter((a=>{var c,u=(c=a.conditions)==null||(c=c[r])==null||(c=c.values)==null?void 0:c.find((l=>l.name===e));return this.Wi(u,n)}))}register(e){var n;N((n=this._instance)==null?void 0:n.Ai)||(this.Ji(e),this.Ki(e))}Ki(e){var n=e.filter((r=>{var i,s;return((i=r.conditions)==null?void 0:i.actions)&&((s=r.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0}));n.length!==0&&(this.Yi==null&&(this.Yi=new O0(this._instance),this.Yi.init(),this.Yi.ji((r=>{this.onAction(r)}))),n.forEach((r=>{var i,s,o,a,c;r.conditions&&(i=r.conditions)!=null&&i.actions&&(s=r.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=r.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.Yi)==null||a.register(r.conditions.actions.values),(c=r.conditions)==null||(c=c.actions)==null||(c=c.values)==null||c.forEach((u=>{if(u&&u.name){var l=this.qi.get(u.name);l&&l.push(r.id),this.qi.set(u.name,l||[r.id])}})))})))}Ji(e){var n,r=e.filter((s=>{var o,a;return((o=s.conditions)==null?void 0:o.events)&&((a=s.conditions)==null||(a=a.events)==null||(a=a.values)==null?void 0:a.length)>0})),i=e.filter((s=>{var o,a;return((o=s.conditions)==null?void 0:o.cancelEvents)&&((a=s.conditions)==null||(a=a.cancelEvents)==null||(a=a.values)==null?void 0:a.length)>0}));(r.length!==0||i.length!==0)&&((n=this._instance)==null||n.Ai(((s,o)=>{this.onEvent(s,o)})),this.Hi=this.Gi(e,Vr.Activation),this.Bi=this.Gi(e,Vr.Cancellation))}onEvent(e,n){var r,i=((r=this._instance)==null||(r=r.persistence)==null?void 0:r.props[to])||[];if(us.SHOWN===e&&n&&i.length>0){var s;ve.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:i});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=i.indexOf(o);a>=0&&(i.splice(a,1),this.Xi(i))}}else{if(this.Bi.has(e)){var c=this.Vi(e,n,Vr.Cancellation);c.length>0&&(ve.info("cancel event matched, cancelling surveys",{event:e,surveysToCancel:c.map((l=>l.id))}),c.forEach((l=>{var d,f=i.indexOf(l.id);f>=0&&i.splice(f,1),(d=this._instance)==null||d.cancelPendingSurvey(l.id)})),this.Xi(i))}if(this.Hi.has(e)){ve.info("survey event name matched",{event:e,eventPayload:n,surveys:this.Hi.get(e)});var u=this.Vi(e,n,Vr.Activation);this.Xi(i.concat(u.map((l=>l.id))||[]))}}}onAction(e){var n,r=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[to])||[];this.qi.has(e)&&this.Xi(r.concat(this.qi.get(e)||[]))}Xi(e){var n;ve.info("updating activated surveys",{activatedSurveys:e}),(n=this._instance)==null||(n=n.persistence)==null||n.register({[to]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[to];return n||[]}getEventToSurveys(){return this.Hi}Qi(){return this.Yi}}class F0{constructor(e){this.Zi=void 0,this._surveyManager=null,this.te=!1,this.ie=!1,this.ee=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var n=e.surveys;if(be(n))return ve.warn("Flags not loaded yet. Not loading surveys.");var r=we(n);this.Zi=r?n.length>0:n,ve.info("flags response received, isSurveysEnabled: "+this.Zi),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);(r!=null&&r.startsWith(ju)||r!=null&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach((i=>localStorage.removeItem(i)))}loadIfEnabled(){if(!this._surveyManager)if(this.ie)ve.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)ve.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())ve.info("Not loading surveys in cookieless mode without consent.");else{var e=Q?.__PosthogExtensions__;if(e){if(!N(this.Zi)||this._instance.config.advanced_enable_surveys){var n=this.Zi||this._instance.config.advanced_enable_surveys;this.ie=!0;try{var r=e.generateSurveys;if(r)return void this.re(r,n);var i=e.loadExternalDependency;if(!i)return void this.se("PostHog loadExternalDependency extension not found.");i(this._instance,"surveys",(s=>{s||!e.generateSurveys?this.se("Could not load surveys script",s):this.re(e.generateSurveys,n)}))}catch(s){throw this.se("Error initializing surveys",s),s}finally{this.ie=!1}}}else ve.error("PostHog Extensions not found.")}}re(e,n){this._surveyManager=e(this._instance,n),this._surveyEventReceiver=new $0(this._instance),ve.info("Surveys loaded successfully"),this.ne({isLoaded:!0})}se(e,n){ve.error(e,n),this.ne({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.ee.push(e),this._surveyManager&&this.ne({isLoaded:!0}),()=>{this.ee=this.ee.filter((n=>n!==e))}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return ve.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(Au);if(r&&!n)return e(r,{isLoaded:!0});if(this.te)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.te=!0,this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:i=>{var s;this.te=!1;var o=i.statusCode;if(o!==200||!i.json){var a="Surveys API could not be loaded, status: "+o;return ve.error(a),e([],{isLoaded:!1,error:a})}var c,u=i.json.surveys||[],l=u.filter((d=>(function(f){return!(!f.start_date||f.end_date)})(d)&&((function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)})(d)||(function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)})(d))));return l.length>0&&((c=this._surveyEventReceiver)==null||c.register(l)),(s=this._instance.persistence)==null||s.register({[Au]:u}),e(u,{isLoaded:!0})}})}catch(i){throw this.te=!1,i}}ne(e){for(var n of this.ee)try{if(!e.isLoaded)return n([],e);this.getSurveys(n)}catch(r){ve.error("Error in survey callback",r)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!be(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,n);ve.warn("init was not called")}oe(e){var n=null;return this.getSurveys((r=>{var i;n=(i=r.find((s=>s.id===e)))!==null&&i!==void 0?i:null})),n}ae(e){if(be(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.oe(e):e;return n?this._surveyManager.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(be(this._surveyManager))return ve.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.ae(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return be(this._surveyManager)?(ve.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise((r=>{this.getSurveys((i=>{var s,o=(s=i.find((c=>c.id===e)))!==null&&s!==void 0?s:null;if(o){var a=this.ae(o);r({visible:a.eligible,disabledReason:a.reason})}else r({visible:!1,disabledReason:"Survey not found"})}),n)}))}renderSurvey(e,n){var r;if(be(this._surveyManager))ve.warn("init was not called");else{var i=typeof e=="string"?this.oe(e):e;if(i!=null&&i.id)if(L0.includes(i.type)){var s=D?.querySelector(n);if(s)return(r=i.appearance)!=null&&r.surveyPopupDelaySeconds?(ve.info("Rendering survey "+i.id+" with delay of "+i.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout((()=>{var o,a;ve.info("Rendering survey "+i.id+" with delay of "+((o=i.appearance)==null?void 0:o.surveyPopupDelaySeconds)+" seconds"),(a=this._surveyManager)==null||a.renderSurvey(i,s),ve.info("Survey "+i.id+" rendered")}),1e3*i.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(i,s);ve.warn("Survey element not found")}else ve.warn("Surveys of type "+i.type+" cannot be rendered in the app");else ve.warn("Survey not found")}}displaySurvey(e,n){var r;if(be(this._surveyManager))ve.warn("init was not called");else{var i=this.oe(e);if(i){var s=i;if((r=i.appearance)!=null&&r.surveyPopupDelaySeconds&&n.ignoreDelay&&(s=B({},i,{appearance:B({},i.appearance,{surveyPopupDelaySeconds:0})})),n.ignoreConditions===!1){var o=this.canRenderSurvey(i);if(!o.visible)return void ve.warn("Survey is not eligible to be displayed: ",o.disabledReason)}n.displayType!==Gl.Inline?this._surveyManager.handlePopoverSurvey(s):this.renderSurvey(s,n.selector)}else ve.warn("Survey not found")}}cancelPendingSurvey(e){be(this._surveyManager)?ve.warn("init was not called"):this._surveyManager.cancelSurvey(e)}}var dp=Ke("[RateLimiter]");class U0{constructor(e){var n,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=i=>{var s=i.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach((o=>{dp.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4}))}catch(o){return void dp.warn('could not rate limit - continuing. Error: "'+o?.message+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=e.config.rate_limiting)==null?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,r,i;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(r=this.instance.persistence)==null?void 0:r.get_property(Pu))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(i=this.instance.persistence)==null||i.set_property(Pu,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}var lr=Ke("[RemoteConfig]");class B0{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Q._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}le(e){var n,r;(n=Q.__PosthogExtensions__)!=null&&n.loadExternalDependency?(r=Q.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,"remote-config",(()=>e(this.remoteConfig))):(lr.error("PostHog Extensions not found. Cannot load remote config."),e())}ue(e){this._instance.ci({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return lr.info("Using preloaded remote config",this.remoteConfig),void this.fi(this.remoteConfig);if(this._instance.O())return void lr.warn("Remote config is disabled. Falling back to local config.");this.le((e=>{if(!e)return lr.info("No config found after loading remote JS config. Falling back to JSON."),void this.ue((n=>{this.fi(n)}));this.fi(e)}))}catch(e){lr.error("Error loading remote config",e)}}fi(e){e?this._instance.config.__preview_remote_config?(this._instance.fi(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):lr.info("__preview_remote_config is disabled. Logging config instead",e):lr.error("Failed to fetch remote config from PostHog.")}}var qu=3e3;class H0{constructor(e,n){this.he=!0,this.ve=[],this.de=Kt(n?.flush_interval_ms||qu,250,5e3,F.createLogger("flush interval"),qu),this.ce=e}enqueue(e){this.ve.push(e),this.fe||this.pe()}unload(){this.ge();var e=this.ve.length>0?this._e():{},n=Object.values(e);[...n.filter((r=>r.url.indexOf("/e")===0)),...n.filter((r=>r.url.indexOf("/e")!==0))].map((r=>{this.ce(B({},r,{transport:"sendBeacon"}))}))}enable(){this.he=!1,this.pe()}pe(){var e=this;this.he||(this.fe=setTimeout((()=>{if(this.ge(),this.ve.length>0){var n=this._e(),r=function(){var s=n[i],o=new Date().getTime();s.data&&we(s.data)&&xe(s.data,(a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp})),e.ce(s)};for(var i in n)r()}}),this.de))}ge(){clearTimeout(this.fe),this.fe=void 0}_e(){var e={};return xe(this.ve,(n=>{var r,i=n,s=(i?i.batchKey:null)||i.url;N(e[s])&&(e[s]=B({},i,{data:[]})),(r=e[s].data)==null||r.push(i.data)})),this.ve=[],e}}var W0=["retriesPerformedSoFar"];class j0{constructor(e){this.me=!1,this.ye=3e3,this.ve=[],this._instance=e,this.ve=[],this.be=!0,!N(b)&&"onLine"in b.navigator&&(this.be=b.navigator.onLine,this.we=()=>{this.be=!0,this.Dt()},this.xe=()=>{this.be=!1},We(b,"online",this.we),We(b,"offline",this.xe))}get length(){return this.ve.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,r=Zg(e,W0);rn(n)&&n>0&&(r.url=ua(r.url,{retry_count:n})),this._instance.ci(B({},r,{callback:i=>{i.statusCode!==200&&(i.statusCode<400||i.statusCode>=500)&&(n??0)<10?this.Se(B({retriesPerformedSoFar:n},r)):r.callback==null||r.callback(i)}}))}Se(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var r=(function(o){var a=3e3*Math.pow(2,o),c=a/2,u=Math.min(18e5,a),l=(Math.random()-.5)*(u-c);return Math.ceil(u+l)})(n),i=Date.now()+r;this.ve.push({retryAt:i,requestOptions:e});var s="Enqueued failed request for retry in "+r;navigator.onLine||(s+=" (Browser is offline)"),F.warn(s),this.me||(this.me=!0,this.Ee())}Ee(){if(this.$e&&clearTimeout(this.$e),this.ve.length===0)return this.me=!1,void(this.$e=void 0);this.$e=setTimeout((()=>{this.be&&this.ve.length>0&&this.Dt(),this.Ee()}),this.ye)}Dt(){var e=Date.now(),n=[],r=this.ve.filter((s=>s.retryAt<e||(n.push(s),!1)));if(this.ve=n,r.length>0)for(var{requestOptions:i}of r)this.retriableRequest(i)}unload(){for(var{requestOptions:e}of(this.$e&&(clearTimeout(this.$e),this.$e=void 0),this.me=!1,N(b)||(this.we&&(b.removeEventListener("online",this.we),this.we=void 0),this.xe&&(b.removeEventListener("offline",this.xe),this.xe=void 0)),this.ve))try{this._instance.ci(B({},e,{transport:"sendBeacon"}))}catch(n){F.error(n)}this.ve=[]}}class q0{constructor(e){this.ke=()=>{var n,r,i,s;this.Pe||(this.Pe={});var o=this.scrollElement(),a=this.scrollY(),c=o?Math.max(0,o.scrollHeight-o.clientHeight):0,u=a+(o?.clientHeight||0),l=o?.scrollHeight||0;this.Pe.lastScrollY=Math.ceil(a),this.Pe.maxScrollY=Math.max(a,(n=this.Pe.maxScrollY)!==null&&n!==void 0?n:0),this.Pe.maxScrollHeight=Math.max(c,(r=this.Pe.maxScrollHeight)!==null&&r!==void 0?r:0),this.Pe.lastContentY=u,this.Pe.maxContentY=Math.max(u,(i=this.Pe.maxContentY)!==null&&i!==void 0?i:0),this.Pe.maxContentHeight=Math.max(l,(s=this.Pe.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Pe}resetContext(){var e=this.Pe;return setTimeout(this.ke,0),e}startMeasuringScrollPosition(){We(b,"scroll",this.ke,{capture:!0}),We(b,"scrollend",this.ke,{capture:!0}),We(b,"resize",this.ke)}scrollElement(){if(!this._instance.config.scroll_root_selector)return b?.document.documentElement;var e=we(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var r=b?.document.querySelector(n);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return b&&(b.scrollY||b.pageYOffset||b.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return b&&(b.scrollX||b.pageXOffset||b.document.documentElement.scrollLeft)||0}}var z0=t=>Vm(t?.config.mask_personal_data_properties,t?.config.custom_personal_data_properties);class fp{constructor(e,n,r,i){this.Te=s=>{var o=this.Re();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.Ie(this._instance)};this.Fe.register({[Mu]:a})}},this._instance=e,this.Ce=n,this.Fe=r,this.Ie=i||z0,this.Ce.onSessionId(this.Te)}Re(){return this.Fe.props[Mu]}getSetOnceProps(){var e,n=(e=this.Re())==null?void 0:e.props;return n?"r"in n?Ym(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return xe(Dl(this.getSetOnceProps()),((n,r)=>{r==="$current_url"&&(r="url"),e["$session_entry_"+wu(r)]=n})),e}}var Bc=Ke("[SessionId]");let pp=class{on(e,n){return this.Me.on(e,n)}constructor(e,n,r){var i;if(this.Oe=[],this.Ae=void 0,this.Me=new Vl,this.De=(l,d)=>Math.abs(l-d)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.cookieless_mode==="always")throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.F=e.config,this.Fe=e.persistence,this.je=void 0,this.Le=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Ne=n||Bn,this.Ue=r||Bn;var s=this.F.persistence_name||this.F.token,o=this.F.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*Kt(o,60,36e3,Bc.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.ze(),this.He="ph_"+s+"_window_id",this.Be="ph_"+s+"_primary_window_exists",this.qe()){var a=tt.W(this.He),c=tt.W(this.Be);a&&!c?this.je=a:tt.V(this.He),tt.G(this.Be,!0)}if((i=this.F.bootstrap)!=null&&i.sessionID)try{var u=(l=>{var d=l.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.F.bootstrap.sessionID);this.We(this.F.bootstrap.sessionID,new Date().getTime(),u)}catch(l){Bc.error("Invalid sessionID in bootstrap",l)}this.Ge()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return N(this.Oe)&&(this.Oe=[]),this.Oe.push(e),this.Le&&e(this.Le,this.je),()=>{this.Oe=this.Oe.filter((n=>n!==e))}}qe(){return this.F.persistence!=="memory"&&!this.Fe.wi&&tt.H()}Ve(e){e!==this.je&&(this.je=e,this.qe()&&tt.G(this.He,e))}Je(){return this.je?this.je:this.qe()?tt.W(this.He):null}We(e,n,r){e===this.Le&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this.Le=e,this.Fe.register({[Zo]:[n,e,r]}))}Ke(){var e=this.Fe.props[Zo];return we(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.We(null,null,null)}destroy(){clearTimeout(this.Ye),this.Ye=void 0,this.Ae&&b&&(b.removeEventListener("beforeunload",this.Ae,{capture:!1}),this.Ae=void 0),this.Oe=[]}Ge(){this.Ae=()=>{this.qe()&&tt.V(this.Be)},We(b,"beforeunload",this.Ae,{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.F.cookieless_mode==="always")throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=n||new Date().getTime(),[i,s,o]=this.Ke(),a=this.Je(),c=rn(o)&&o>0&&Math.abs(r-o)>864e5,u=!1,l=!s,d=!l&&!e&&this.De(r,i);l||d||c?(s=this.Ne(),a=this.Ue(),Bc.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:c}}),o=r,u=!0):a||(a=this.Ue(),u=!0);var f=i===0||!e||c?r:i,p=o===0?new Date().getTime():o;return this.Ve(a),this.We(s,f,p),e||this.ze(),u&&this.Oe.forEach((h=>h(s,a,u?{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:c}:void 0))),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:u?{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:c}:void 0,lastActivityTimestamp:i}}ze(){clearTimeout(this.Ye),this.Ye=setTimeout((()=>{var[e]=this.Ke();if(this.De(new Date().getTime(),e)){var n=this.Le;this.resetSessionId(),this.Me.emit("forcedIdleReset",{idleSessionId:n})}}),1.1*this.sessionTimeoutMs)}};var G0=["$set_once","$set"],Nn=Ke("[SiteApps]");class V0{constructor(e){this._instance=e,this.Xe=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Qe(e,n){if(n){var r=this.globalsForEvent(n);this.Xe.push(r),this.Xe.length>1e3&&(this.Xe=this.Xe.slice(10))}}get siteAppLoaders(){var e;return(e=Q._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ai(this.Qe.bind(this));this.Ze=()=>{e(),this.Xe=[],this.Ze=void 0}}}globalsForEvent(e){var n,r,i,s,o,a,c;if(!e)throw new Error("Event payload is required");var u={},l=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))u[f]={id:l[f],type:f,properties:p};var{$set_once:h,$set:g}=e;return{event:B({},Zg(e,G0),{properties:B({},e.properties,g?{$set:B({},(n=(r=e.properties)==null?void 0:r.$set)!==null&&n!==void 0?n:{},g)}:{},h?{$set_once:B({},(i=(s=e.properties)==null?void 0:s.$set_once)!==null&&i!==void 0?i:{},h)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(c=e.properties)==null?void 0:c.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(e){var n=this.apps[e.id],r=()=>{var a;!n.errored&&this.Xe.length&&(Nn.info("Processing "+this.Xe.length+" events for site app with id "+e.id),this.Xe.forEach((c=>n.processEvent==null?void 0:n.processEvent(c))),n.processedBuffer=!0),Object.values(this.apps).every((c=>c.processedBuffer||c.errored))&&((a=this.Ze)==null||a.call(this))},i=!1,s=a=>{n.errored=!a,n.loaded=!0,Nn.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),i&&r()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),i=!0}catch(a){Nn.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(i&&n.loaded)try{r()}catch(a){Nn.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}tr(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}ir(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{r.processEvent==null||r.processEvent(n)}catch(i){Nn.error("Error while processing event "+e.event+" for site app "+r.id,i)}}}onRemoteConfig(e){var n,r,i,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.tr(),void this._instance.on("eventCaptured",(u=>this.ir(u)))):void Nn.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((r=this.Ze)==null||r.call(this),(i=e.siteApps)!=null&&i.length)if(this.isEnabled){var o=function(u){var l;Q["__$$ph_site_app_"+u]=s._instance,(l=Q.__PosthogExtensions__)==null||l.loadSiteApp==null||l.loadSiteApp(s._instance,c,(d=>{if(d)return Nn.error("Error while initializing PostHog app with config id "+u,d)}))};for(var{id:a,url:c}of e.siteApps)o(a)}else Nn.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var r_=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&kf(n,e))return!0;try{var r=t?.userAgentData;if(r!=null&&r.brands&&r.brands.some((i=>kf(i?.brand,e))))return!0}catch{}return!!t.webdriver},ss=(function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t})({}),hp="i.posthog.com";class Y0{constructor(e){this.er={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+hp,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.er[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.er[this.apiHost]=ss.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.er[this.apiHost]=ss.EU:this.er[this.apiHost]=ss.CUSTOM),this.er[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(e==="flags")return this.flagsApiHost+n;if(this.region===ss.CUSTOM)return this.apiHost+n;var r=hp+n;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var J0={icontains:(t,e)=>!!b&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!b&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!b&&la(e.href,t),not_regex:(t,e)=>!!b&&!la(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};class st{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(r){r===void 0&&(r=!1),n.getWebExperiments((i=>{st.rr("retrieved web experiments from the server"),n.sr=new Map,i.forEach((s=>{if(s.feature_flag_key){var o;n.sr&&(st.rr("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.sr)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);Ve(a)&&s.variants[a]&&n.nr(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var c in s.variants){var u=s.variants[c];st.ar(u)&&n.nr(s.name,c,u.transforms)}}))}),r)},this._instance=e,this._instance.onFeatureFlags((r=>{this.onFeatureFlags(r)}))}onFeatureFlags(e){if(this._is_bot())st.rr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(be(this.sr))return this.sr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();st.rr("applying feature flags",e),e.forEach((n=>{var r;if(this.sr&&(r=this.sr)!=null&&r.has(n)){var i,s=this._instance.getFeatureFlag(n),o=(i=this.sr)==null?void 0:i.get(n);s&&o!=null&&o.variants[s]&&this.nr(o.name,s,o.variants[s].transforms)}}))}}previewWebExperiment(){var e=st.getWindowLocation();if(e!=null&&e.search){var n=ia(e?.search,"__experiment_id"),r=ia(e?.search,"__experiment_variant");n&&r&&(st.rr("previewing web experiments "+n+" && "+r),this.getWebExperiments((i=>{this.lr(parseInt(n),r,i)}),!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var i=this._instance.get_property("$web_experiments");if(i&&!n)return e(i);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}lr(e,n,r){var i=r.filter((s=>s.id===e));i&&i.length>0&&(st.rr("Previewing web experiment ["+i[0].name+"] with variant ["+n+"]"),this.nr(i[0].name,n,i[0].variants[n].transforms))}static ar(e){return!be(e.conditions)&&st.ur(e)&&st.hr(e)}static ur(e){var n;if(be(e.conditions)||be((n=e.conditions)==null?void 0:n.url))return!0;var r,i,s,o=st.getWindowLocation();return!!o&&((r=e.conditions)==null||!r.url||J0[(i=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&i!==void 0?i:"icontains"](e.conditions.url,o))}static getWindowLocation(){return b?.location}static hr(e){var n;if(be(e.conditions)||be((n=e.conditions)==null?void 0:n.utm))return!0;var r=jm();if(r.utm_source){var i,s,o,a,c,u,l,d,f=(i=e.conditions)==null||(i=i.utm)==null||!i.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==r.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==r.utm_source,h=(c=e.conditions)==null||(c=c.utm)==null||!c.utm_medium||((u=e.conditions)==null||(u=u.utm)==null?void 0:u.utm_medium)==r.utm_medium,g=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==r.utm_term;return f&&h&&g&&p}return!1}static rr(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];F.info("[WebExperiments] "+e,r)}nr(e,n,r){this._is_bot()?st.rr("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?r.forEach((i=>{if(i.selector){var s;st.rr("applying transform of variant "+n+" for experiment "+e+" ",i);var o=(s=document)==null?void 0:s.querySelectorAll(i.selector);o?.forEach((a=>{var c=a;i.html&&(c.innerHTML=i.html),i.css&&c.setAttribute("style",i.css)}))}})):st.rr("Control variants leave the page unmodified.")}_is_bot(){return Rt&&this._instance?r_(Rt,this._instance.config.custom_blocked_useragents):void 0}}var K0=Ke("[PostHog ExternalIntegrations]"),X0={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class Z0{constructor(e){this._instance=e}it(e,n){var r;(r=Q.__PosthogExtensions__)==null||r.loadExternalDependency==null||r.loadExternalDependency(this._instance,e,(i=>{if(i)return K0.error("failed to load script",i);n()}))}startIfEnabledOrStop(){var e=this,n=function(o){var a,c,u;!i||(a=Q.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.it(X0[o],(()=>{var l;(l=Q.__PosthogExtensions__)==null||(l=l.integrations)==null||(l=l[o])==null||l.start(e._instance)})),!i&&(c=Q.__PosthogExtensions__)!=null&&(c=c.integrations)!=null&&c[o]&&((u=Q.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.stop())};for(var[r,i]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(r)}}}var zu="[SessionRecording]",Ki=Ke(zu);class gp{get started(){var e;return!((e=this.vr)==null||!e.isStarted)}get status(){return this.vr?this.vr.status:this.dr&&!this.cr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.dr=!1,this.pr=void 0,this._instance=e,!this._instance.sessionManager)throw Ki.error("started without valid sessionManager"),new Error(zu+" started without valid sessionManager. This is a bug.");if(this._instance.config.cookieless_mode==="always")throw new Error(zu+' cannot be used with cookieless_mode="always"')}get cr(){var e,n=!((e=this._instance.get_property(Cc))==null||!e.enabled),r=!this._instance.config.disable_session_recording,i=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return b&&n&&r&&!i}startIfEnabledOrStop(e){var n;if(!this.cr||(n=this.vr)==null||!n.isStarted){var r=!N(Object.assign)&&!N(Array.from);this.cr&&r?(this.gr(e),Ki.info("starting")):this.stopRecording()}}gr(e){var n,r,i;this.cr&&(Q!=null&&(n=Q.__PosthogExtensions__)!=null&&(n=n.rrweb)!=null&&n.record&&(r=Q.__PosthogExtensions__)!=null&&r.initSessionRecording?this._r(e):(i=Q.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,this.mr,(s=>{if(s)return Ki.error("could not load recorder",s);this._r(e)})))}stopRecording(){var e,n;(e=this.pr)==null||e.call(this),this.pr=void 0,(n=this.vr)==null||n.stop()}yr(){var e;(e=this._instance.persistence)==null||e.unregister(cm)}br(e){if(this._instance.persistence){var n,r,i=this._instance.persistence,s=()=>{var o=e.sessionRecording===!1?void 0:e.sessionRecording,a=o?.sampleRate,c=be(a)?null:parseFloat(a);be(c)&&this.yr();var u=o?.minimumDurationMilliseconds;i.register({[Cc]:B({enabled:!!o},o,{networkPayloadCapture:B({capturePerformance:e.capturePerformance},o?.networkPayloadCapture),canvasRecording:{enabled:o?.recordCanvas,fps:o?.canvasFps,quality:o?.canvasQuality},sampleRate:c,minimumDurationMilliseconds:N(u)?null:u,endpoint:o?.endpoint,triggerMatchType:o?.triggerMatchType,masking:o?.masking,urlTriggers:o?.urlTriggers})})};s(),(n=this.pr)==null||n.call(this),this.pr=(r=this._instance.sessionManager)==null?void 0:r.onSessionId(s)}}onRemoteConfig(e){"sessionRecording"in e?e.sessionRecording!==!1?(this.br(e),this.dr=!0,this.startIfEnabledOrStop()):this.dr=!0:Ki.info("skipping remote config with no sessionRecording",e)}log(e,n){var r;n===void 0&&(n="log"),(r=this.vr)!=null&&r.log?this.vr.log(e,n):Ki.warn("log called before recorder was ready")}get mr(){var e,n,r=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.get_property(Cc);return(r==null||(n=r.scriptConfig)==null?void 0:n.script)||"lazy-recorder"}_r(e){var n,r;if((n=Q.__PosthogExtensions__)==null||!n.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.vr||(this.vr=(r=Q.__PosthogExtensions__)==null?void 0:r.initSessionRecording(this._instance),this.vr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.vr.start(e)}onRRwebEmit(e){var n;(n=this.vr)==null||n.onRRwebEmit==null||n.onRRwebEmit(e)}overrideLinkedFlag(){var e,n;this.vr||(n=this._instance.persistence)==null||n.register({$replay_override_linked_flag:!0}),(e=this.vr)==null||e.overrideLinkedFlag()}overrideSampling(){var e,n;this.vr||(n=this._instance.persistence)==null||n.register({$replay_override_sampling:!0}),(e=this.vr)==null||e.overrideSampling()}overrideTrigger(e){var n,r;this.vr||(r=this._instance.persistence)==null||r.register({[e==="url"?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),(n=this.vr)==null||n.overrideTrigger(e)}get sdkDebugProperties(){var e;return((e=this.vr)==null?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,n){var r;return!((r=this.vr)==null||!r.tryAddCustomEvent(e,n))}}var ls={},Gu=()=>{},Yr="posthog",i_=!S0&&ht?.indexOf("MSIE")===-1&&ht?.indexOf("Mozilla")===-1,mp=t=>{var e;return B({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:hE(D?.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Gu,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:t??"unset",__preview_deferred_init_extensions:!1,debug:gt&&Ve(gt?.search)&&gt.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(b==null||(e=b.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var r="Bad HTTP status: "+n.statusCode+" "+n.text;F.error(r)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:qu},error_tracking:{},_onCapture:Gu,__preview_eager_load_replay:!1},(n=>({rageclick:!(n&&n>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(n&&n>="2025-05-24")||"history_change",session_recording:n&&n>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(t))},_p=t=>{var e={};N(t.process_person)||(e.person_profiles=t.process_person),N(t.xhr_headers)||(e.request_headers=t.xhr_headers),N(t.cookie_name)||(e.persistence_name=t.cookie_name),N(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),N(t.store_google)||(e.save_campaign_params=t.store_google),N(t.verbose)||(e.debug=t.verbose);var n=Be({},e,t);return we(t.property_blacklist)&&(N(t.property_denylist)?n.property_denylist=t.property_blacklist:we(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:F.error("Invalid value for property_denylist config: "+t.property_denylist)),n};class Q0{constructor(){this.__forceAllowLocalhost=!1}get wr(){return this.__forceAllowLocalhost}set wr(e){F.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Ns{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new Q0,this.Sr=!1,this.version=pn.LIB_VERSION,this.Er=new Vl,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=mp(),this.SentryIntegration=qE,this.sentryIntegration=e=>(function(n,r){var i=km(n,r);return{name:Im,processEvent:s=>i(s)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.$r=!1,this.kr=null,this.Pr=null,this.Tr=null,this.featureFlags=new I0(this),this.toolbar=new GE(this),this.scrollManager=new q0(this),this.pageViewManager=new f0(this),this.surveys=new F0(this),this.experiments=new st(this),this.exceptions=new E0(this),this.rateLimiter=new U0(this),this.requestRouter=new Y0(this),this.consent=new FE(this),this.externalIntegrations=new Z0(this),this.people={set:(e,n,r)=>{var i=Ve(e)?{[e]:n}:e;this.setPersonProperties(i),r?.({})},set_once:(e,n,r)=>{var i=Ve(e)?{[e]:n}:e;this.setPersonProperties(void 0,i),r?.({})}},this.on("eventCaptured",(e=>F.info('send "'+e?.event+'"',e)))}init(e,n,r){if(r&&r!==Yr){var i,s=(i=ls[r])!==null&&i!==void 0?i:new Ns;return s._init(e,n,r),ls[r]=s,ls[Yr][r]=s,s}return this._init(e,n,r)}_init(e,n,r){var i;if(n===void 0&&(n={}),N(e)||Tu(e))return F.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},n.debug=this.Rr(n.debug),this.Ir=n,this.Fr=[],n.person_profiles&&(this.Pr=n.person_profiles),this.set_config(Be({},mp(n.defaults),_p(n),{name:r,token:e})),this.config.on_xhr_error&&F.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Jt.GZipJS;var s=this.Cr();this.persistence=new Uc(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Uc(B({},this.config,{persistence:"sessionStorage"}),s);var o=B({},this.persistence.props),a=B({},this.sessionPersistence.props);this.register({$initialization_time:new Date().toISOString()}),this.Mr=new H0((v=>this.Or(v)),this.config.request_queue_config),this.Ar=new j0(this),this.__request_queue=[];var c=this.config.cookieless_mode==="always"||this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut();if(c||(this.sessionManager=new pp(this),this.sessionPropsManager=new fp(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(F.info("Deferring extension initialization to improve startup performance"),setTimeout((()=>{this.Dr(c)}),0)):(F.info("Initializing extensions synchronously"),this.Dr(c)),pn.DEBUG=pn.DEBUG||this.config.debug,pn.DEBUG&&F.info("Starting in debug mode",{this:this,config:n,thisC:B({},this.config),p:o,s:a}),((i=n.bootstrap)==null?void 0:i.distinctID)!==void 0){var u,l,d=this.config.get_device_id(Bn()),f=(u=n.bootstrap)!=null&&u.isIdentifiedID?d:n.bootstrap.distinctID;this.persistence.set_property(hn,(l=n.bootstrap)!=null&&l.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:f})}if(this.jr()){var p,h,g=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlags)||{}).filter((v=>{var I;return!((I=n.bootstrap)==null||(I=I.featureFlags)==null||!I[v])})).reduce(((v,I)=>{var E;return v[I]=((E=n.bootstrap)==null||(E=E.featureFlags)==null?void 0:E[I])||!1,v}),{}),m=Object.keys(((h=n.bootstrap)==null?void 0:h.featureFlagPayloads)||{}).filter((v=>g[v])).reduce(((v,I)=>{var E,C;return(E=n.bootstrap)!=null&&(E=E.featureFlagPayloads)!=null&&E[I]&&(v[I]=(C=n.bootstrap)==null||(C=C.featureFlagPayloads)==null?void 0:C[I]),v}),{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:m})}if(c)this.register_once({distinct_id:ji,$device_id:null},"");else if(!this.get_distinct_id()){var _=this.config.get_device_id(Bn());this.register_once({distinct_id:_,$device_id:_},""),this.persistence.set_property(hn,"anonymous")}return We(b,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?jE(this,(()=>this.Lr())):this.Lr(),Wn(this.config._onCapture)&&this.config._onCapture!==Gu&&(F.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(v=>this.config._onCapture(v.event,v)))),this.config.ip&&F.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Dr(e){var n=performance.now();this.historyAutocapture=new WE(this),this.historyAutocapture.startIfEnabled();var r=[];r.push((()=>{new YE(this).startIfEnabledOrStop()})),r.push((()=>{var i;this.siteApps=new V0(this),(i=this.siteApps)==null||i.init()})),e||r.push((()=>{this.sessionRecording=new gp(this),this.sessionRecording.startIfEnabledOrStop()})),this.config.disable_scroll_properties||r.push((()=>{this.scrollManager.startMeasuringScrollPosition()})),r.push((()=>{this.autocapture=new AE(this),this.autocapture.startIfEnabled()})),r.push((()=>{this.surveys.loadIfEnabled()})),r.push((()=>{this.heatmaps=new d0(this),this.heatmaps.startIfEnabled()})),r.push((()=>{this.webVitalsAutocapture=new u0(this)})),r.push((()=>{this.exceptionObserver=new HE(this),this.exceptionObserver.startIfEnabled()})),r.push((()=>{this.deadClicksAutocapture=new Tm(this,BE),this.deadClicksAutocapture.startIfEnabled()})),r.push((()=>{if(this.Nr){var i=this.Nr;this.Nr=void 0,this.fi(i)}})),this.Ur(r,n)}Ur(e,n){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-n>=30&&e.length>0)return void setTimeout((()=>{this.Ur(e,n)}),0);var r=e.shift();if(r)try{r()}catch(s){F.error("Error initializing extension:",s)}}var i=Math.round(performance.now()-n);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:i}),this.config.__preview_deferred_init_extensions&&F.info("PostHog extensions initialized ("+i+"ms)")}fi(e){var n,r,i,s,o,a,c,u;if(!D||!D.body)return F.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this.fi(e)}),500);this.config.__preview_deferred_init_extensions&&(this.Nr=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=le(e.supportedCompression,Jt.GZipJS)?Jt.GZipJS:le(e.supportedCompression,Jt.Base64)?Jt.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Pr?this.Pr:"identified_only"}),(r=this.siteApps)==null||r.onRemoteConfig(e),(i=this.sessionRecording)==null||i.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(c=this.exceptionObserver)==null||c.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(u=this.deadClicksAutocapture)==null||u.onRemoteConfig(e)}Lr(){try{this.config.loaded(this)}catch(e){F.critical("`loaded` function failed",e)}this.zr(),this.config.capture_pageview&&setTimeout((()=>{(this.consent.isOptedIn()||this.config.cookieless_mode==="always")&&this.Hr()}),1),new B0(this).load(),this.featureFlags.flags()}zr(){var e;this.is_capturing()&&this.config.request_batching&&((e=this.Mr)==null||e.enable())}_dom_loaded(){this.is_capturing()&&qn(this.__request_queue,(e=>this.Or(e))),this.__request_queue=[],this.zr()}_handle_unload(){var e,n;this.config.request_batching?(this.Br()&&this.capture("$pageleave"),(e=this.Mr)==null||e.unload(),(n=this.Ar)==null||n.unload()):this.Br()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ci(e){this.__loaded&&(i_?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=ua(e.url,{ip:this.config.ip?1:0}),e.headers=B({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var r,i,s,o=B({},n);o.timeout=o.timeout||6e4,o.url=ua(o.url,{_:new Date().getTime().toString(),ver:pn.LIB_VERSION,compression:o.compression});var a=(r=o.transport)!==null&&r!==void 0?r:"fetch",c=Co.filter((l=>!o.disableTransport||!l.transport||!o.disableTransport.includes(l.transport))),u=(i=(s=sm(c,(l=>l.transport===a)))==null?void 0:s.method)!==null&&i!==void 0?i:c[0].method;if(!u)throw new Error("No available transport method");u(o)})(B({},e,{callback:n=>{var r,i;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((r=(i=this.config).on_request_error)==null||r.call(i,n)),e.callback==null||e.callback(n)}}))))}Or(e){this.Ar?this.Ar.retriableRequest(e):this.ci(e)}_execute_array(e){var n,r=[],i=[],s=[];qn(e,(a=>{a&&(n=a[0],we(n)?s.push(a):Wn(a)?a.call(this):we(a)&&n==="alias"?r.push(a):we(a)&&n.indexOf("capture")!==-1&&Wn(this[n])?s.push(a):i.push(a))}));var o=function(a,c){qn(a,(function(u){if(we(u[0])){var l=c;xe(u,(function(d){l=l[d[0]].apply(l,d.slice(1))}))}else this[u[0]].apply(this,u.slice(1))}),c)};o(r,this),o(i,this),o(s,this)}jr(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Mr){if(this.is_capturing())if(!N(e)&&Ve(e)){var s=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(s&&!this.config.__preview_capture_bot_pageviews)){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){n!=null&&n.$current_url&&!Ve(n?.$current_url)&&(F.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,c=r?.timestamp||a,u=Bn(),l={uuid:u,event:e,properties:this.calculateEventProperties(e,n||{},c,u)};e==="$pageview"&&this.config.__preview_capture_bot_pageviews&&s&&(l.event="$bot_pageview",l.properties.$browser_type="bot"),o&&(l.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r?.$set&&(l.$set=r?.$set);var d,f=this.qr(r?.$set_once);if(f&&(l.$set_once=f),(l=fE(l,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=c,N(r?.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=a),e===us.DISMISSED||e===us.SENT){var p=n?.[Wu.SURVEY_ID],h=n?.[Wu.SURVEY_ITERATION];d={id:p,current_iteration:h},localStorage.getItem(lp(d))||localStorage.setItem(lp(d),"true"),l.$set=B({},l.$set,{[N0({id:p,current_iteration:h},e===us.SENT?"responded":"dismissed")]:!0})}var g=B({},l.properties.$set,l.$set);if(Zr(g)||this.setPersonPropertiesForFlags(g),!be(this.config.before_send)){var m=this.Wr(l);if(!m)return;l=m}this.Er.emit("eventCaptured",l);var _={method:"POST",url:(i=r?._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:r?._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this.Or(_):this.Mr.enqueue(_),l}F.critical("This capture call is ignored due to client rate limiting.")}}else F.error("No event name provided to posthog.capture")}else F.uninitializedWarning("posthog.capture")}Ai(e){return this.on("eventCaptured",(n=>e(n.event,n)))}calculateEventProperties(e,n,r,i,s){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=B({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,(this.config.cookieless_mode=="always"||this.config.cookieless_mode=="on_reject"&&this.consent.isExplicitlyOptedOut())&&(a.$cookieless_mode=!0),e==="$snapshot"){var c=B({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=c.distinct_id,(!Ve(a.distinct_id)&&!rn(a.distinct_id)||Tu(a.distinct_id))&&F.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var u,l=c0(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,r.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&Be(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&Be(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Ar)==null?void 0:p.length}catch(_){a.$sdk_debug_error_capturing_properties=String(_)}if(this.requestRouter.region===ss.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),u=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,i),a=Be(a,u),e==="$pageview"&&D&&(a.title=D.title),!N(o)){var h=r.getTime()-o;a.$duration=parseFloat((h/1e3).toFixed(3))}ht&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=Be({},l,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),we(this.config.property_denylist)?xe(this.config.property_denylist,(function(_){delete a[_]})):F.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(F.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,e));var m=this.Gr();return a.$process_person_profile=m,m&&!s&&this.Vr("_calculate_event_properties"),a}qr(e){var n;if(!this.persistence||!this.Gr()||this.Sr)return e;var r=this.persistence.get_initial_props(),i=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=Be({},r,i||{},e||{}),o=this.config.sanitize_properties;return o&&(F.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.Sr=!0,Zr(s)?void 0:s}register(e,n){var r;(r=this.persistence)==null||r.register(e,n)}register_once(e,n,r){var i;(i=this.persistence)==null||i.register_once(e,n,r)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}Jr(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n,r)}getEarlyAccessFeatures(e,n,r){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,r)}on(e,n){return this.Er.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,r;return(n=(r=this.sessionManager)==null?void 0:r.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}displaySurvey(e,n){n===void 0&&(n=D0),this.surveys.displaySurvey(e,n)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,r){if(!this.__loaded||!this.persistence)return F.uninitializedWarning("posthog.identify");if(rn(e)&&(e=e.toString(),F.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))F.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==ji){if(this.Vr("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==i&&e!==this.get_property(Qi)&&(this.unregister(Qi),this.register({distinct_id:e}));var o=(this.persistence.get_property(hn)||"anonymous")==="anonymous";e!==i&&o?(this.persistence.set_property(hn,"identified"),this.setPersonPropertiesForFlags(B({},r||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.Tr=sp(e,n,r),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),e!==i&&(this.reloadFeatureFlags(),this.unregister(Qo))}}else F.critical('The string "'+ji+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else F.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Vr("posthog.setPersonProperties")){var r=sp(this.get_distinct_id(),e,n);this.Tr!==r?(this.setPersonPropertiesForFlags(B({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Tr=r):F.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,r){if(e&&n){if(this.Vr("posthog.group")){var i=this.getGroups();i[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:B({},i,{[e]:n})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),i[e]===n||r||this.reloadFeatureFlags()}}else F.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Vr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,r,i,s;if(F.info("reset"),!this.__loaded)return F.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(r=this.sessionPersistence)==null||r.clear(),this.surveys.reset(),this.featureFlags.reset(),(i=this.persistence)==null||i.set_property(hn,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Tr=null,this.config.cookieless_mode==="always")this.register_once({distinct_id:ji,$device_id:null},"");else{var a=this.config.get_device_id(Bn());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),i=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&r){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!r)return i;i+="?t="+Math.max(Math.floor((new Date().getTime()-r)/1e3)-o,0)}return i}alias(e,n){return e===this.get_property(om)?(F.critical("Attempting to create alias for existing People user - aborting."),-2):this.Vr("posthog.alias")?(N(n)&&(n=this.get_distinct_id()),e!==n?(this.Jr(Qi,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(F.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n=B({},this.config);if(Ze(e)){var r,i,s,o,a;Be(this.config,_p(e));var c=this.Cr();(r=this.persistence)==null||r.update_config(this.config,n,c),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new Uc(B({},this.config,{persistence:"sessionStorage"}),c);var u=this.Rr(this.config.debug);jn(u)&&(this.config.debug=u),jn(this.config.debug)&&(this.config.debug?(pn.DEBUG=!0,Ne.H()&&Ne.G("ph_debug","true"),F.info("set_config",{config:e,oldConfig:n,newConfig:B({},this.config)})):(pn.DEBUG=!1,Ne.H()&&Ne.V("ph_debug"))),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(s=this.autocapture)==null||s.startIfEnabled(),(o=this.heatmaps)==null||o.startIfEnabled(),this.surveys.loadIfEnabled(),this.Kr(),(a=this.externalIntegrations)==null||a.startIfEnabledOrStop()}}startSessionRecording(e){var n=e===!0,r={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(r).some(Boolean)){var i,s,o,a,c;(i=this.sessionManager)==null||i.checkAndGetSessionAndWindowId(),r.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),r.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),r.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),r.event_trigger&&((c=this.sessionRecording)==null||c.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var r=new Error("PostHog syntheticException"),i=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(B({},i,n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:Yr;return n!==Yr&&(n=Yr+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(hn))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(hn))==="identified"}Gr(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Zr(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[Qi])&&((n=this.persistence)==null||(n=n.props)==null||!n[ta]))}Br(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Gr()||this.Vr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Vr(e){return this.config.person_profiles==="never"?(F.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Jr(ta,!0),!0)}Cr(){if(this.config.cookieless_mode==="always")return!0;var e=this.consent.isOptedOut(),n=this.config.opt_out_persistence_by_default||this.config.cookieless_mode==="on_reject";return this.config.disable_persistence||e&&!!n}Kr(){var e,n,r,i,s=this.Cr();return((e=this.persistence)==null?void 0:e.wi)!==s&&((r=this.persistence)==null||r.set_disabled(s)),((n=this.sessionPersistence)==null?void 0:n.wi)!==s&&((i=this.sessionPersistence)==null||i.set_disabled(s)),s}opt_in_capturing(e){var n;if(this.config.cookieless_mode!=="always"){var r,i;this.config.cookieless_mode==="on_reject"&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),(r=this.sessionManager)==null||r.destroy(),this.sessionManager=new pp(this),this.persistence&&(this.sessionPropsManager=new fp(this,this.sessionManager,this.persistence)),this.sessionRecording=new gp(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Kr(),this.zr(),(n=this.sessionRecording)==null||n.startIfEnabledOrStop(),this.config.cookieless_mode=="on_reject"&&this.surveys.loadIfEnabled(),(N(e?.captureEventName)||e!=null&&e.captureEventName)&&this.capture((i=e?.captureEventName)!==null&&i!==void 0?i:"$opt_in",e?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Hr()}else F.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,n;this.config.cookieless_mode!=="always"?(this.config.cookieless_mode==="on_reject"&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Kr(),this.config.cookieless_mode==="on_reject"&&(this.register({distinct_id:ji,$device_id:null}),(e=this.sessionManager)==null||e.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,(n=this.sessionRecording)==null||n.stopRecording(),this.sessionRecording=void 0,this.Hr())):F.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===gn.GRANTED?"granted":e===gn.DENIED?"denied":"pending"}is_capturing(){return this.config.cookieless_mode==="always"||(this.config.cookieless_mode==="on_reject"?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Kr()}_is_bot(){return Rt?r_(Rt,this.config.custom_blocked_useragents):void 0}Hr(){D&&(D.visibilityState==="visible"?this.$r||(this.$r=!0,this.capture("$pageview",{title:D.title},{send_instantly:!0}),this.kr&&(D.removeEventListener("visibilitychange",this.kr),this.kr=null)):this.kr||(this.kr=this.Hr.bind(this),We(D,"visibilitychange",this.kr)))}debug(e){e===!1?(b?.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(b?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,n,r,i,s,o,a,c=this.Ir||{};return"advanced_disable_flags"in c?!!c.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(F.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",i=!1,s=F,o=(n="advanced_disable_flags")in(e=c)&&!N(e[n]),a=r in e&&!N(e[r]),o?e[n]:a?(s&&s.warn("Config field '"+r+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[r]):i)}Wr(e){if(be(this.config.before_send))return e;var n=we(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var i of n){if(r=i(r),be(r)){var s="Event '"+e.event+"' was rejected in beforeSend function";return US(e.event)?F.warn(s+". This can cause unexpected behavior."):F.info(s),null}r.properties&&!Zr(r.properties)||F.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return(e=this.pageViewManager.Vt)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(r)})}Rr(e){var n=jn(e)&&!e,r=Ne.H()&&Ne.q("ph_debug")==="true";return!n&&(!!r||e)}}(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=dE(t.prototype[e[n]])})(Ns,["identify"]);var yp,vp=(yp=ls[Yr]=new Ns,(function(){function t(){t.done||(t.done=!0,i_=!1,xe(ls,(function(e){e._dom_loaded()})))}D!=null&&D.addEventListener?D.readyState==="complete"?t():We(D,"DOMContentLoaded",t,{capture:!1}):b&&F.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")})(),yp);const T3=Object.freeze(Object.defineProperty({__proto__:null,COPY_AUTOCAPTURE_EVENT:xo,Compression:Jt,DisplaySurveyType:Gl,PostHog:Ns,SurveyEventName:us,SurveyEventProperties:Wu,SurveyEventType:Vr,SurveyPosition:x0,SurveyQuestionBranchingType:M0,SurveyQuestionType:A0,SurveySchedule:P0,SurveyTabPosition:C0,SurveyType:Ao,SurveyWidgetType:R0,default:vp,posthog:vp,severityLevels:IE},Symbol.toStringTag,{value:"Module"})),L=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,G=globalThis,vn="10.29.0";function An(){return Ls(G),G}function Ls(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||vn,e[vn]=e[vn]||{}}function Ai(t,e,n=G){const r=n.__SENTRY__=n.__SENTRY__||{},i=r[vn]=r[vn]||{};return i[t]||(i[t]=e())}const Yl=["debug","info","warn","error","log","assert","trace"],ew="Sentry Logger ",da={};function tr(t){if(!("console"in G))return t();const e=G.console,n={},r=Object.keys(da);r.forEach(i=>{const s=da[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function tw(){Kl().enabled=!0}function nw(){Kl().enabled=!1}function s_(){return Kl().enabled}function rw(...t){Jl("log",...t)}function iw(...t){Jl("warn",...t)}function sw(...t){Jl("error",...t)}function Jl(t,...e){L&&s_()&&tr(()=>{G.console[t](`${ew}[${t}]:`,...e)})}function Kl(){return L?Ai("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const y={enable:tw,disable:nw,isEnabled:s_,log:rw,warn:iw,error:sw},o_=50,sn="?",bp=/\(error: (.*)\)/,Sp=/captureMessage|captureException/;function a_(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const s=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const u=bp.test(c)?c.replace(bp,"$1"):c;if(!u.match(/\S*Error: /)){for(const l of e){const d=l(u);if(d){s.push(d);break}}if(s.length>=o_+i)break}}return aw(s.slice(i))}}function ow(t){return Array.isArray(t)?a_(...t):t}function aw(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(ao(e).function||"")&&e.pop(),e.reverse(),Sp.test(ao(e).function||"")&&(e.pop(),Sp.test(ao(e).function||"")&&e.pop()),e.slice(0,o_).map(n=>({...n,filename:n.filename||ao(e).filename,function:n.function||sn}))}function ao(t){return t[t.length-1]||{}}const Hc="<anonymous>";function Tn(t){try{return!t||typeof t!="function"?Hc:t.name||Hc}catch{return Hc}}function Vu(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function c_(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const Mo={},Ep={};function nr(t,e){Mo[t]=Mo[t]||[],Mo[t].push(e)}function rr(t,e){if(!Ep[t]){Ep[t]=!0;try{e()}catch(n){L&&y.error(`Error while instrumenting ${t}`,n)}}}function Pt(t,e){const n=t&&Mo[t];if(n)for(const r of n)try{r(e)}catch(i){L&&y.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Tn(r)}
Error:`,i)}}let Wc=null;function u_(t){const e="error";nr(e,t),rr(e,cw)}function cw(){Wc=G.onerror,G.onerror=function(t,e,n,r,i){return Pt("error",{column:r,error:i,line:n,msg:t,url:e}),Wc?Wc.apply(this,arguments):!1},G.onerror.__SENTRY_INSTRUMENTED__=!0}let jc=null;function l_(t){const e="unhandledrejection";nr(e,t),rr(e,uw)}function uw(){jc=G.onunhandledrejection,G.onunhandledrejection=function(t){return Pt("unhandledrejection",t),jc?jc.apply(this,arguments):!0},G.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const d_=Object.prototype.toString;function bn(t){switch(d_.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return In(t,Error)}}function Mi(t,e){return d_.call(t)===`[object ${e}]`}function f_(t){return Mi(t,"ErrorEvent")}function wp(t){return Mi(t,"DOMError")}function lw(t){return Mi(t,"DOMException")}function Ht(t){return Mi(t,"String")}function za(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Xn(t){return t===null||za(t)||typeof t!="object"&&typeof t!="function"}function en(t){return Mi(t,"Object")}function Ga(t){return typeof Event<"u"&&In(t,Event)}function dw(t){return typeof Element<"u"&&In(t,Element)}function fw(t){return Mi(t,"RegExp")}function Fr(t){return!!(t?.then&&typeof t.then=="function")}function pw(t){return en(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function In(t,e){try{return t instanceof e}catch{return!1}}function p_(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue||t.__v_isVNode))}function h_(t){return typeof Request<"u"&&In(t,Request)}const Xl=G,hw=80;function vt(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||hw;for(;n&&s++<r&&(u=gw(n,l),!(u==="html"||s>1&&o+i.length*c+u.length>=d));)i.push(u),o+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function gw(t,e){const n=t,r=[];if(!n?.tagName)return"";if(Xl.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=e?.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(i?.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Ht(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Ur(){try{return Xl.document.location.href}catch{return""}}function g_(t){if(!Xl.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function rt(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const i=n(r);typeof i=="function"&&m_(i,r);try{t[e]=i}catch{L&&y.log(`Failed to replace method "${e}" in object`,t)}}function Je(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{L&&y.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function m_(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Je(t,"__sentry_original__",e)}catch{}}function Zl(t){return t.__sentry_original__}function __(t){if(bn(t))return{message:t.message,name:t.name,stack:t.stack,...Ip(t)};if(Ga(t)){const e={type:t.type,target:Tp(t.target),currentTarget:Tp(t.currentTarget),...Ip(t)};return typeof CustomEvent<"u"&&In(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Tp(t){try{return dw(t)?vt(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Ip(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function mw(t){const e=Object.keys(__(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}function Ss(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function qc(t,e){let n=t;const r=n.length;if(r<=150)return n;e>r&&(e=r);let i=Math.max(e-60,0);i<5&&(i=0);let s=Math.min(i+140,r);return s>r-5&&(s=r),s===r&&(i=Math.max(s-140,0)),n=n.slice(i,s),i>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function fa(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{p_(i)?n.push(c_(i)):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Po(t,e,n=!1){return Ht(t)?fw(e)?e.test(t):Ht(e)?n?t===e:t.includes(e):!1:!1}function Wt(t,e=[],n=!1){return e.some(r=>Po(t,r,n))}function _w(){const t=G;return t.crypto||t.msCrypto}let zc;function yw(){return Math.random()*16}function Ye(t=_w()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return zc||(zc="10000000100040008000"+1e11),zc.replace(/[018]/g,e=>(e^(yw()&15)>>e/4).toString(16))}function y_(t){return t.exception?.values?.[0]}function hr(t){const{message:e,event_id:n}=t;if(e)return e;const r=y_(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Yu(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function kn(t,e){const n=y_(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i?.data,...e.data};n.mechanism.data=s}}function vw(t,e,n=5){if(e.lineno===void 0)return;const r=t.length,i=Math.max(Math.min(r-1,e.lineno-1),0);e.pre_context=t.slice(Math.max(0,i-n),i).map(o=>qc(o,0));const s=Math.min(r-1,i);e.context_line=qc(t[s],e.colno||0),e.post_context=t.slice(Math.min(i+1,r),i+1+n).map(o=>qc(o,0))}function kp(t){if(bw(t))return!0;try{Je(t,"__sentry_captured__",!0)}catch{}return!1}function bw(t){try{return t.__sentry_captured__}catch{}}const v_=1e3;function Br(){return Date.now()/v_}function Sw(){const{performance:t}=G;if(!t?.now||!t.timeOrigin)return Br;const e=t.timeOrigin;return()=>(e+t.now())/v_}let Rp;function Ce(){return(Rp??(Rp=Sw()))()}let Gc;function Ew(){const{performance:t}=G;if(!t?.now)return[void 0,"none"];const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,o=t.timing?.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):e,u=c<e;return s||u?i<=c?[t.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function ot(){return Gc||(Gc=Ew()),Gc[0]}function ww(t){const e=Ce(),n={sid:Ye(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Iw(n)};return t&&hi(n,t),n}function hi(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Ce(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ye()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Tw(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),hi(t,n)}function Iw(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function Ds(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Ds(r[i],e[i],n-1));return r}function on(){return Ye()}function Sn(){return Ye().substring(16)}const Ju="_sentrySpan";function an(t,e){e?Je(t,Ju,e):delete t[Ju]}function gi(t){return t[Ju]}const kw=100;class jt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:on(),sampleRand:Math.random()}}clone(){const e=new jt;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,an(e,gi(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&hi(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof jt?n.getScopeData():en(n)?e:void 0,{tags:i,attributes:s,extra:o,user:a,contexts:c,level:u,fingerprint:l=[],propagationContext:d}=r||{};return this._tags={...this._tags,...i},this._attributes={...this._attributes,...s},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),l.length&&(this._fingerprint=l),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,an(this,void 0),this._attachments=[],this.setPropagationContext({traceId:on(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:kw;if(r<=0)return this;const i={timestamp:Br(),...e,message:e.message?Ss(e.message,2048):e.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:gi(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Ds(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n?.event_id||Ye();if(!this._client)return L&&y.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r?.event_id||Ye();if(!this._client)return L&&y.warn("No client configured on scope - will not capture message!"),i;const s=r?.syntheticException??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n?.event_id||Ye();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(L&&y.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Rw(){return Ai("defaultCurrentScope",()=>new jt)}function xw(){return Ai("defaultIsolationScope",()=>new jt)}class Cw{constructor(e,n){let r;e?r=e:r=new jt;let i;n?i=n:i=new jt,this._stack=[{scope:r}],this._isolationScope=i}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(i){throw this._popScope(),i}return Fr(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function mi(){const t=An(),e=Ls(t);return e.stack=e.stack||new Cw(Rw(),xw())}function Aw(t){return mi().withScope(t)}function Mw(t,e){const n=mi();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function xp(t){return mi().withScope(()=>t(mi().getIsolationScope()))}function Pw(){return{withIsolationScope:xp,withScope:Aw,withSetScope:Mw,withSetIsolationScope:(t,e)=>xp(e),getCurrentScope:()=>mi().getScope(),getIsolationScope:()=>mi().getIsolationScope()}}function ir(t){const e=Ls(t);return e.acs?e.acs:Pw()}function ne(){const t=An();return ir(t).getCurrentScope()}function je(){const t=An();return ir(t).getIsolationScope()}function En(){return Ai("globalScope",()=>new jt)}function bt(...t){const e=An(),n=ir(e);if(t.length===2){const[r,i]=t;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(t[0])}function Ow(...t){const e=An(),n=ir(e);if(t.length===2){const[r,i]=t;return r?n.withSetIsolationScope(r,i):n.withIsolationScope(i)}return n.withIsolationScope(t[0])}function $(){return ne().getClient()}function b_(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:i}=e,s={trace_id:n,span_id:i||Sn()};return r&&(s.parent_span_id=r),s}const _e="sentry.source",Va="sentry.sample_rate",S_="sentry.previous_trace_sample_rate",Te="sentry.op",re="sentry.origin",Es="sentry.idle_span_finish_reason",$s="sentry.measurement_unit",Fs="sentry.measurement_value",Ku="sentry.custom_span_name",Ql="sentry.profile_id",Pi="sentry.exclusive_time",Nw="http.request.method",Lw="url.full",Dw="sentry.link.type",$w=0,Ya=1,pe=2;function E_(t){if(t<400&&t>=100)return{code:Ya};if(t>=400&&t<500)switch(t){case 401:return{code:pe,message:"unauthenticated"};case 403:return{code:pe,message:"permission_denied"};case 404:return{code:pe,message:"not_found"};case 409:return{code:pe,message:"already_exists"};case 413:return{code:pe,message:"failed_precondition"};case 429:return{code:pe,message:"resource_exhausted"};case 499:return{code:pe,message:"cancelled"};default:return{code:pe,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:pe,message:"unimplemented"};case 503:return{code:pe,message:"unavailable"};case 504:return{code:pe,message:"deadline_exceeded"};default:return{code:pe,message:"internal_error"}}return{code:pe,message:"internal_error"}}function ws(t,e){t.setAttribute("http.response.status_code",e);const n=E_(e);n.message!=="unknown_error"&&t.setStatus(n)}const w_="_sentryScope",T_="_sentryIsolationScope";function Fw(t){try{const e=G.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function Uw(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function Bw(t,e,n){t&&(Je(t,T_,Fw(n)),Je(t,w_,e))}function pa(t){const e=t;return{scope:e[w_],isolationScope:Uw(e[T_])}}const ed="sentry-",Hw=/^sentry-/,Ww=8192;function td(t){const e=jw(t);if(!e)return;const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(Hw)){const o=i.slice(ed.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function I_(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,i])=>(i&&(n[`${ed}${r}`]=i),n),{});return qw(e)}function jw(t){if(!(!t||!Ht(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Cp(n);return Object.entries(r).forEach(([i,s])=>{e[i]=s}),e},{}):Cp(t)}function Cp(t){return t.split(",").map(e=>{const n=e.indexOf("=");if(n===-1)return[];const r=e.slice(0,n),i=e.slice(n+1);return[r,i].map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})}).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function qw(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>Ww?(L&&y.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const zw=/^o(\d+)\./,Gw=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Vw(t){return t==="http"||t==="https"}function Mn(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function k_(t){const e=Gw.exec(t);if(!e){tr(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s="",o="",a=""]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return R_({host:s,pass:i,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function R_(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Yw(t){if(!L)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(y.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Vw(r)?e&&isNaN(parseInt(e,10))?(y.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(y.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(y.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Jw(t){return t.match(zw)?.[1]}function x_(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=Jw(n)),r}function C_(t){const e=typeof t=="string"?k_(t):R_(t);if(!(!e||!Yw(e)))return e}function xr(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const A_=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Kw(t){if(!t)return;const e=t.match(A_);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function M_(t,e){const n=Kw(t),r=td(e);if(!n?.traceId)return{traceId:on(),sampleRand:Math.random()};const i=Xw(n,r);r&&(r.sample_rand=i.toString());const{traceId:s,parentSpanId:o,parentSampled:a}=n;return{traceId:s,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:i}}function P_(t=on(),e=Sn(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function O_(t=on(),e=Sn(),n){return`00-${t}-${e}-${n?"01":"00"}`}function Xw(t,e){const n=xr(e?.sample_rand);if(n!==void 0)return n;const r=xr(e?.sample_rate);return r&&t?.parentSampled!==void 0?t.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function Zw(t,e){const n=x_(t);return e&&n&&e!==n?(y.log(`Won't continue trace because org IDs don't match (incoming baggage: ${e}, SDK options: ${n})`),!1):(t.getOptions().strictTraceContinuation||!1)&&(e&&!n||!e&&n)?(y.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${e}, Sentry client: ${n})`),!1):!0}const N_=0,nd=1;let Ap=!1;function Qw(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:o,origin:a,links:c}=q(t);return{parent_span_id:s,span_id:e,trace_id:n,data:r,op:i,status:o,origin:a,links:c}}function L_(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),i=r?e:q(t).parent_span_id,s=pa(t).scope,o=r?s?.getPropagationContext().propagationSpanId||Sn():e;return{parent_span_id:i,span_id:o,trace_id:n}}function D_(t){const{traceId:e,spanId:n}=t.spanContext(),r=sr(t);return P_(e,n,r)}function eT(t){const{traceId:e,spanId:n}=t.spanContext(),r=sr(t);return O_(e,n,r)}function $_(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...i},attributes:s})=>({span_id:e,trace_id:n,sampled:r===nd,attributes:s,...i}))}function Sr(t){return typeof t=="number"?Mp(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Mp(t.getTime()):Ce()}function Mp(t){return t>9999999999?t/1e3:t}function q(t){if(nT(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(tT(t)){const{attributes:r,startTime:i,name:s,endTime:o,status:a,links:c}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?t.parentSpanContext?.spanId:void 0;return{span_id:e,trace_id:n,data:r,description:s,parent_span_id:u,start_timestamp:Sr(i),timestamp:Sr(o)||void 0,status:F_(a),op:r[Te],origin:r[re],links:$_(c)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function tT(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function nT(t){return typeof t.getSpanJSON=="function"}function sr(t){const{traceFlags:e}=t.spanContext();return e===nd}function F_(t){if(!(!t||t.code===$w))return t.code===Ya?"ok":t.message||"internal_error"}const Er="_sentryChildSpans",Xu="_sentryRootSpan";function U_(t,e){const n=t[Xu]||t;Je(e,Xu,n),t[Er]?t[Er].add(e):Je(t,Er,new Set([e]))}function rT(t,e){t[Er]&&t[Er].delete(e)}function ds(t){const e=new Set;function n(r){if(!e.has(r)&&sr(r)){e.add(r);const i=r[Er]?Array.from(r[Er]):[];for(const s of i)n(s)}}return n(t),Array.from(e)}function Le(t){return t[Xu]||t}function De(){const t=An(),e=ir(t);return e.getActiveSpan?e.getActiveSpan():gi(ne())}function Zu(){Ap||(tr(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Ap=!0)}function iT(t,e){t.updateName(e),t.setAttributes({[_e]:"custom",[Ku]:e})}let Pp=!1;function B_(){if(Pp)return;function t(){const e=De(),n=e&&Le(e);if(n){const r="internal_error";L&&y.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:pe,message:r})}}t.tag="sentry_tracingErrorCallback",Pp=!0,u_(t),l_(t)}function Ot(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||$()?.getOptions();return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function Op(t){y.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function ha(t,e){if(!e?.length||!t.description)return!1;for(const n of e){if(oT(n)){if(Po(t.description,n))return L&&Op(t),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Po(t.description,n.name):!0,i=n.op?t.op&&Po(t.op,n.op):!0;if(r&&i)return L&&Op(t),!0}return!1}function sT(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const i of t)i.parent_span_id===r&&(i.parent_span_id=n)}function oT(t){return typeof t=="string"||t instanceof RegExp}const Ja="production",H_="_frozenDsc";function Oo(t,e){Je(t,H_,e)}function W_(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},i={environment:n.environment||Ja,release:n.release,public_key:r,trace_id:t,org_id:x_(e)};return e.emit("createDsc",i),i}function rd(t,e){const n=e.getPropagationContext();return n.dsc||W_(n.traceId,t)}function qt(t){const e=$();if(!e)return{};const n=Le(t),r=q(n),i=r.data,s=n.spanContext().traceState,o=s?.get("sentry.sample_rate")??i[Va]??i[S_];function a(h){return(typeof o=="number"||typeof o=="string")&&(h.sample_rate=`${o}`),h}const c=n[H_];if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&td(u);if(l)return a(l);const d=W_(t.spanContext().traceId,e),f=i[_e],p=r.description;return f!=="url"&&p&&(d.transaction=p),Ot()&&(d.sampled=String(sr(n)),d.sample_rand=s?.get("sentry.sample_rand")??pa(n).scope?.getPropagationContext().sampleRand.toString()),a(d),e.emit("createDsc",d,n),d}function aT(t){const e=qt(t);return I_(e)}class Rn{constructor(e={}){this._traceId=e.traceId||on(),this._spanId=e.spanId||Sn()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:N_}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function Tt(t,e=100,n=1/0){try{return Qu("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function j_(t,e=3,n=100*1024){const r=Tt(t,e);return dT(r)>n?j_(t,e-1,n):r}function Qu(t,e,n=1/0,r=1/0,i=fT()){const[s,o]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=cT(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Qu("",p,c-1,r,i)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const f=__(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(d>=r){l[p]="[MaxProperties ~]";break}const h=f[p];l[p]=Qu(p,h,c-1,r,i),d++}return o(e),l}function cT(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(p_(e))return c_(e);if(pw(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${Tn(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=uT(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function uT(t){const e=Object.getPrototypeOf(t);return e?.constructor?e.constructor.name:"null prototype"}function lT(t){return~-encodeURI(t).split(/%..|./).length}function dT(t){return lT(JSON.stringify(t))}function fT(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function Gt(t,e=[]){return[t,e]}function pT(t,e){const[n,r]=t;return[n,[...r,e]]}function Cr(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function Np(t,e){return Cr(t,(n,r)=>e.includes(r))}function ga(t){const e=Ls(G);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function hT(t){const e=Ls(G);return e.decodePolyfill?e.decodePolyfill(t):new TextDecoder().decode(t)}function ma(t){const[e,n]=t;let r=JSON.stringify(e);function i(s){typeof r=="string"?r=typeof s=="string"?r+s:[ga(r),s]:r.push(typeof s=="string"?ga(s):s)}for(const s of n){const[o,a]=s;if(i(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Tt(a))}i(c)}}return typeof r=="string"?r:gT(r)}function gT(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function mT(t){let e=typeof t=="string"?ga(t):t;function n(o){const a=e.subarray(0,o);return e=e.subarray(o+1),a}function r(){let o=e.indexOf(10);return o<0&&(o=e.length),JSON.parse(hT(n(o)))}const i=r(),s=[];for(;e.length;){const o=r(),a=typeof o.length=="number"?o.length:void 0;s.push([o,a?n(a):r()])}return[i,s]}function _T(t){return[{type:"span"},t]}function yT(t){const e=typeof t.data=="string"?ga(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const vT={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Lp(t){return vT[t]}function Ka(t){if(!t?.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function q_(t,e,n,r){const i=t.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:Mn(r)},...i&&{trace:i}}}function bT(t,e){if(!e)return t;const n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...t.sdk?.integrations||[],...e.integrations||[]],packages:[...t.sdk?.packages||[],...e.packages||[]],settings:t.sdk?.settings||e.settings?{...t.sdk?.settings,...e.settings}:void 0},t}function ST(t,e,n,r){const i=Ka(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:Mn(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Gt(s,[o])}function ET(t,e,n,r){const i=Ka(n),s=t.type&&t.type!=="replay_event"?t.type:"event";bT(t,n?.sdk);const o=q_(t,i,r,e);return delete t.sdkProcessingMetadata,Gt(o,[[{type:s},t]])}function wT(t,e){function n(p){return!!p.trace_id&&!!p.public_key}const r=qt(t[0]),i=e?.getDsn(),s=e?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&i&&{dsn:Mn(i)}},{beforeSendSpan:a,ignoreSpans:c}=e?.getOptions()||{},u=c?.length?t.filter(p=>!ha(q(p),c)):t,l=t.length-u.length;l&&e?.recordDroppedEvent("before_send","span",l);const d=a?p=>{const h=q(p),g=a(h);return g||(Zu(),h)}:q,f=[];for(const p of u){const h=d(p);h&&f.push(_T(h))}return Gt(o,f)}function TT(t){if(!L)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=q(t),{spanId:i}=t.spanContext(),s=sr(t),o=Le(t),a=o===t,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${e}`,`ID: ${i}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:l,description:d}=q(o);u.push(`root ID: ${o.spanContext().spanId}`),l&&u.push(`root op: ${l}`),d&&u.push(`root description: ${d}`)}y.log(`${c}
  ${u.join(`
  `)}`)}function IT(t){if(!L)return;const{description:e="< unknown name >",op:n="< unknown op >"}=q(t),{spanId:r}=t.spanContext(),s=Le(t)===t,o=`[Tracing] Finishing "${n}" ${s?"root ":""}span "${e}" with ID ${r}`;y.log(o)}function z_(t,e,n,r=De()){const i=r&&Le(r);i&&(L&&y.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),i.addEvent(t,{[Fs]:e,[$s]:n}))}function Dp(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},i=r[$s],s=r[Fs];typeof i=="string"&&typeof s=="number"&&(e[n.name]={value:s,unit:i})}),e}const $p=1e3;class Xa{constructor(e={}){this._traceId=e.traceId||on(),this._spanId=e.spanId||Sn(),this._startTime=e.startTimestamp||Ce(),this._links=e.links,this._attributes={},this.setAttributes({[re]:"manual",[Te]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?nd:N_}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=Sr(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(_e,"custom"),this}end(e){this._endTime||(this._endTime=Sr(e),IT(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Te],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:F_(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[re],profile_id:this._attributes[Ql],exclusive_time:this._attributes[Pi],measurements:Dp(this._events),is_segment:this._isStandaloneSpan&&Le(this)===this||void 0,segment_id:this._isStandaloneSpan?Le(this).spanContext().spanId:void 0,links:$_(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){L&&y.log("[Tracing] Adding an event to span:",e);const i=Fp(n)?n:r||Ce(),s=Fp(n)?{}:n||{},o={name:e,time:Sr(i),attributes:s};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=$();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Le(this)))return;if(this._isStandaloneSpan){this._sampled?RT(wT([this],e)):(L&&y.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(pa(this).scope||ne()).captureEvent(r)}_convertSpanToTransaction(){if(!Up(q(this)))return;this._name||(L&&y.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=pa(this),r=e?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const s=ds(this).filter(l=>l!==this&&!kT(l)).map(l=>q(l)).filter(Up),o=this._attributes[_e];delete this._attributes[Ku],s.forEach(l=>{delete l.data[Ku]});const a={contexts:{trace:Qw(this)},spans:s.length>$p?s.sort((l,d)=>l.start_timestamp-d.start_timestamp).slice(0,$p):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:qt(this)},request:r,...o&&{transaction_info:{source:o}}},c=Dp(this._events);return c&&Object.keys(c).length&&(L&&y.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Fp(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Up(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function kT(t){return t instanceof Xa&&t.isStandaloneSpan()}function RT(t){const e=$();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function Za(t,e,n=()=>{},r=()=>{}){let i;try{i=t()}catch(s){throw e(s),n(),s}return xT(i,e,n,r)}function xT(t,e,n,r){return Fr(t)?t.then(i=>(n(),r(i),i),i=>{throw e(i),n(),i}):(n(),r(t),t)}function CT(t,e,n){if(!Ot(t))return[!1];let r,i;typeof t.tracesSampler=="function"?(i=t.tracesSampler({...e,inheritOrSampleWith:a=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):a}),r=!0):e.parentSampled!==void 0?i=e.parentSampled:typeof t.tracesSampleRate<"u"&&(i=t.tracesSampleRate,r=!0);const s=xr(i);if(s===void 0)return L&&y.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(i)} of type ${JSON.stringify(typeof i)}.`),[!1];if(!s)return L&&y.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s,r];const o=n<s;return o||L&&y.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[o,s,r]}const _a="__SENTRY_SUPPRESS_TRACING__";function Pn(t,e){const n=Us();if(n.startSpan)return n.startSpan(t,e);const r=sd(t),{forceTransaction:i,parentSpan:s,scope:o}=t,a=o?.clone();return bt(a,()=>Y_(s)(()=>{const u=ne(),l=od(u,s),f=t.onlyIfParent&&!l?new Rn:id({parentSpan:l,spanArguments:r,forceTransaction:i,scope:u});return an(u,f),Za(()=>e(f),()=>{const{status:p}=q(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:pe,message:"internal_error"})},()=>{f.end()})}))}function _n(t,e){const n=Us();if(n.startSpanManual)return n.startSpanManual(t,e);const r=sd(t),{forceTransaction:i,parentSpan:s,scope:o}=t,a=o?.clone();return bt(a,()=>Y_(s)(()=>{const u=ne(),l=od(u,s),f=t.onlyIfParent&&!l?new Rn:id({parentSpan:l,spanArguments:r,forceTransaction:i,scope:u});return an(u,f),Za(()=>e(f,()=>f.end()),()=>{const{status:p}=q(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:pe,message:"internal_error"})})}))}function Nt(t){const e=Us();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=sd(t),{forceTransaction:r,parentSpan:i}=t;return(t.scope?o=>bt(t.scope,o):i!==void 0?o=>Ar(i,o):o=>o())(()=>{const o=ne(),a=od(o,i);return t.onlyIfParent&&!a?new Rn:id({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}const AT=(t,e)=>{const n=An(),r=ir(n);if(r.continueTrace)return r.continueTrace(t,e);const{sentryTrace:i,baggage:s}=t,o=$(),a=td(s);return o&&!Zw(o,a?.org_id)?V_(e):bt(c=>{const u=M_(i,s);return c.setPropagationContext(u),an(c,void 0),e()})};function Ar(t,e){const n=Us();return n.withActiveSpan?n.withActiveSpan(t,e):bt(r=>(an(r,t||void 0),e(r)))}function G_(t){const e=Us();return e.suppressTracing?e.suppressTracing(t):bt(n=>{n.setSDKProcessingMetadata({[_a]:!0});const r=t();return n.setSDKProcessingMetadata({[_a]:void 0}),r})}function V_(t){return bt(e=>(e.setPropagationContext({traceId:on(),sampleRand:Math.random()}),L&&y.log(`Starting a new trace with id ${e.getPropagationContext().traceId}`),Ar(null,t)))}function id({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!Ot()){const o=new Rn;if(n||!t){const a={sampled:"false",sample_rate:"0",transaction:e.name,...qt(o)};Oo(o,a)}return o}const i=je();let s;if(t&&!n)s=MT(t,r,e),U_(t,s);else if(t){const o=qt(t),{traceId:a,spanId:c}=t.spanContext(),u=sr(t);s=Bp({traceId:a,parentSpanId:c,...e},r,u),Oo(s,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...i.getPropagationContext(),...r.getPropagationContext()};s=Bp({traceId:o,parentSpanId:c,...e},r,u),a&&Oo(s,a)}return TT(s),Bw(s,r,i),s}function sd(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=Sr(t.startTime),delete r.startTime,r}return n}function Us(){const t=An();return ir(t)}function Bp(t,e,n){const r=$(),i=r?.getOptions()||{},{name:s=""}=t,o={spanAttributes:{...t.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=e.getPropagationContext(),[l,d,f]=e.getScopeData().sdkProcessingMetadata[_a]?[!1]:CT(i,{name:s,parentSampled:a,attributes:c,parentSampleRate:xr(u.dsc?.sample_rate)},u.sampleRand),p=new Xa({...t,attributes:{[_e]:"custom",[Va]:d!==void 0&&f?d:void 0,...c},sampled:l});return!l&&r&&(L&&y.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function MT(t,e,n){const{spanId:r,traceId:i}=t.spanContext(),s=e.getScopeData().sdkProcessingMetadata[_a]?!1:sr(t),o=s?new Xa({...n,parentSpanId:r,traceId:i,sampled:s}):new Rn({traceId:i});U_(t,o);const a=$();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function od(t,e){if(e)return e;if(e===null)return;const n=gi(t);if(!n)return;const r=$();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Le(n):n}function Y_(t){return t!==void 0?e=>Ar(t,e):e=>e()}const No={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},PT="heartbeatFailed",OT="idleTimeout",NT="finalTimeout",LT="externalFinish";function J_(t,e={}){const n=new Map;let r=!1,i,s=LT,o=!e.disableAutoFinish;const a=[],{idleTimeout:c=No.idleTimeout,finalTimeout:u=No.finalTimeout,childSpanTimeout:l=No.childSpanTimeout,beforeSpanEnd:d,trimIdleSpanEndTimestamp:f=!0}=e,p=$();if(!p||!Ot()){const S=new Rn,w={sample_rate:"0",sampled:"false",...qt(S)};return Oo(S,w),S}const h=ne(),g=De(),m=DT(t);m.end=new Proxy(m.end,{apply(S,w,W){if(d&&d(m),w instanceof Rn)return;const[T,...M]=W,R=T||Ce(),O=Sr(R),U=ds(m).filter(x=>x!==m),Y=q(m);if(!U.length||!f)return A(O),Reflect.apply(S,w,[O,...M]);const ee=p.getOptions().ignoreSpans,se=U?.reduce((x,V)=>{const J=q(V);return!J.timestamp||ee&&ha(J,ee)?x:x?Math.max(x,J.timestamp):J.timestamp},void 0),k=Y.start_timestamp,z=Math.min(k?k+u/1e3:1/0,Math.max(k||-1/0,Math.min(O,se||1/0)));return A(z),Reflect.apply(S,w,[z,...M])}});function _(){i&&(clearTimeout(i),i=void 0)}function v(S){_(),i=setTimeout(()=>{!r&&n.size===0&&o&&(s=OT,m.end(S))},c)}function I(S){i=setTimeout(()=>{!r&&o&&(s=PT,m.end(S))},l)}function E(S){_(),n.set(S,!0);const w=Ce();I(w+l/1e3)}function C(S){if(n.has(S)&&n.delete(S),n.size===0){const w=Ce();v(w+c/1e3)}}function A(S){r=!0,n.clear(),a.forEach(U=>U()),an(h,g);const w=q(m),{start_timestamp:W}=w;if(!W)return;w.data[Es]||m.setAttribute(Es,s);const M=w.status;(!M||M==="unknown")&&m.setStatus({code:Ya}),y.log(`[Tracing] Idle span "${w.op}" finished`);const R=ds(m).filter(U=>U!==m);let O=0;R.forEach(U=>{U.isRecording()&&(U.setStatus({code:pe,message:"cancelled"}),U.end(S),L&&y.log("[Tracing] Cancelling span since span ended early",JSON.stringify(U,void 0,2)));const Y=q(U),{timestamp:ee=0,start_timestamp:se=0}=Y,k=se<=S,z=(u+c)/1e3,x=ee-se<=z;if(L){const V=JSON.stringify(U,void 0,2);k?x||y.log("[Tracing] Discarding span since it finished after idle span final timeout",V):y.log("[Tracing] Discarding span since it happened after idle span was finished",V)}(!x||!k)&&(rT(m,U),O++)}),O>0&&m.setAttribute("sentry.idle_span_discarded_spans",O)}return a.push(p.on("spanStart",S=>{if(r||S===m||q(S).timestamp||S instanceof Xa&&S.isStandaloneSpan())return;ds(m).includes(S)&&E(S.spanContext().spanId)})),a.push(p.on("spanEnd",S=>{r||C(S.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",S=>{S===m&&(o=!0,v(),n.size&&I())})),e.disableAutoFinish||v(),setTimeout(()=>{r||(m.setStatus({code:pe,message:"deadline_exceeded"}),s=NT,m.end())},u),m}function DT(t){const e=Nt(t);return an(ne(),e),L&&y.log("[Tracing] Started span is an idle span"),e}const Vc=0,Hp=1,Wp=2;function Qa(t){return new Ts(e=>{e(t)})}function ad(t){return new Ts((e,n)=>{n(t)})}class Ts{constructor(e){this._state=Vc,this._handlers=[],this._runExecutor(e)}then(e,n){return new Ts((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Ts((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}_executeHandlers(){if(this._state===Vc)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Hp&&n[1](this._value),this._state===Wp&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(s,o)=>{if(this._state===Vc){if(Fr(o)){o.then(r,i);return}this._state=s,this._value=o,this._executeHandlers()}},r=s=>{n(Hp,s)},i=s=>{n(Wp,s)};try{e(r,i)}catch(s){i(s)}}}function $T(t,e,n,r=0){try{const i=el(e,n,t,r);return Fr(i)?i:Qa(i)}catch(i){return ad(i)}}function el(t,e,n,r){const i=n[r];if(!t||!i)return t;const s=i({...t},e);return L&&s===null&&y.log(`Event processor "${i.id||"?"}" dropped event`),Fr(s)?s.then(o=>el(o,e,n,r+1)):el(s,e,n,r+1)}function FT(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s}=e;UT(t,e),r&&WT(t,r),jT(t,n),BT(t,i),HT(t,s)}function _i(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:f,transactionName:p,span:h}=e;co(t,"extra",n),co(t,"tags",r),co(t,"user",i),co(t,"contexts",s),t.sdkProcessingMetadata=Ds(t.sdkProcessingMetadata,a,2),o&&(t.level=o),p&&(t.transactionName=p),h&&(t.span=h),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...f}}function co(t,e,n){t[e]=Ds(t[e],n,1)}function UT(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(i).length&&(t.user={...i,...t.user}),Object.keys(s).length&&(t.contexts={...s,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function BT(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function HT(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function WT(t,e){t.contexts={trace:L_(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:qt(e),...t.sdkProcessingMetadata};const n=Le(e),r=q(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function jT(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}let dr,jp,qp,Ln;function K_(t){const e=G._sentryDebugIds,n=G._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],i=n?Object.keys(n):[];if(Ln&&r.length===jp&&i.length===qp)return Ln;jp=r.length,qp=i.length,Ln={},dr||(dr={});const s=(o,a)=>{for(const c of o){const u=a[c],l=dr?.[c];if(l&&Ln&&u)Ln[l[0]]=u,dr&&(dr[c]=[l[0],u]);else if(u){const d=t(c);for(let f=d.length-1;f>=0;f--){const h=d[f]?.filename;if(h&&Ln&&dr){Ln[h]=u,dr[c]=[h,u];break}}}}};return e&&s(r,e),n&&s(i,n),Ln}function qT(t,e){const n=K_(t);if(!n)return[];const r=[];for(const i of e)i&&n[i]&&r.push({type:"sourcemap",code_file:i,debug_id:n[i]});return r}function X_(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||Ye(),timestamp:e.timestamp||Br()},u=n.integrations||t.integrations.map(m=>m.name);zT(c,t),YT(c,u),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&GT(c,t.stackParser);const l=KT(r,n.captureContext);n.mechanism&&kn(c,n.mechanism);const d=i?i.getEventProcessors():[],f=En().getScopeData();if(s){const m=s.getScopeData();_i(f,m)}if(l){const m=l.getScopeData();_i(f,m)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),FT(c,f);const h=[...d,...f.eventProcessors];return $T(h,c,n).then(m=>(m&&VT(m),typeof o=="number"&&o>0?JT(m,o,a):m))}function zT(t,e){const{environment:n,release:r,dist:i,maxValueLength:s}=e;t.environment=t.environment||n||Ja,!t.release&&r&&(t.release=r),!t.dist&&i&&(t.dist=i);const o=t.request;o?.url&&s&&(o.url=Ss(o.url,s)),s&&t.exception?.values?.forEach(a=>{a.value&&(a.value=Ss(a.value,s))})}function GT(t,e){const n=K_(e);t.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(i=>{i.filename&&(i.debug_id=n[i.filename])})})}function VT(t){const e={};if(t.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([r,i])=>{n.push({type:"sourcemap",code_file:r,debug_id:i})})}function YT(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function JT(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:Tt(i.data,e,n)}}))},...t.user&&{user:Tt(t.user,e,n)},...t.contexts&&{contexts:Tt(t.contexts,e,n)},...t.extra&&{extra:Tt(t.extra,e,n)}};return t.contexts?.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Tt(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>({...i,...i.data&&{data:Tt(i.data,e,n)}}))),t.contexts?.flags&&r.contexts&&(r.contexts.flags=Tt(t.contexts.flags,3,n)),r}function KT(t,e){if(!e)return t;const n=t?t.clone():new jt;return n.update(e),n}function XT(t){if(t)return ZT(t)?{captureContext:t}:eI(t)?{captureContext:t}:t}function ZT(t){return t instanceof jt||typeof t=="function"}const QT=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function eI(t){return Object.keys(t).some(e=>QT.includes(e))}function Pe(t,e){return ne().captureException(t,XT(e))}function Z_(t,e){const n=typeof e=="string"?e:void 0,r=typeof e!="string"?{captureContext:e}:void 0;return ne().captureMessage(t,n,r)}function Oi(t,e){return ne().captureEvent(t,e)}function cd(t,e){je().setContext(t,e)}function tI(t){je().setExtras(t)}function nI(t,e){je().setExtra(t,e)}function rI(t){je().setTags(t)}function iI(t,e){je().setTag(t,e)}function sI(t){je().setUser(t)}function Q_(){return je().lastEventId()}async function oI(t){const e=$();return e?e.flush(t):(L&&y.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function aI(t){const e=$();return e?e.close(t):(L&&y.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function cI(){return!!$()}function ey(){const t=$();return t?.getOptions().enabled!==!1&&!!t?.getTransport()}function ty(t){je().addEventProcessor(t)}function tl(t){const e=je(),n=ne(),{userAgent:r}=G.navigator||{},i=ww({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),s=e.getSession();return s?.status==="ok"&&hi(s,{status:"exited"}),ud(),e.setSession(i),i}function ud(){const t=je(),n=ne().getSession()||t.getSession();n&&Tw(n),ny(),t.setSession()}function ny(){const t=je(),e=$(),n=t.getSession();n&&e&&e.captureSession(n)}function nl(t=!1){if(t){ud();return}ny()}const uI="7";function ry(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function lI(t){return`${ry(t)}${t.projectId}/envelope/`}function dI(t,e){const n={sentry_version:uI};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function iy(t,e,n){return e||`${lI(t)}?${dI(t,n)}`}function fI(t,e){const n=C_(t);if(!n)return"";const r=`${ry(n)}embed/error-page/`;let i=`dsn=${Mn(n)}`;for(const s in e)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const o=e.user;if(!o)continue;o.name&&(i+=`&name=${encodeURIComponent(o.name)}`),o.email&&(i+=`&email=${encodeURIComponent(o.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`;return`${r}?${i}`}const zp=[];function pI(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function hI(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(i=>{i.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const i=n(e);r=Array.isArray(i)?i:[i]}else r=e;return pI(r)}function gI(t,e){const n={};return e.forEach(r=>{r&&sy(t,r,n)}),n}function Gp(t,e){for(const n of e)n?.afterAllSetup&&n.afterAllSetup(t)}function sy(t,e,n){if(n[e.name]){L&&y.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,!zp.includes(e.name)&&typeof e.setupOnce=="function"&&(e.setupOnce(),zp.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(i)}L&&y.log(`Integration installed: ${e.name}`)}function rl(t){const e=$();if(!e){L&&y.warn(`Cannot add integration "${t.name}" because no SDK Client is available.`);return}e.addIntegration(t)}function oy(t,e){return e?bt(e,()=>{const n=De(),r=n?L_(n):b_(e);return[n?qt(n):rd(t,e),r]}):[void 0,void 0]}const mI={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function _I(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function yI(t,e,n,r){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=Mn(r)),Gt(i,[_I(t)])}const vI=100;function bI(t){switch(typeof t){case"number":return Number.isInteger(t)?{value:t,type:"integer"}:{value:t,type:"double"};case"boolean":return{value:t,type:"boolean"};case"string":return{value:t,type:"string"};default:{let e="";try{e=JSON.stringify(t)??""}catch{}return{value:e,type:"string"}}}}function Yt(t,e,n,r=!0){n&&(!t[e]||r)&&(t[e]=n)}function SI(t,e){const n=dd(),r=ay(t);r===void 0?n.set(t,[e]):r.length>=vI?(ld(t,r),n.set(t,[e])):n.set(t,[...r,e])}function ya(t,e=ne(),n=SI){const r=e?.getClient()??$();if(!r){L&&y.warn("No client available to capture log.");return}const{release:i,environment:s,enableLogs:o=!1,beforeSendLog:a}=r.getOptions();if(!o){L&&y.warn("logging option not enabled, log will not be captured.");return}const[,c]=oy(r,e),u={...t.attributes},{user:{id:l,email:d,username:f}}=EI(e);Yt(u,"user.id",l,!1),Yt(u,"user.email",d,!1),Yt(u,"user.name",f,!1),Yt(u,"sentry.release",i),Yt(u,"sentry.environment",s);const{name:p,version:h}=r.getSdkMetadata()?.sdk??{};Yt(u,"sentry.sdk.name",p),Yt(u,"sentry.sdk.version",h);const g=r.getIntegrationByName("Replay"),m=g?.getReplayId(!0);Yt(u,"sentry.replay_id",m),m&&g?.getRecordingMode()==="buffer"&&Yt(u,"sentry._internal.replay_is_buffering",!0);const _=t.message;if(za(_)){const{__sentry_template_string__:T,__sentry_template_values__:M=[]}=_;M?.length&&(u["sentry.message.template"]=T),M.forEach((R,O)=>{u[`sentry.message.parameter.${O}`]=R})}const v=gi(e);Yt(u,"sentry.trace.parent_span_id",v?.spanContext().spanId);const I={...t,attributes:u};r.emit("beforeCaptureLog",I);const E=a?tr(()=>a(I)):I;if(!E){r.recordDroppedEvent("before_send","log_item",1),L&&y.warn("beforeSendLog returned null, log will not be captured.");return}const{level:C,message:A,attributes:S={},severityNumber:w}=E,W={timestamp:Ce(),level:C,body:A,trace_id:c?.trace_id,severity_number:w??mI[C],attributes:Object.keys(S).reduce((T,M)=>(T[M]=bI(S[M]),T),{})};n(r,W),r.emit("afterCaptureLog",E)}function ld(t,e){const n=e??ay(t)??[];if(n.length===0)return;const r=t.getOptions(),i=yI(n,r._metadata,r.tunnel,t.getDsn());dd().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function ay(t){return dd().get(t)}function EI(t){const e=En().getScopeData();return _i(e,je().getScopeData()),_i(e,t.getScopeData()),e}function dd(){return Ai("clientToLogBufferMap",()=>new WeakMap)}function wI(t){return[{type:"trace_metric",item_count:t.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:t}]}function TI(t,e,n,r){const i={};return e?.sdk&&(i.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(i.dsn=Mn(r)),Gt(i,[wI(t)])}const II=1e3;function kI(t){switch(typeof t){case"number":return Number.isInteger(t)?{value:t,type:"integer"}:{value:t,type:"double"};case"boolean":return{value:t,type:"boolean"};case"string":return{value:t,type:"string"};default:{let e="";try{e=JSON.stringify(t)??""}catch{}return{value:e,type:"string"}}}}function dn(t,e,n,r=!0){n&&(r||!(e in t))&&(t[e]=n)}function RI(t,e){const n=pd(),r=cy(t);r===void 0?n.set(t,[e]):r.length>=II?(fd(t,r),n.set(t,[e])):n.set(t,[...r,e])}function xI(t,e,n){const{release:r,environment:i}=e.getOptions(),s={...t.attributes},{user:{id:o,email:a,username:c}}=MI(n);dn(s,"user.id",o,!1),dn(s,"user.email",a,!1),dn(s,"user.name",c,!1),dn(s,"sentry.release",r),dn(s,"sentry.environment",i);const{name:u,version:l}=e.getSdkMetadata()?.sdk??{};dn(s,"sentry.sdk.name",u),dn(s,"sentry.sdk.version",l);const d=e.getIntegrationByName("Replay"),f=d?.getReplayId(!0);return dn(s,"sentry.replay_id",f),f&&d?.getRecordingMode()==="buffer"&&dn(s,"sentry._internal.replay_is_buffering",!0),{...t,attributes:s}}function CI(t,e,n){const r={};for(const c in t.attributes)t.attributes[c]!==void 0&&(r[c]=kI(t.attributes[c]));const[,i]=oy(e,n),s=gi(n),o=s?s.spanContext().traceId:i?.trace_id,a=s?s.spanContext().spanId:void 0;return{timestamp:Ce(),trace_id:o??"",span_id:a,name:t.name,type:t.type,unit:t.unit,value:t.value,attributes:r}}function AI(t,e){const n=e?.scope??ne(),r=e?.captureSerializedMetric??RI,i=n?.getClient()??$();if(!i){L&&y.warn("No client available to capture metric.");return}const{_experiments:s,enableMetrics:o,beforeSendMetric:a}=i.getOptions();if(!(o??s?.enableMetrics??!0)){L&&y.warn("metrics option not enabled, metric will not be captured.");return}const u=xI(t,i,n);i.emit("processMetric",u);const l=a||s?.beforeSendMetric,d=l?l(u):u;if(!d){L&&y.log("`beforeSendMetric` returned `null`, will not send metric.");return}const f=CI(d,i,n);L&&y.log("[Metric]",f),r(i,f),i.emit("afterCaptureMetric",d)}function fd(t,e){const n=e??cy(t)??[];if(n.length===0)return;const r=t.getOptions(),i=TI(n,r._metadata,r.tunnel,t.getDsn());pd().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(i)}function cy(t){return pd().get(t)}function MI(t){const e=En().getScopeData();return _i(e,je().getScopeData()),_i(e,t.getScopeData()),e}function pd(){return Ai("clientToMetricBufferMap",()=>new WeakMap)}const hd=Symbol.for("SentryBufferFullError");function gd(t=100){const e=new Set;function n(){return e.size<t}function r(o){e.delete(o)}function i(o){if(!n())return ad(hd);const a=o();return e.add(a),a.then(()=>r(a),()=>r(a)),a}function s(o){if(!e.size)return Qa(!0);const a=Promise.allSettled(Array.from(e)).then(()=>!0);if(!o)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),o))];return Promise.race(c)}return{get $(){return Array.from(e)},add:i,drain:s}}const PI=60*1e3;function uy(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?PI:r-e}function OI(t,e){return t[e]||t.all||0}function ly(t,e,n=Date.now()){return OI(t,e)>n}function dy(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,u,,,l]=a.split(":",5),d=parseInt(c,10),f=(isNaN(d)?60:d)*1e3;if(!u)i.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(i[p]=r+f):i[p]=r+f}else o?i.all=r+uy(o,r):e===429&&(i.all=r+60*1e3);return i}const fy=64;function py(t,e,n=gd(t.bufferSize||fy)){let r={};const i=o=>n.drain(o);function s(o){const a=[];if(Cr(o,(d,f)=>{const p=Lp(f);ly(r,p)?t.recordDroppedEvent("ratelimit_backoff",p):a.push(d)}),a.length===0)return Promise.resolve({});const c=Gt(o[0],a),u=d=>{Cr(c,(f,p)=>{t.recordDroppedEvent(d,Lp(p))})},l=()=>e({body:ma(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&L&&y.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=dy(r,d),d),d=>{throw u("network_error"),L&&y.error("Encountered error running transport request:",d),d});return n.add(l).then(d=>d,d=>{if(d===hd)return L&&y.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw d})}return{send:s,flush:i}}function NI(t,e,n){const r=[{type:"client_report"},{timestamp:Br(),discarded_events:t}];return Gt(e?{dsn:e}:{},[r])}function hy(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n?.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function LI(t){const{trace_id:e,parent_span_id:n,span_id:r,status:i,origin:s,data:o,op:a}=t.contexts?.trace??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:i,timestamp:t.timestamp,trace_id:e??"",origin:s,profile_id:o?.[Ql],exclusive_time:o?.[Pi],measurements:t.measurements,is_segment:!0}}function DI(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[Ql]:t.profile_id},...t.exclusive_time&&{[Pi]:t.exclusive_time}}}},measurements:t.measurements}}const Vp="Not capturing exception because it's already been captured.",Yp="Discarded session because of missing or non-string release",gy=Symbol.for("SentryInternalError"),my=Symbol.for("SentryDoNotSendEventError"),$I=5e3;function Lo(t){return{message:t,[gy]:!0}}function Yc(t){return{message:t,[my]:!0}}function Jp(t){return!!t&&typeof t=="object"&&gy in t}function Kp(t){return!!t&&typeof t=="object"&&my in t}function Xp(t,e,n,r,i){let s=0,o,a=!1;t.on(n,()=>{s=0,clearTimeout(o),a=!1}),t.on(e,c=>{s+=r(c),s>=8e5?i(t):a||(a=!0,o=setTimeout(()=>{i(t)},$I))}),t.on("flush",()=>{i(t)})}class FI{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=gd(e.transportOptions?.bufferSize??fy),e.dsn?this._dsn=C_(e.dsn):L&&y.warn("No DSN provided, client will not send events."),this._dsn){const r=iy(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Xp(this,"afterCaptureLog","flushLogs",WI,ld),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Xp(this,"afterCaptureMetric","flushMetrics",HI,fd)}captureException(e,n,r){const i=Ye();if(kp(e))return L&&y.log(Vp),i;const s={event_id:i,...n};return this._process(()=>this.eventFromException(e,s).then(o=>this._captureEvent(o,s,r)).then(o=>o),"error"),s.event_id}captureMessage(e,n,r,i){const s={event_id:Ye(),...r},o=za(e)?e:String(e),a=Xn(e),c=a?this.eventFromMessage(o,n,s):this.eventFromException(e,s);return this._process(()=>c.then(u=>this._captureEvent(u,s,i)),a?"unknown":"error"),s.event_id}captureEvent(e,n,r){const i=Ye();if(n?.originalException&&kp(n.originalException))return L&&y.log(Vp),i;const s={event_id:i,...n},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope,u=Zp(e.type);return this._process(()=>this._captureEvent(e,s,a||r,c),u),s.event_id}captureSession(e){this.sendSession(e),hi(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(e),i=await n.flush(e);return r&&i}async close(e){const n=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];sy(this,e,this._integrations),n||Gp(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=ET(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=pT(r,yT(i));this.sendEnvelope(r).then(i=>this.emit("afterSendEvent",e,i))}sendSession(e){const{release:n,environment:r=Ja}=this._options;if("aggregates"in e){const s=e.attrs||{};if(!s.release&&!n){L&&y.warn(Yp);return}s.release=s.release||n,s.environment=s.environment||r,e.attrs=s}else{if(!e.release&&!n){L&&y.warn(Yp);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const i=ST(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const i=`${e}:${n}`;L&&y.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||new Set,i=(...s)=>n(...s);return r.add(i),()=>{r.delete(i)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(i=>i(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(n){return L&&y.error("Error while sending envelope:",n),{}}return L&&y.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=gI(this,e),Gp(this,e)}_updateSessionFromEvent(e,n){let r=n.level==="fatal",i=!1;const s=n.exception?.values;if(s){i=!0,r=!1;for(const c of s)if(c.mechanism?.handled===!1){r=!0;break}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(hi(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}async _isClientDoneProcessing(e){let n=0;for(;!e||n<e;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||i.setLastEventId(e.event_id||n.event_id),X_(s,e,n,r,this,i).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:b_(r),...a.contexts};const c=rd(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r=ne(),i=je()){return L&&il(e)&&y.log(`Captured error event \`${hy(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,i).then(s=>s.event_id,s=>{L&&(Kp(s)?y.log(s.message):Jp(s)?y.warn(s.message):y.warn(s))})}_processEvent(e,n,r,i){const s=this.getOptions(),{sampleRate:o}=s,a=_y(e),c=il(e),l=`before send for type \`${e.type||"error"}\``,d=typeof o>"u"?void 0:xr(o);if(c&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),ad(Yc(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f=Zp(e.type);return this._prepareEvent(e,n,r,i).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),Yc("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const g=BI(this,s,p,n);return UI(g,l)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const _=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",_)}throw Yc(`${l} returned \`null\`, will not send event.`)}const h=r.getSession()||i.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const m=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,_=p.spans?p.spans.length:0,v=m-_;v>0&&this.recordDroppedEvent("before_send","span",v)}const g=p.transaction_info;if(a&&g&&p.transaction!==e.transaction){const m="custom";p.transaction_info={...g,source:m}}return this.sendEvent(p,n),p}).then(null,p=>{throw Kp(p)||Jp(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Lo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e,n){this._numProcessing++,this._promiseBuffer.add(e).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===hd&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[i,s]=n.split(":");return{reason:i,category:s,quantity:r}})}_flushOutcomes(){L&&y.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){L&&y.log("No outcomes to send");return}if(!this._dsn){L&&y.log("No dsn provided, will not send outcomes");return}L&&y.log("Sending outcomes:",e);const n=NI(e,this._options.tunnel&&Mn(this._dsn));this.sendEnvelope(n)}}function Zp(t){return t==="replay_event"?"replay":t||"error"}function UI(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Fr(t))return t.then(r=>{if(!en(r)&&r!==null)throw Lo(n);return r},r=>{throw Lo(`${e} rejected with ${r}`)});if(!en(t)&&t!==null)throw Lo(n);return t}function BI(t,e,n,r){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o,ignoreSpans:a}=e;let c=n;if(il(c)&&i)return i(c,r);if(_y(c)){if(o||a){const u=LI(c);if(a?.length&&ha(u,a))return null;if(o){const l=o(u);l?c=Ds(n,DI(l)):Zu()}if(c.spans){const l=[],d=c.spans;for(const p of d){if(a?.length&&ha(p,a)){sT(d,p);continue}if(o){const h=o(p);h?l.push(h):(Zu(),l.push(p))}else l.push(p)}const f=c.spans.length-l.length;f&&t.recordDroppedEvent("before_send","span",f),c.spans=l}}if(s){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return s(c,r)}}return c}function il(t){return t.type===void 0}function _y(t){return t.type==="transaction"}function HI(t){let e=0;return t.name&&(e+=t.name.length*2),e+=8,e+yy(t.attributes)}function WI(t){let e=0;return t.message&&(e+=t.message.length*2),e+yy(t.attributes)}function yy(t){if(!t)return 0;let e=0;return Object.values(t).forEach(n=>{Array.isArray(n)?e+=n.length*Qp(n[0]):Xn(n)?e+=Qp(n):e+=100}),e}function Qp(t){return typeof t=="string"?t.length*2:typeof t=="number"?8:typeof t=="boolean"?4:0}function jI(t,e){e.debug===!0&&(L?y.enable():tr(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ne().update(e.initialScope);const r=new t(e);return vy(r),r.init(),r}function vy(t){ne().setClient(t)}const Jc=100,Kc=5e3,qI=36e5;function zI(t){function e(...n){L&&y.log("[Offline]:",...n)}return n=>{const r=t(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const i=n.createStore(n);let s=Kc,o;function a(d,f,p){return Np(d,["client_report"])?!1:n.shouldStore?n.shouldStore(d,f,p):!0}function c(d){o&&clearTimeout(o),o=setTimeout(async()=>{o=void 0;const f=await i.shift();f&&(e("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),l(f,!0).catch(p=>{e("Failed to retry sending",p)}))},d),typeof o!="number"&&o.unref&&o.unref()}function u(){o||(c(s),s=Math.min(s*2,qI))}async function l(d,f=!1){if(!f&&Np(d,["replay_event","replay_recording"]))return await i.push(d),c(Jc),{};try{if(n.shouldSend&&await n.shouldSend(d)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const p=await r.send(d);let h=Jc;if(p){if(p.headers?.["retry-after"])h=uy(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])h=6e4;else if((p.statusCode||0)>=400)return p}return c(h),s=Kc,p}catch(p){if(await a(d,p,s))return f?await i.unshift(d):await i.push(d),u(),e("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:l,flush:d=>(d===void 0&&(s=Kc,c(Jc)),r.flush(d))}}}const Do="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function by(t,e){let n;return Cr(t,(r,i)=>(e.includes(i)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function GI(t,e){return n=>{const r=t(n);return{...r,send:async i=>{const s=by(i,["event","transaction","profile","replay_event"]);return s&&(s.release=e),r.send(i)}}}}function VI(t,e){return Gt(e?{...t[0],dsn:e}:t[0],t[1])}function YI(t,e){return n=>{const r=t(n),i=new Map,s=e||(u=>{const l=u.getEvent();return l?.extra?.[Do]&&Array.isArray(l.extra[Do])?l.extra[Do]:[]});function o(u,l){const d=l?`${u}:${l}`:u;let f=i.get(d);if(!f){const p=k_(u);if(!p)return;const h=iy(p,n.tunnel);f=l?GI(t,l)({...n,url:h}):t({...n,url:h}),i.set(d,f)}return[u,f]}async function a(u){function l(h){const g=h?.length?h:["event"];return by(u,g)}const d=s({envelope:u,getEvent:l}).map(h=>typeof h=="string"?o(h,void 0):o(h.dsn,h.release)).filter(h=>!!h),f=d.length?d:[["",r]];return(await Promise.all(f.map(([h,g])=>g.send(VI(u,h)))))[0]}async function c(u){const l=[...i.values(),r];return(await Promise.all(l.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}const JI="thismessage:/";function md(t){return"isRelative"in t}function _d(t,e){const n=t.indexOf("://")<=0&&t.indexOf("//")!==0,r=n?JI:void 0;try{if("canParse"in URL&&!URL.canParse(t,r))return;const i=new URL(t,r);return n?{isRelative:n,pathname:i.pathname,search:i.search,hash:i.hash}:i}catch{}}function KI(t){if(md(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function wr(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function Sy(t){return t.split(/[?#]/,1)[0]}function Ey(t,e){const n=e?.getDsn(),r=e?.getOptions().tunnel;return ZI(t,n)||XI(t,r)}function XI(t,e){return e?eh(t)===eh(e):!1}function ZI(t,e){const n=_d(t);return!n||md(n)?!1:e?n.host.includes(e.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function eh(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function wy(t,...e){const n=new String(String.raw(t,...e));return n.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=e,n}const QI=wy;function ek(t){"aggregates"in t?t.attrs?.ip_address===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function Ty(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:vn})),version:vn}),t._metadata=i}function yd(t={}){const e=t.client||$();if(!ey()||!e)return{};const n=An(),r=ir(n);if(r.getTraceData)return r.getTraceData(t);const i=t.scope||ne(),s=t.span||De(),o=s?D_(s):tk(i),a=s?qt(s):rd(e,i),c=I_(a);if(!A_.test(o))return y.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const l={"sentry-trace":o,baggage:c};if(t.propagateTraceparent){const d=s?eT(s):nk(i);d&&(l.traceparent=d)}return l}function tk(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return P_(e,r,n)}function nk(t){const{traceId:e,sampled:n,propagationSpanId:r}=t.getPropagationContext();return O_(e,r,n)}function rk(t,e,n){let r,i,s;const o=n?.maxWait?Math.max(n.maxWait,e):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=t(),r}function u(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function l(){return i!==void 0||s!==void 0?c():r}function d(){return i&&clearTimeout(i),i=a(c,e),o&&s===void 0&&(s=a(c,o)),r}return d.cancel=u,d.flush=l,d}const ik=100;function zt(t,e){const n=$(),r=je();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=ik}=n.getOptions();if(s<=0)return;const a={timestamp:Br(),...t},c=i?tr(()=>i(a,e)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,s))}let th;const sk="FunctionToString",nh=new WeakMap,ok=(()=>({name:sk,setupOnce(){th=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Zl(this),n=nh.has($())&&e!==void 0?e:this;return th.apply(n,t)}}catch{}},setup(t){nh.set(t,!0)}})),Iy=ok,ak=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ck="EventFilters",ky=(t={})=>{let e;return{name:ck,setup(n){const r=n.getOptions();e=rh(t,r)},processEvent(n,r,i){if(!e){const s=i.getOptions();e=rh(t,s)}return uk(n,e)?null:n}}},Ry=((t={})=>({...ky(t),name:"InboundFilters"}));function rh(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:ak],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function uk(t,e){if(t.type){if(t.type==="transaction"&&dk(t,e.ignoreTransactions))return L&&y.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${hr(t)}`),!0}else{if(lk(t,e.ignoreErrors))return L&&y.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${hr(t)}`),!0;if(gk(t))return L&&y.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${hr(t)}`),!0;if(fk(t,e.denyUrls))return L&&y.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${hr(t)}.
Url: ${va(t)}`),!0;if(!pk(t,e.allowUrls))return L&&y.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${hr(t)}.
Url: ${va(t)}`),!0}return!1}function lk(t,e){return e?.length?hy(t).some(n=>Wt(n,e)):!1}function dk(t,e){if(!e?.length)return!1;const n=t.transaction;return n?Wt(n,e):!1}function fk(t,e){if(!e?.length)return!1;const n=va(t);return n?Wt(n,e):!1}function pk(t,e){if(!e?.length)return!0;const n=va(t);return n?Wt(n,e):!0}function hk(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function va(t){try{const n=[...t.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?hk(n):null}catch{return L&&y.error(`Cannot extract url for event ${hr(t)}`),null}}function gk(t){return t.exception?.values?.length?!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value):!1}function mk(t,e,n,r,i,s){if(!i.exception?.values||!s||!In(s.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=sl(t,e,r,s.originalException,n,i.exception.values,o,0))}function sl(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(In(r[i],Error)){ih(o,a);const u=t(e,r[i]),l=c.length;sh(u,i,l,a),c=sl(t,e,n,r[i],i,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(In(u,Error)){ih(o,a);const d=t(e,u),f=c.length;sh(d,`errors[${l}]`,f,a),c=sl(t,e,n,u,i,[d,...c],d,f)}}),c}function ih(t,e){t.mechanism={handled:!0,type:"auto.core.linked_errors",...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function sh(t,e,n,r){t.mechanism={handled:!0,...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}const xy=new Map,oh=new Set;function _k(t){if(G._sentryModuleMetadata)for(const e of Object.keys(G._sentryModuleMetadata)){const n=G._sentryModuleMetadata[e];if(oh.has(e))continue;oh.add(e);const r=t(e);for(const i of r.reverse())if(i.filename){xy.set(i.filename,n);break}}}function yk(t,e){return _k(t),xy.get(e)}function Cy(t,e){e.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;const i=yk(t,r.filename);i&&(r.module_metadata=i)})})}function Ay(t){t.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}const vk=()=>({name:"ModuleMetadata",setup(t){t.on("beforeEnvelope",e=>{Cr(e,(n,r)=>{if(r==="event"){const i=Array.isArray(n)?n[1]:void 0;i&&(Ay(i),n[1]=i)}})}),t.on("applyFrameMetadata",e=>{if(e.type)return;const n=t.getOptions().stackParser;Cy(n,e)})}});function vd(t){const e="console";nr(e,t),rr(e,bk)}function bk(){"console"in G&&Yl.forEach(function(t){t in G.console&&rt(G.console,t,function(e){return da[t]=e,function(...n){Pt("console",{args:n,level:t}),da[t]?.apply(G.console,n)}})})}function ba(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Sk="CaptureConsole",Ek=((t={})=>{const e=t.levels||Yl,n=t.handled??!0;return{name:Sk,setup(r){"console"in G&&vd(({args:i,level:s})=>{$()!==r||!e.includes(s)||Tk(i,s,n)})}}}),wk=Ek;function Tk(t,e,n){const r=ba(e),i=new Error,s={level:ba(e),extra:{arguments:t}};bt(o=>{if(o.addEventProcessor(u=>(u.logger="console",kn(u,{handled:n,type:"auto.core.capture_console"}),u)),e==="assert"){if(!t[0]){const u=`Assertion failed: ${fa(t.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",t.slice(1)),o.captureMessage(u,r,{captureContext:s,syntheticException:i})}return}const a=t.find(u=>u instanceof Error);if(a){Pe(a,s);return}const c=fa(t," ");o.captureMessage(c,r,{captureContext:s,syntheticException:i})})}const Ik="Dedupe",kk=(()=>{let t;return{name:Ik,processEvent(e){if(e.type)return e;try{if(Rk(e,t))return L&&y.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}}),My=kk;function Rk(t,e){return e?!!(xk(t,e)||Ck(t,e)):!1}function xk(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Oy(t,e)||!Py(t,e))}function Ck(t,e){const n=ah(e),r=ah(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Oy(t,e)||!Py(t,e))}function Py(t,e){let n=Vu(t),r=Vu(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function Oy(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function ah(t){return t.exception?.values?.[0]}const Ak="ExtraErrorData",Mk=((t={})=>{const{depth:e=3,captureErrorCause:n=!0}=t;return{name:Ak,processEvent(r,i,s){const{maxValueLength:o}=s.getOptions();return Ok(r,i,e,n,o)}}}),Pk=Mk;function Ok(t,e={},n,r,i){if(!e.originalException||!bn(e.originalException))return t;const s=e.originalException.name||e.originalException.constructor.name,o=Ny(e.originalException,r,i);if(o){const a={...t.contexts},c=Tt(o,n);return en(c)&&(Je(c,"__sentry_skip_normalization__",!0),a[s]=c),{...t,contexts:a}}return t}function Ny(t,e,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],i={};for(const s of Object.keys(t)){if(r.indexOf(s)!==-1)continue;const o=t[s];i[s]=bn(o)||typeof o=="string"?n?Ss(`${o}`,n):`${o}`:o}if(e&&t.cause!==void 0)if(bn(t.cause)){const s=t.cause.name||t.cause.constructor.name;i.cause={[s]:Ny(t.cause,!1,n)}}else i.cause=t.cause;if(typeof t.toJSON=="function"){const s=t.toJSON();for(const o of Object.keys(s)){const a=s[o];i[o]=bn(a)?a.toString():a}}return i}catch(r){L&&y.error("Unable to extract extra data from the Error object:",r)}return null}function Nk(t,e){let n=0;for(let r=t.length-1;r>=0;r--){const i=t[r];i==="."?t.splice(r,1):i===".."?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}const Lk=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Dk(t){const e=t.length>1024?`<truncated>${t.slice(-1024)}`:t,n=Lk.exec(e);return n?n.slice(1):[]}function ch(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){const i=r>=0?t[r]:"/";i&&(e=`${i}/${e}`,n=i.charAt(0)==="/")}return e=Nk(e.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+e||"."}function uh(t){let e=0;for(;e<t.length&&t[e]==="";e++);let n=t.length-1;for(;n>=0&&t[n]==="";n--);return e>n?[]:t.slice(e,n-e+1)}function $k(t,e){t=ch(t).slice(1),e=ch(e).slice(1);const n=uh(t.split("/")),r=uh(e.split("/")),i=Math.min(n.length,r.length);let s=i;for(let a=0;a<i;a++)if(n[a]!==r[a]){s=a;break}let o=[];for(let a=s;a<n.length;a++)o.push("..");return o=o.concat(r.slice(s)),o.join("/")}function Fk(t,e){return Dk(t)[2]||""}const Uk="RewriteFrames",Bk=(t={})=>{const e=t.root,n=t.prefix||"app:///",r="window"in G&&!!G.window,i=t.iteratee||Hk({isBrowser:r,root:e,prefix:n});function s(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:o(c.stacktrace)}}))}}}catch{return a}}function o(a){return{...a,frames:a?.frames?.map(c=>i(c))}}return{name:Uk,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=s(c)),c}}};function Hk({isBrowser:t,root:e,prefix:n}){return r=>{if(!r.filename)return r;const i=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(t){if(e){const o=r.filename;o.indexOf(e)===0&&(r.filename=o.replace(e,n))}}else if(i||s){const o=i?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=e?$k(e,o):Fk(o);r.filename=`${n}${a}`}return r}}const Wk=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],jk=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],qk={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Ly=["select","insert","upsert","update","delete"];function ec(t){try{t.__SENTRY_INSTRUMENTED__=!0}catch{}}function tc(t){try{return t.__SENTRY_INSTRUMENTED__}catch{return!1}}function zk(t,e={}){switch(t){case"GET":return"select";case"POST":return e.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Gk(t,e){if(e===""||e==="*")return"select(*)";if(t==="select")return`select(${e})`;if(t==="or"||t.endsWith(".or"))return`${t}${e}`;const[n,...r]=e.split(".");let i;return n?.startsWith("fts")?i="textSearch":n?.startsWith("plfts")?i="textSearch[plain]":n?.startsWith("phfts")?i="textSearch[phrase]":n?.startsWith("wfts")?i="textSearch[websearch]":i=n&&qk[n]||"filter",`${i}(${t}, ${r.join(".")})`}function lh(t,e=!1){return new Proxy(t,{apply(n,r,i){return Pn({name:`auth ${e?"(admin) ":""}${t.name}`,attributes:{[re]:"auto.db.supabase",[Te]:"db","db.system":"postgresql","db.operation":`auth.${e?"admin.":""}${t.name}`}},s=>Reflect.apply(n,r,i).then(o=>(o&&typeof o=="object"&&"error"in o&&o.error?(s.setStatus({code:pe}),Pe(o.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):s.setStatus({code:Ya}),s.end(),o)).catch(o=>{throw s.setStatus({code:pe}),s.end(),Pe(o,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),o}).then(...i))}})}function Vk(t){const e=t.auth;if(!(!e||tc(t.auth))){for(const n of Wk){const r=e[n];r&&typeof t.auth[n]=="function"&&(t.auth[n]=lh(r))}for(const n of jk){const r=e.admin[n];r&&typeof t.auth.admin[n]=="function"&&(t.auth.admin[n]=lh(r,!0))}ec(t.auth)}}function Yk(t){tc(t.prototype.from)||(t.prototype.from=new Proxy(t.prototype.from,{apply(e,n,r){const i=Reflect.apply(e,n,r),s=i.constructor;return Kk(s),i}}),ec(t.prototype.from))}function Jk(t){tc(t.prototype.then)||(t.prototype.then=new Proxy(t.prototype.then,{apply(e,n,r){const i=Ly,s=n,o=zk(s.method,s.headers);if(!i.includes(o)||!s?.url?.pathname||typeof s.url.pathname!="string")return Reflect.apply(e,n,r);const a=s.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[p,h]of s.url.searchParams.entries())u.push(Gk(p,h));const l=Object.create(null);if(en(s.body))for(const[p,h]of Object.entries(s.body))l[p]=h;const d=`${o==="select"?"":`${o}${l?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":s.schema,"db.url":s.url.origin,"db.sdk":s.headers["X-Client-Info"],"db.system":"postgresql","db.operation":o,[re]:"auto.db.supabase",[Te]:"db"};return u.length&&(f["db.query"]=u),Object.keys(l).length&&(f["db.body"]=l),Pn({name:d,attributes:f},p=>Reflect.apply(e,n,[]).then(h=>{if(p&&(h&&typeof h=="object"&&"status"in h&&ws(p,h.status||500),p.end()),h.error){const _=new Error(h.error.message);h.error.code&&(_.code=h.error.code),h.error.details&&(_.details=h.error.details);const v={};u.length&&(v.query=u),Object.keys(l).length&&(v.body=l),Pe(_,I=>(I.addEventProcessor(E=>(kn(E,{handled:!1,type:"auto.db.supabase.postgres"}),E)),I.setContext("supabase",v),I))}const g={type:"supabase",category:`db.${o}`,message:d},m={};return u.length&&(m.query=u),Object.keys(l).length&&(m.body=l),Object.keys(m).length&&(g.data=m),zt(g),h},h=>{throw p&&(ws(p,500),p.end()),h}).then(...r))}}),ec(t.prototype.then))}function Kk(t){for(const e of Ly)tc(t.prototype[e])||(t.prototype[e]=new Proxy(t.prototype[e],{apply(n,r,i){const s=Reflect.apply(n,r,i),o=s.constructor;return L&&y.log(`Instrumenting ${e} operation's PostgRESTFilterBuilder`),Jk(o),s}}),ec(t.prototype[e]))}const Dy=t=>{if(!t){L&&y.warn("Supabase integration was not installed because no Supabase client was provided.");return}const e=t.constructor===Function?t:t.constructor;Yk(e),Vk(t)},Xk="Supabase",Zk=(t=>({setupOnce(){Dy(t)},name:Xk})),Qk=t=>Zk(t.supabaseClient),e1=10,t1="ZodErrors";function n1(t){return bn(t)&&t.name==="ZodError"&&Array.isArray(t.issues)}function r1(t){return{...t,path:"path"in t&&Array.isArray(t.path)?t.path.join("."):void 0,keys:"keys"in t?JSON.stringify(t.keys):void 0,unionErrors:"unionErrors"in t?JSON.stringify(t.unionErrors):void 0}}function i1(t){return t.map(e=>typeof e=="number"?"<array>":e).join(".")}function s1(t){const e=new Set;for(const r of t.issues){const i=i1(r.path);i.length>0&&e.add(i)}const n=Array.from(e);if(n.length===0){let r="variable";if(t.issues.length>0){const i=t.issues[0];i!==void 0&&"expected"in i&&typeof i.expected=="string"&&(r=i.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Ss(n.join(", "),100)}`}function o1(t,e=!1,n,r){if(!n.exception?.values||!r.originalException||!n1(r.originalException)||r.originalException.issues.length===0)return n;try{const s=(e?r.originalException.issues:r.originalException.issues.slice(0,t)).map(r1);return e&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:s})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:s1(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":s.slice(0,t)}}}catch(i){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:"unknown"}}}}}const a1=((t={})=>{const e=t.limit??e1;return{name:t1,processEvent(n,r){return o1(e,t.saveZodIssuesAsAttachment,n,r)}}}),c1=a1,u1=t=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",n=>{Cr(n,(r,i)=>{if(i==="event"){const s=Array.isArray(r)?r[1]:void 0;s&&(Ay(s),r[1]=s)}})}),e.on("applyFrameMetadata",n=>{if(n.type)return;const r=e.getOptions().stackParser;Cy(r,n)})},processEvent(e){const n=l1(e);if(n){const r=t.behaviour==="drop-error-if-contains-third-party-frames"||t.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](s=>!s.some(o=>t.filterKeys.includes(o)))){if(t.behaviour==="drop-error-if-contains-third-party-frames"||t.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;e.tags={...e.tags,third_party_code:!0}}}return e}});function l1(t){const e=Vu(t);if(e)return e.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(dh)).map(r=>r.slice(dh.length)):[])}const dh="_sentryBundlerPluginAppKey:",d1=100,f1=10,uo="flag.evaluation.";function Ni(t){const n=ne().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(t.contexts===void 0&&(t.contexts={}),t.contexts.flags={values:[...r]}),t}function Mr(t,e,n=d1){const r=ne().getScopeData().contexts;r.flags||(r.flags={values:[]});const i=r.flags.values;p1(i,t,e,n)}function p1(t,e,n,r){if(typeof n!="boolean")return;if(t.length>r){L&&y.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const i=t.findIndex(s=>s.flag===e);i!==-1&&t.splice(i,1),t.length===r&&t.shift(),t.push({flag:e,result:n})}function Pr(t,e,n=f1){if(typeof e!="boolean")return;const r=De();if(!r)return;const i=q(r).data;if(`${uo}${t}`in i){r.setAttribute(`${uo}${t}`,e);return}Object.keys(i).filter(o=>o.startsWith(uo)).length<n&&r.setAttribute(`${uo}${t}`,e)}const h1=()=>({name:"FeatureFlags",processEvent(t,e,n){return Ni(t)},addFeatureFlag(t,e){Mr(t,e),Pr(t,e)}}),g1=({growthbookClass:t})=>({name:"GrowthBook",setupOnce(){const e=t.prototype;typeof e.isOn=="function"&&rt(e,"isOn",fh),typeof e.getFeatureValue=="function"&&rt(e,"getFeatureValue",fh)},processEvent(e,n,r){return Ni(e)}});function fh(t){return function(...e){const n=e[0],r=t.apply(this,e);return typeof n=="string"&&typeof r=="boolean"&&(Mr(n,r),Pr(n,r)),r}}function m1(t,e,n,r,i){if(!t.fetchData)return;const{method:s,url:o}=t.fetchData,a=Ot()&&e(o);if(t.endTimestamp&&a){const p=t.fetchData.__span;if(!p)return;const h=r[p];h&&(v1(h,t),_1(h,t,i),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof i=="object"?i:{spanOrigin:i},l=!!De(),d=a&&l?Nt(S1(o,s,c)):new Rn;if(t.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(t.fetchData.url)){const p=t.args[0],h=t.args[1]||{},g=y1(p,h,Ot()&&l?d:void 0,u);g&&(t.args[1]=h,h.headers=g)}const f=$();if(f){const p={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};f.emit("beforeOutgoingRequestSpan",d,p)}return d}function _1(t,e,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(t,{headers:e.response?.headers,error:e.error})}function y1(t,e,n,r){const i=yd({span:n,propagateTraceparent:r}),s=i["sentry-trace"],o=i.baggage,a=i.traceparent;if(!s)return;const c=e.headers||(h_(t)?t.headers:void 0);if(c)if(b1(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",s),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),o){const l=u.get("baggage");l?lo(l)||u.set("baggage",`${l},${o}`):u.set("baggage",o)}return u}else if(Array.isArray(c)){const u=[...c];c.find(d=>d[0]==="sentry-trace")||u.push(["sentry-trace",s]),r&&a&&!c.find(d=>d[0]==="traceparent")&&u.push(["traceparent",a]);const l=c.find(d=>d[0]==="baggage"&&lo(d[1]));return o&&!l&&u.push(["baggage",o]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,l="traceparent"in c?c.traceparent:void 0,d="baggage"in c?c.baggage:void 0,f=d?Array.isArray(d)?[...d]:[d]:[],p=d&&(Array.isArray(d)?d.find(g=>lo(g)):lo(d));o&&!p&&f.push(o);const h={...c,"sentry-trace":u??s,baggage:f.length>0?f.join(","):void 0};return r&&a&&!l&&(h.traceparent=a),h}else return{...i}}function v1(t,e){if(e.response){ws(t,e.response.status);const n=e.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&t.setAttribute("http.response_content_length",r)}}else e.error&&t.setStatus({code:pe,message:"internal_error"});t.end()}function lo(t){return t.split(",").some(e=>e.trim().startsWith(ed))}function b1(t){return typeof Headers<"u"&&In(t,Headers)}function S1(t,e,n){const r=_d(t);return{name:r?`${e} ${KI(r)}`:e,attributes:E1(t,r,e,n)}}function E1(t,e,n,r){const i={url:t,type:"fetch","http.method":n,[re]:r,[Te]:"http.client"};return e&&(md(e)||(i["http.url"]=e.href,i["server.address"]=e.host),e.search&&(i["http.query"]=e.search),e.hash&&(i["http.fragment"]=e.hash)),i}function $y(t,e={},n=ne()){const{message:r,name:i,email:s,url:o,source:a,associatedEventId:c,tags:u}=t,l={contexts:{feedback:{contact_email:s,name:i,message:r,url:o,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},d=n?.getClient()||$();return d&&d.emit("beforeSendFeedback",l,e),n.captureEvent(l,e)}function Li(t,e,n,r,i){ya({level:t,message:e,attributes:n,severityNumber:i},r)}function w1(t,e,{scope:n}={}){Li("trace",t,e,n)}function T1(t,e,{scope:n}={}){Li("debug",t,e,n)}function I1(t,e,{scope:n}={}){Li("info",t,e,n)}function k1(t,e,{scope:n}={}){Li("warn",t,e,n)}function R1(t,e,{scope:n}={}){Li("error",t,e,n)}function x1(t,e,{scope:n}={}){Li("fatal",t,e,n)}const C1=Object.freeze(Object.defineProperty({__proto__:null,debug:T1,error:R1,fatal:x1,fmt:QI,info:I1,trace:w1,warn:k1},Symbol.toStringTag,{value:"Module"}));function ol(t,e,n){return"util"in G&&typeof G.util.format=="function"?G.util.format(...t):A1(t,e,n)}function A1(t,e,n){return t.map(r=>Xn(r)?String(r):JSON.stringify(Tt(r,e,n))).join(" ")}function M1(t){return/%[sdifocO]/.test(t)}function P1(t,e){const n={},r=new Array(e.length).fill("{}").join(" ");return n["sentry.message.template"]=`${t} ${r}`,e.forEach((i,s)=>{n[`sentry.message.parameter.${s}`]=i}),n}const O1="ConsoleLogs",ph={[re]:"auto.log.console"},N1=((t={})=>{const e=t.levels||Yl;return{name:O1,setup(n){const{enableLogs:r,normalizeDepth:i=3,normalizeMaxBreadth:s=1e3}=n.getOptions();if(!r){L&&y.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}vd(({args:o,level:a})=>{if($()!==n||!e.includes(a))return;const c=o[0],u=o.slice(1);if(a==="assert"){if(!c){const p=u.length>0?`Assertion failed: ${ol(u,i,s)}`:"Assertion failed";ya({level:"error",message:p,attributes:ph})}return}const l=a==="log",d=o.length>1&&typeof o[0]=="string"&&!M1(o[0]),f={...ph,...d?P1(c,u):{}};ya({level:l?"info":a,message:ol(o,i,s),severityNumber:l?10:void 0,attributes:f})})}}}),L1=N1;function bd(t,e,n,r){AI({type:t,name:e,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function D1(t,e=1,n){bd("counter",t,e,n)}function $1(t,e,n){bd("gauge",t,e,n)}function F1(t,e,n){bd("distribution",t,e,n)}const U1=Object.freeze(Object.defineProperty({__proto__:null,count:D1,distribution:F1,gauge:$1},Symbol.toStringTag,{value:"Module"})),B1=["trace","debug","info","warn","error","fatal"];function H1(t={}){const e=new Set(t.levels??B1),n=t.client;return{log(r){const{type:i,level:s,message:o,args:a,tag:c,date:u,...l}=r,d=n||$();if(!d)return;const f=q1(i,s);if(!e.has(f))return;const{normalizeDepth:p=3,normalizeMaxBreadth:h=1e3}=d.getOptions(),g=[];o&&g.push(o),a&&a.length>0&&g.push(ol(a,p,h));const m=g.join(" ");l["sentry.origin"]="auto.log.consola",c&&(l["consola.tag"]=c),i&&(l["consola.type"]=i),s!=null&&typeof s=="number"&&(l["consola.level"]=s),ya({level:f,message:m,attributes:l})}}}const W1={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},j1={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function q1(t,e){if(t==="verbose")return"debug";if(t==="silent")return"trace";if(t){const n=W1[t];if(n)return n}if(typeof e=="number"){const n=j1[e];if(n)return n}return"info"}const z1="gen_ai.prompt",nc="gen_ai.system",yt="gen_ai.request.model",Sd="gen_ai.request.stream",rc="gen_ai.request.temperature",Ed="gen_ai.request.max_tokens",ic="gen_ai.request.frequency_penalty",wd="gen_ai.request.presence_penalty",sc="gen_ai.request.top_p",Fy="gen_ai.request.top_k",G1="gen_ai.request.encoding_format",V1="gen_ai.request.dimensions",or="gen_ai.response.finish_reasons",ar="gen_ai.response.model",Di="gen_ai.response.id",Y1="gen_ai.response.stop_reason",Or="gen_ai.usage.input_tokens",Nr="gen_ai.usage.output_tokens",Lr="gen_ai.usage.total_tokens",Zn="gen_ai.operation.name",tn="gen_ai.request.messages",Lt="gen_ai.response.text",oc="gen_ai.request.available_tools",ac="gen_ai.response.streaming",cn="gen_ai.response.tool_calls",Uy="gen_ai.agent.name",J1="gen_ai.pipeline.name",K1="gen_ai.usage.cache_creation_input_tokens",X1="gen_ai.usage.cache_read_input_tokens",Z1="gen_ai.invoke_agent",Q1="openai.response.id",By="openai.response.model",eR="openai.response.timestamp",tR="openai.usage.completion_tokens",nR="openai.usage.prompt_tokens",Xc={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},hh="anthropic.response.timestamp",Hy=2e4,Sa=t=>new TextEncoder().encode(t).length,Ea=t=>Sa(JSON.stringify(t));function Td(t,e){if(Sa(t)<=e)return t;let n=0,r=t.length,i="";for(;n<=r;){const s=Math.floor((n+r)/2),o=t.slice(0,s);Sa(o)<=e?(i=o,n=s+1):r=s-1}return i}function rR(t){return typeof t=="string"?t:t.text}function gh(t,e){return typeof t=="string"?e:{...t,text:e}}function iR(t){return t!==null&&typeof t=="object"&&"content"in t&&typeof t.content=="string"}function sR(t){return t!==null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)&&t.parts.length>0}function oR(t,e){const n={...t,content:""},r=Ea(n),i=e-r;if(i<=0)return[];const s=Td(t.content,i);return[{...t,content:s}]}function aR(t,e){const{parts:n}=t,r=n.map(a=>gh(a,"")),i=Ea({...t,parts:r});let s=e-i;if(s<=0)return[];const o=[];for(const a of n){const c=rR(a),u=Sa(c);if(u<=s)o.push(a),s-=u;else if(o.length===0){const l=Td(c,s);l&&o.push(gh(a,l));break}else break}return o.length>0?[{...t,parts:o}]:[]}function cR(t,e){return!t||typeof t!="object"?[]:iR(t)?oR(t,e):sR(t)?aR(t,e):[]}function uR(t,e){if(!Array.isArray(t)||t.length===0||Ea(t)<=e)return t;const r=t.map(Ea);let i=0,s=t.length;for(let o=t.length-1;o>=0;o--){const a=r[o];if(a&&i+a>e)break;a&&(i+=a),s=o}if(s===t.length){const o=t[t.length-1];return cR(o,e)}return t.slice(s)}function Id(t){return uR(t,Hy)}function lR(t){return Td(t,Hy)}function Bs(t){return t.includes("messages")?"messages":t.includes("completions")?"completions":t.includes("models")?"models":t.includes("chat")?"chat":t.split(".").pop()||"unknown"}function wa(t){return`gen_ai.${Bs(t)}`}function Wy(t,e){return t?`${t}.${e}`:e}function kd(t,e,n,r,i){if(e!==void 0&&t.setAttributes({[Or]:e}),n!==void 0&&t.setAttributes({[Nr]:n}),e!==void 0||n!==void 0||r!==void 0||i!==void 0){const s=(e??0)+(n??0)+(r??0)+(i??0);t.setAttributes({[Lr]:s})}}function Tr(t){if(typeof t=="string")return lR(t);if(Array.isArray(t)){const e=Id(t);return JSON.stringify(e)}return JSON.stringify(t)}const dR=["responses.create","chat.completions.create","embeddings.create"],fR=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],pR=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...fR];function Rd(t){return t.includes("chat.completions")?Xc.CHAT:t.includes("responses")?Xc.RESPONSES:t.includes("embeddings")?Xc.EMBEDDINGS:t.split(".").pop()||"unknown"}function mh(t){return`gen_ai.${Rd(t)}`}function hR(t){return dR.includes(t)}function gR(t,e){return t?`${t}.${e}`:e}function mR(t){return t!==null&&typeof t=="object"&&"object"in t&&t.object==="chat.completion"}function _R(t){return t!==null&&typeof t=="object"&&"object"in t&&t.object==="response"}function yR(t){if(t===null||typeof t!="object"||!("object"in t))return!1;const e=t;return e.object==="list"&&typeof e.model=="string"&&e.model.toLowerCase().includes("embedding")}function vR(t){return t!==null&&typeof t=="object"&&"type"in t&&typeof t.type=="string"&&t.type.startsWith("response.")}function bR(t){return t!==null&&typeof t=="object"&&"object"in t&&t.object==="chat.completion.chunk"}function SR(t,e,n){if(xd(t,e.id,e.model,e.created),e.usage&&cc(t,e.usage.prompt_tokens,e.usage.completion_tokens,e.usage.total_tokens),Array.isArray(e.choices)){const r=e.choices.map(i=>i.finish_reason).filter(i=>i!==null);if(r.length>0&&t.setAttributes({[or]:JSON.stringify(r)}),n){const i=e.choices.map(s=>s.message?.tool_calls).filter(s=>Array.isArray(s)&&s.length>0).flat();i.length>0&&t.setAttributes({[cn]:JSON.stringify(i)})}}}function ER(t,e,n){if(xd(t,e.id,e.model,e.created_at),e.status&&t.setAttributes({[or]:JSON.stringify([e.status])}),e.usage&&cc(t,e.usage.input_tokens,e.usage.output_tokens,e.usage.total_tokens),n){const r=e;if(Array.isArray(r.output)&&r.output.length>0){const i=r.output.filter(s=>typeof s=="object"&&s!==null&&s.type==="function_call");i.length>0&&t.setAttributes({[cn]:JSON.stringify(i)})}}}function wR(t,e){t.setAttributes({[By]:e.model,[ar]:e.model}),e.usage&&cc(t,e.usage.prompt_tokens,void 0,e.usage.total_tokens)}function cc(t,e,n,r){e!==void 0&&t.setAttributes({[nR]:e,[Or]:e}),n!==void 0&&t.setAttributes({[tR]:n,[Nr]:n}),r!==void 0&&t.setAttributes({[Lr]:r})}function xd(t,e,n,r){t.setAttributes({[Q1]:e,[Di]:e}),t.setAttributes({[By]:n,[ar]:n}),t.setAttributes({[eR]:new Date(r*1e3).toISOString()})}function TR(t,e){for(const n of t){const r=n.index;if(!(r===void 0||!n.function))if(!(r in e.chatCompletionToolCalls))e.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const i=e.chatCompletionToolCalls[r];n.function.arguments&&i?.function&&(i.function.arguments+=n.function.arguments)}}}function IR(t,e,n){e.responseId=t.id??e.responseId,e.responseModel=t.model??e.responseModel,e.responseTimestamp=t.created??e.responseTimestamp,t.usage&&(e.promptTokens=t.usage.prompt_tokens,e.completionTokens=t.usage.completion_tokens,e.totalTokens=t.usage.total_tokens);for(const r of t.choices??[])n&&(r.delta?.content&&e.responseTexts.push(r.delta.content),r.delta?.tool_calls&&TR(r.delta.tool_calls,e)),r.finish_reason&&e.finishReasons.push(r.finish_reason)}function kR(t,e,n,r){if(!(t&&typeof t=="object")){e.eventTypes.push("unknown:non-object");return}if(t instanceof Error){r.setStatus({code:pe,message:"internal_error"}),Pe(t,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in t))return;const i=t;if(!pR.includes(i.type)){e.eventTypes.push(i.type);return}if(n&&(i.type==="response.output_item.done"&&"item"in i&&e.responsesApiToolCalls.push(i.item),i.type==="response.output_text.delta"&&"delta"in i&&i.delta)){e.responseTexts.push(i.delta);return}if("response"in i){const{response:s}=i;e.responseId=s.id??e.responseId,e.responseModel=s.model??e.responseModel,e.responseTimestamp=s.created_at??e.responseTimestamp,s.usage&&(e.promptTokens=s.usage.input_tokens,e.completionTokens=s.usage.output_tokens,e.totalTokens=s.usage.total_tokens),s.status&&e.finishReasons.push(s.status),n&&s.output_text&&e.responseTexts.push(s.output_text)}}async function*RR(t,e,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const i of t)bR(i)?IR(i,r,n):vR(i)&&kR(i,r,n,e),yield i}finally{xd(e,r.responseId,r.responseModel,r.responseTimestamp),cc(e,r.promptTokens,r.completionTokens,r.totalTokens),e.setAttributes({[ac]:!0}),r.finishReasons.length&&e.setAttributes({[or]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&e.setAttributes({[Lt]:r.responseTexts.join("")});const s=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];s.length>0&&e.setAttributes({[cn]:JSON.stringify(s)}),e.end()}}function xR(t,e){const n={[nc]:"openai",[Zn]:Rd(e),[re]:"auto.ai.openai"};if(t.length>0&&typeof t[0]=="object"&&t[0]!==null){const r=t[0],i=Array.isArray(r.tools)?r.tools:[],o=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...i,...o];a.length>0&&(n[oc]=JSON.stringify(a))}if(t.length>0&&typeof t[0]=="object"&&t[0]!==null){const r=t[0];n[yt]=r.model??"unknown","temperature"in r&&(n[rc]=r.temperature),"top_p"in r&&(n[sc]=r.top_p),"frequency_penalty"in r&&(n[ic]=r.frequency_penalty),"presence_penalty"in r&&(n[wd]=r.presence_penalty),"stream"in r&&(n[Sd]=r.stream),"encoding_format"in r&&(n[G1]=r.encoding_format),"dimensions"in r&&(n[V1]=r.dimensions)}else n[yt]="unknown";return n}function CR(t,e,n){if(!e||typeof e!="object")return;const r=e;if(mR(r)){if(SR(t,r,n),n&&r.choices?.length){const i=r.choices.map(s=>s.message?.content||"");t.setAttributes({[Lt]:JSON.stringify(i)})}}else _R(r)?(ER(t,r,n),n&&r.output_text&&t.setAttributes({[Lt]:r.output_text})):yR(r)&&wR(t,r)}function _h(t,e){if("messages"in e){const n=Tr(e.messages);t.setAttributes({[tn]:n})}if("input"in e){const n=Tr(e.input);t.setAttributes({[tn]:n})}}function AR(t,e,n,r){return async function(...s){const o=xR(s,e),a=o[yt]||"unknown",c=Rd(e),u=s[0];return u&&typeof u=="object"&&u.stream===!0?_n({name:`${c} ${a} stream-response`,op:mh(e),attributes:o},async d=>{try{r.recordInputs&&u&&_h(d,u);const f=await t.apply(n,s);return RR(f,d,r.recordOutputs??!1)}catch(f){throw d.setStatus({code:pe,message:"internal_error"}),Pe(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:e}}}),d.end(),f}}):Pn({name:`${c} ${a}`,op:mh(e),attributes:o},async d=>{try{r.recordInputs&&u&&_h(d,u);const f=await t.apply(n,s);return CR(d,f,r.recordOutputs),f}catch(f){throw Pe(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:e}}}),f}})}}function jy(t,e="",n){return new Proxy(t,{get(r,i){const s=r[i],o=gR(e,String(i));return typeof s=="function"&&hR(o)?AR(s,o,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?jy(s,o,n):s}})}function MR(t,e){const n=!!$()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...e};return jy(t,"",r)}function PR(t,e){return"type"in t&&typeof t.type=="string"&&t.type==="error"?(e.setStatus({code:pe,message:t.error?.type??"internal_error"}),Pe(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function OR(t,e){if(t.type==="message_delta"&&t.usage&&"output_tokens"in t.usage&&typeof t.usage.output_tokens=="number"&&(e.completionTokens=t.usage.output_tokens),t.message){const n=t.message;n.id&&(e.responseId=n.id),n.model&&(e.responseModel=n.model),n.stop_reason&&e.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(e.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(e.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(e.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function NR(t,e){t.type!=="content_block_start"||typeof t.index!="number"||!t.content_block||(t.content_block.type==="tool_use"||t.content_block.type==="server_tool_use")&&(e.activeToolBlocks[t.index]={id:t.content_block.id,name:t.content_block.name,inputJsonParts:[]})}function LR(t,e,n){if(!(t.type!=="content_block_delta"||!t.delta)){if(typeof t.index=="number"&&"partial_json"in t.delta&&typeof t.delta.partial_json=="string"){const r=e.activeToolBlocks[t.index];r&&r.inputJsonParts.push(t.delta.partial_json)}n&&typeof t.delta.text=="string"&&e.responseTexts.push(t.delta.text)}}function DR(t,e){if(t.type!=="content_block_stop"||typeof t.index!="number")return;const n=e.activeToolBlocks[t.index];if(!n)return;const r=n.inputJsonParts.join("");let i;try{i=r?JSON.parse(r):{}}catch{i={__unparsed:r}}e.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:i}),delete e.activeToolBlocks[t.index]}function qy(t,e,n,r){!(t&&typeof t=="object")||PR(t,r)||(OR(t,e),NR(t,e),LR(t,e,n),DR(t,e))}function $R(t,e,n){e.isRecording()&&(t.responseId&&e.setAttributes({[Di]:t.responseId}),t.responseModel&&e.setAttributes({[ar]:t.responseModel}),kd(e,t.promptTokens,t.completionTokens,t.cacheCreationInputTokens,t.cacheReadInputTokens),e.setAttributes({[ac]:!0}),t.finishReasons.length>0&&e.setAttributes({[or]:JSON.stringify(t.finishReasons)}),n&&t.responseTexts.length>0&&e.setAttributes({[Lt]:t.responseTexts.join("")}),n&&t.toolCalls.length>0&&e.setAttributes({[cn]:JSON.stringify(t.toolCalls)}),e.end())}async function*FR(t,e,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const i of t)qy(i,r,n,e),yield i}finally{r.responseId&&e.setAttributes({[Di]:r.responseId}),r.responseModel&&e.setAttributes({[ar]:r.responseModel}),kd(e,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),e.setAttributes({[ac]:!0}),r.finishReasons.length>0&&e.setAttributes({[or]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&e.setAttributes({[Lt]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&e.setAttributes({[cn]:JSON.stringify(r.toolCalls)}),e.end()}}function UR(t,e,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return t.on("streamEvent",i=>{qy(i,r,n,e)}),t.on("message",()=>{$R(r,e,n)}),t.on("error",i=>{Pe(i,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),e.isRecording()&&(e.setStatus({code:pe,message:"stream_error"}),e.end())}),t}const BR=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function HR(t){return BR.includes(t)}function WR(t,e){e.error&&(t.setStatus({code:pe,message:e.error.type||"internal_error"}),Pe(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function jR(t){const{system:e,messages:n}=t,r=typeof e=="string"?[{role:"system",content:t.system}]:[],i=Array.isArray(n)?n:n!=null?[n]:[];return[...r,...i]}function qR(t,e){const n={[nc]:"anthropic",[Zn]:Bs(e),[re]:"auto.ai.anthropic"};if(t.length>0&&typeof t[0]=="object"&&t[0]!==null){const r=t[0];r.tools&&Array.isArray(r.tools)&&(n[oc]=JSON.stringify(r.tools)),n[yt]=r.model??"unknown","temperature"in r&&(n[rc]=r.temperature),"top_p"in r&&(n[sc]=r.top_p),"stream"in r&&(n[Sd]=r.stream),"top_k"in r&&(n[Fy]=r.top_k),"frequency_penalty"in r&&(n[ic]=r.frequency_penalty),"max_tokens"in r&&(n[Ed]=r.max_tokens)}else e==="models.retrieve"||e==="models.get"?n[yt]=t[0]:n[yt]="unknown";return n}function al(t,e){const n=jR(e);if(n.length){const r=Tr(n);t.setAttributes({[tn]:r})}if("input"in e){const r=Tr(e.input);t.setAttributes({[tn]:r})}"prompt"in e&&t.setAttributes({[z1]:JSON.stringify(e.prompt)})}function zR(t,e){if("content"in e&&Array.isArray(e.content)){t.setAttributes({[Lt]:e.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of e.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&t.setAttributes({[cn]:JSON.stringify(n)})}"completion"in e&&t.setAttributes({[Lt]:e.completion}),"input_tokens"in e&&t.setAttributes({[Lt]:JSON.stringify(e.input_tokens)})}function GR(t,e){"id"in e&&"model"in e&&(t.setAttributes({[Di]:e.id,[ar]:e.model}),"created"in e&&typeof e.created=="number"&&t.setAttributes({[hh]:new Date(e.created*1e3).toISOString()}),"created_at"in e&&typeof e.created_at=="number"&&t.setAttributes({[hh]:new Date(e.created_at*1e3).toISOString()}),"usage"in e&&e.usage&&kd(t,e.usage.input_tokens,e.usage.output_tokens,e.usage.cache_creation_input_tokens,e.usage.cache_read_input_tokens))}function VR(t,e,n){if(!(!e||typeof e!="object")){if("type"in e&&e.type==="error"){WR(t,e);return}n&&zR(t,e),GR(t,e)}}function yh(t,e,n){throw Pe(t,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),e.isRecording()&&(e.setStatus({code:pe,message:"internal_error"}),e.end()),t}function YR(t,e,n,r,i,s,o,a,c,u,l){const d=i[yt]??"unknown",f={name:`${s} ${d} stream-response`,op:wa(o),attributes:i};return u&&!l?_n(f,async p=>{try{c.recordInputs&&a&&al(p,a);const h=await t.apply(n,r);return FR(h,p,c.recordOutputs??!1)}catch(h){return yh(h,p,o)}}):_n(f,p=>{try{c.recordInputs&&a&&al(p,a);const h=e.apply(n,r);return UR(h,p,c.recordOutputs??!1)}catch(h){return yh(h,p,o)}})}function JR(t,e,n,r){return new Proxy(t,{apply(i,s,o){const a=qR(o,e),c=a[yt]??"unknown",u=Bs(e),l=typeof o[0]=="object"?o[0]:void 0,d=!!l?.stream,f=e==="messages.stream";return d||f?YR(t,i,n,o,a,u,e,l,r,d,f):Pn({name:`${u} ${c}`,op:wa(e),attributes:a},p=>(r.recordInputs&&l&&al(p,l),Za(()=>i.apply(n,o),h=>{Pe(h,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:e}}})},()=>{},h=>VR(p,h,r.recordOutputs))))}})}function zy(t,e="",n){return new Proxy(t,{get(r,i){const s=r[i],o=Wy(e,String(i));return typeof s=="function"&&HR(o)?JR(s,o,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?zy(s,o,n):s}})}function KR(t,e){const n=!!$()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...e};return zy(t,"",r)}const vh=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],XR="google_genai",Gy="chats.create",ZR="chat";function QR(t,e){const n=t?.promptFeedback;if(n?.blockReason){const r=n.blockReasonMessage??n.blockReason;return e.setStatus({code:pe,message:`Content blocked: ${r}`}),Pe(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function ex(t,e){typeof t.responseId=="string"&&(e.responseId=t.responseId),typeof t.modelVersion=="string"&&(e.responseModel=t.modelVersion);const n=t.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(e.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(e.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(e.totalTokens=n.totalTokenCount))}function tx(t,e,n){Array.isArray(t.functionCalls)&&e.toolCalls.push(...t.functionCalls);for(const r of t.candidates??[]){r?.finishReason&&!e.finishReasons.includes(r.finishReason)&&e.finishReasons.push(r.finishReason);for(const i of r?.content?.parts??[])n&&i.text&&e.responseTexts.push(i.text),i.functionCall&&e.toolCalls.push({type:"function",id:i.functionCall.id,name:i.functionCall.name,arguments:i.functionCall.args})}}function nx(t,e,n,r){!t||QR(t,r)||(ex(t,e),tx(t,e,n))}async function*rx(t,e,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const i of t)nx(i,r,n,e),yield i}finally{const i={[ac]:!0};r.responseId&&(i[Di]=r.responseId),r.responseModel&&(i[ar]=r.responseModel),r.promptTokens!==void 0&&(i[Or]=r.promptTokens),r.completionTokens!==void 0&&(i[Nr]=r.completionTokens),r.totalTokens!==void 0&&(i[Lr]=r.totalTokens),r.finishReasons.length&&(i[or]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(i[Lt]=r.responseTexts.join("")),n&&r.toolCalls.length&&(i[cn]=JSON.stringify(r.toolCalls)),e.setAttributes(i),e.end()}}function ix(t){if(vh.includes(t))return!0;const e=t.split(".").pop();return vh.includes(e)}function sx(t){return t.includes("Stream")||t.endsWith("generateContentStream")||t.endsWith("sendMessageStream")}function bh(t,e){if("model"in t&&typeof t.model=="string")return t.model;if(e&&typeof e=="object"){const n=e;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function ox(t){const e={};return"temperature"in t&&typeof t.temperature=="number"&&(e[rc]=t.temperature),"topP"in t&&typeof t.topP=="number"&&(e[sc]=t.topP),"topK"in t&&typeof t.topK=="number"&&(e[Fy]=t.topK),"maxOutputTokens"in t&&typeof t.maxOutputTokens=="number"&&(e[Ed]=t.maxOutputTokens),"frequencyPenalty"in t&&typeof t.frequencyPenalty=="number"&&(e[ic]=t.frequencyPenalty),"presencePenalty"in t&&typeof t.presencePenalty=="number"&&(e[wd]=t.presencePenalty),e}function ax(t,e,n){const r={[nc]:XR,[Zn]:Bs(t),[re]:"auto.ai.google_genai"};if(e){if(r[yt]=bh(e,n),"config"in e&&typeof e.config=="object"&&e.config){const i=e.config;if(Object.assign(r,ox(i)),"tools"in i&&Array.isArray(i.tools)){const s=i.tools.flatMap(o=>o.functionDeclarations);r[oc]=JSON.stringify(s)}}}else r[yt]=bh({},n);return r}function Sh(t,e){if("contents"in e){const n=e.contents,r=Tr(n);t.setAttributes({[tn]:r})}if("message"in e){const n=e.message,r=Tr(n);t.setAttributes({[tn]:r})}if("history"in e){const n=e.history,r=Tr(n);t.setAttributes({[tn]:r})}}function cx(t,e,n){if(!(!e||typeof e!="object")){if(e.usageMetadata&&typeof e.usageMetadata=="object"){const r=e.usageMetadata;typeof r.promptTokenCount=="number"&&t.setAttributes({[Or]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&t.setAttributes({[Nr]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&t.setAttributes({[Lr]:r.totalTokenCount})}if(n&&Array.isArray(e.candidates)&&e.candidates.length>0){const r=e.candidates.map(i=>i.content?.parts&&Array.isArray(i.content.parts)?i.content.parts.map(s=>typeof s.text=="string"?s.text:"").filter(s=>s.length>0).join(""):"").filter(i=>i.length>0);r.length>0&&t.setAttributes({[Lt]:r.join("")})}if(n&&e.functionCalls){const r=e.functionCalls;Array.isArray(r)&&r.length>0&&t.setAttributes({[cn]:JSON.stringify(r)})}}}function Eh(t,e,n,r){const i=e===Gy;return new Proxy(t,{apply(s,o,a){const c=a[0],u=ax(e,c,n),l=u[yt]??"unknown",d=Bs(e);return sx(e)?_n({name:`${d} ${l} stream-response`,op:wa(e),attributes:u},async f=>{try{r.recordInputs&&c&&Sh(f,c);const p=await s.apply(n,a);return rx(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:pe,message:"internal_error"}),Pe(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:e}}}),f.end(),p}}):Pn({name:i?`${d} ${l} create`:`${d} ${l}`,op:wa(e),attributes:u},f=>(r.recordInputs&&c&&Sh(f,c),Za(()=>s.apply(n,a),p=>{Pe(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:e}}})},()=>{},p=>{i||cx(f,p,r.recordOutputs)})))}})}function cl(t,e="",n){return new Proxy(t,{get:(r,i,s)=>{const o=Reflect.get(r,i,s),a=Wy(e,String(i));if(typeof o=="function"&&ix(a)){if(a===Gy){const c=Eh(o,a,r,n);return function(...l){const d=c(...l);return d&&typeof d=="object"?cl(d,ZR,n):d}}return Eh(o,a,r,n)}return typeof o=="function"?o.bind(r):o&&typeof o=="object"?cl(o,a,n):o}})}function ux(t,e){const n=!!$()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...e};return cl(t,"",r)}const os="auto.ai.langchain",lx={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},mn=(t,e,n)=>{n!=null&&(t[e]=n)},wt=(t,e,n)=>{const r=Number(n);Number.isNaN(r)||(t[e]=r)};function mt(t){if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}function Xi(t){const e=t.toLowerCase();return lx[e]??e}function wh(t){return t.includes("System")?"system":t.includes("Human")?"user":t.includes("AI")||t.includes("Assistant")?"assistant":t.includes("Function")?"function":t.includes("Tool")?"tool":"user"}function Th(t){if(!(!t||Array.isArray(t)))return t.invocation_params}function Cd(t){return t.map(e=>{const n=e._getType;if(typeof n=="function"){const i=n.call(e);return{role:Xi(i),content:mt(e.content)}}const r=e.constructor?.name;if(r)return{role:Xi(wh(r)),content:mt(e.content)};if(e.type){const i=String(e.type).toLowerCase();return{role:Xi(i),content:mt(e.content)}}if(e.role)return{role:Xi(String(e.role)),content:mt(e.content)};if(e.lc===1&&e.kwargs){const i=e.id,s=Array.isArray(i)&&i.length>0?i[i.length-1]:"",o=typeof s=="string"?wh(s):"user";return{role:Xi(o),content:mt(e.kwargs?.content)}}return{role:"user",content:mt(e.content)}})}function dx(t,e,n){const r={},i="kwargs"in t?t.kwargs:void 0,s=e?.temperature??n?.ls_temperature??i?.temperature;wt(r,rc,s);const o=e?.max_tokens??n?.ls_max_tokens??i?.max_tokens;wt(r,Ed,o);const a=e?.top_p??i?.top_p;wt(r,sc,a);const c=e?.frequency_penalty;wt(r,ic,c);const u=e?.presence_penalty;return wt(r,wd,u),e&&"stream"in e&&mn(r,Sd,!!e.stream),r}function Vy(t,e,n,r,i,s){return{[nc]:mt(t??"langchain"),[Zn]:n,[yt]:mt(e),[re]:os,...dx(r,i,s)}}function fx(t,e,n,r,i){const s=i?.ls_provider,o=r?.model??i?.ls_model_name??"unknown",a=Vy(s,o,"pipeline",t,r,i);if(n&&Array.isArray(e)&&e.length>0){const c=e.map(u=>({role:"user",content:u}));mn(a,tn,mt(c))}return a}function px(t,e,n,r,i){const s=i?.ls_provider??t.id?.[2],o=r?.model??i?.ls_model_name??"unknown",a=Vy(s,o,"chat",t,r,i);if(n&&Array.isArray(e)&&e.length>0){const c=Cd(e.flat()),u=Id(c);mn(a,tn,mt(u))}return a}function hx(t,e){const n=[],r=t.flat();for(const i of r){const s=i.message?.content;if(Array.isArray(s))for(const o of s){const a=o;a.type==="tool_use"&&n.push(a)}}n.length>0&&mn(e,cn,mt(n))}function gx(t,e){if(!t)return;const n=t.tokenUsage,r=t.usage;if(n)wt(e,Or,n.promptTokens),wt(e,Nr,n.completionTokens),wt(e,Lr,n.totalTokens);else if(r){wt(e,Or,r.input_tokens),wt(e,Nr,r.output_tokens);const i=Number(r.input_tokens),s=Number(r.output_tokens),o=(Number.isNaN(i)?0:i)+(Number.isNaN(s)?0:s);o>0&&wt(e,Lr,o),r.cache_creation_input_tokens!==void 0&&wt(e,K1,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&wt(e,X1,r.cache_read_input_tokens)}}function mx(t,e){if(!t)return;const n={};if(Array.isArray(t.generations)){const u=t.generations.flat().map(l=>l.generationInfo?.finish_reason?l.generationInfo.finish_reason:l.generation_info?.finish_reason?l.generation_info.finish_reason:null).filter(l=>typeof l=="string");if(u.length>0&&mn(n,or,mt(u)),hx(t.generations,n),e){const l=t.generations.flat().map(d=>d.text??d.message?.content).filter(d=>typeof d=="string");l.length>0&&mn(n,Lt,mt(l))}}gx(t.llmOutput,n);const r=t.llmOutput,s=t.generations?.[0]?.[0]?.message,o=r?.model_name??r?.model??s?.response_metadata?.model_name;o&&mn(n,ar,o);const a=r?.id??s?.id;a&&mn(n,Di,a);const c=r?.stop_reason??s?.response_metadata?.finish_reason;return c&&mn(n,Y1,mt(c)),n}function _x(t={}){const e=t.recordInputs??!1,n=t.recordOutputs??!1,r=new Map,i=o=>{const a=r.get(o);a?.isRecording()&&(a.end(),r.delete(o))},s={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(o,a,c,u,l,d,f,p){const h=Th(d),g=fx(o,a,e,h,f),m=g[yt],_=g[Zn];_n({name:`${_} ${m}`,op:"gen_ai.pipeline",attributes:{...g,[Te]:"gen_ai.pipeline"}},v=>(r.set(c,v),v))},handleChatModelStart(o,a,c,u,l,d,f,p){const h=Th(d),g=px(o,a,e,h,f),m=g[yt],_=g[Zn];_n({name:`${_} ${m}`,op:"gen_ai.chat",attributes:{...g,[Te]:"gen_ai.chat"}},v=>(r.set(c,v),v))},handleLLMEnd(o,a,c,u,l){const d=r.get(a);if(d?.isRecording()){const f=mx(o,n);f&&d.setAttributes(f),i(a)}},handleLLMError(o,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:pe,message:"llm_error"}),i(a)),Pe(o,{mechanism:{handled:!1,type:`${os}.llm_error_handler`}})},handleChainStart(o,a,c,u){const l=o.name||"unknown_chain",d={[re]:"auto.ai.langchain","langchain.chain.name":l};e&&(d["langchain.chain.inputs"]=JSON.stringify(a)),_n({name:`chain ${l}`,op:"gen_ai.invoke_agent",attributes:{...d,[Te]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(o,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(o)}),i(a))},handleChainError(o,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:pe,message:"chain_error"}),i(a)),Pe(o,{mechanism:{handled:!1,type:`${os}.chain_error_handler`}})},handleToolStart(o,a,c,u){const l=o.name||"unknown_tool",d={[re]:os,"gen_ai.tool.name":l};e&&(d["gen_ai.tool.input"]=a),_n({name:`execute_tool ${l}`,op:"gen_ai.execute_tool",attributes:{...d,[Te]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(o,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"gen_ai.tool.output":JSON.stringify(o)}),i(a))},handleToolError(o,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:pe,message:"tool_error"}),i(a)),Pe(o,{mechanism:{handled:!1,type:`${os}.tool_error_handler`}})},copy(){return s},toJSON(){return{lc:1,type:"not_implemented",id:s.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:s.lc_id}}};return s}const Yy="auto.ai.langgraph";function yx(t){if(!t||t.length===0)return null;const e=[];for(const n of t)if(n&&typeof n=="object"){const r=n.tool_calls;r&&Array.isArray(r)&&e.push(...r)}return e.length>0?e:null}function vx(t){const e=t;let n=0,r=0,i=0;if(e.usage_metadata&&typeof e.usage_metadata=="object"){const s=e.usage_metadata;return typeof s.input_tokens=="number"&&(n=s.input_tokens),typeof s.output_tokens=="number"&&(r=s.output_tokens),typeof s.total_tokens=="number"&&(i=s.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:i}}if(e.response_metadata&&typeof e.response_metadata=="object"){const s=e.response_metadata;if(s.tokenUsage&&typeof s.tokenUsage=="object"){const o=s.tokenUsage;typeof o.promptTokens=="number"&&(n=o.promptTokens),typeof o.completionTokens=="number"&&(r=o.completionTokens),typeof o.totalTokens=="number"&&(i=o.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:i}}function bx(t,e){const n=e;if(n.response_metadata&&typeof n.response_metadata=="object"){const r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&t.setAttribute(ar,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&t.setAttribute(or,[r.finish_reason])}}function Sx(t){if(!t.builder?.nodes?.tools?.runnable?.tools)return null;const e=t.builder?.nodes?.tools?.runnable?.tools;return!e||!Array.isArray(e)||e.length===0?null:e.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function Ex(t,e,n){const i=n?.messages;if(!i||!Array.isArray(i))return;const s=e?.length??0,o=i.length>s?i.slice(s):[];if(o.length===0)return;const a=yx(o);a&&t.setAttribute(cn,JSON.stringify(a));const c=Cd(o);t.setAttribute(Lt,JSON.stringify(c));let u=0,l=0,d=0;for(const f of o){const p=vx(f);u+=p.inputTokens,l+=p.outputTokens,d+=p.totalTokens,bx(t,f)}u>0&&t.setAttribute(Or,u),l>0&&t.setAttribute(Nr,l),d>0&&t.setAttribute(Lr,d)}function wx(t,e){return new Proxy(t,{apply(n,r,i){return Pn({op:"gen_ai.create_agent",name:"create_agent",attributes:{[re]:Yy,[Te]:"gen_ai.create_agent",[Zn]:"create_agent"}},s=>{try{const o=Reflect.apply(n,r,i),a=i.length>0?i[0]:{};a?.name&&typeof a.name=="string"&&(s.setAttribute(Uy,a.name),s.updateName(`create_agent ${a.name}`));const c=o.invoke;return c&&typeof c=="function"&&(o.invoke=Tx(c.bind(o),o,a,e)),o}catch(o){throw s.setStatus({code:pe,message:"internal_error"}),Pe(o,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),o}})}})}function Tx(t,e,n,r){return new Proxy(t,{apply(i,s,o){return Pn({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[re]:Yy,[Te]:Z1,[Zn]:"invoke_agent"}},async a=>{try{const c=n?.name;c&&typeof c=="string"&&(a.setAttribute(J1,c),a.setAttribute(Uy,c),a.updateName(`invoke_agent ${c}`));const u=Sx(e);u&&a.setAttribute(oc,JSON.stringify(u));const l=r.recordInputs,d=r.recordOutputs,f=o.length>0?o[0].messages??[]:[];if(f&&l){const h=Cd(f),g=Id(h);a.setAttribute(tn,JSON.stringify(g))}const p=await Reflect.apply(i,s,o);return d&&Ex(a,f??null,p),p}catch(c){throw a.setStatus({code:pe,message:"internal_error"}),Pe(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function Ix(t,e){const n=e||{};return t.compile=wx(t.compile.bind(t),n),t}function Jy(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const yi=G;function kx(){return"history"in yi&&!!yi.history}function Rx(){if(!("fetch"in yi))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function ul(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Ky(){if(typeof EdgeRuntime=="string")return!0;if(!Rx())return!1;if(ul(yi.fetch))return!0;let t=!1;const e=yi.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow?.fetch&&(t=ul(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){L&&y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function xx(){return"ReportingObserver"in yi}function Ad(t,e){const n="fetch";nr(n,t),rr(n,()=>Xy(void 0,e))}function Cx(t){const e="fetch-body-resolved";nr(e,t),rr(e,()=>Xy(Mx))}function Xy(t,e=!1){e&&!Ky()||rt(G,"fetch",function(n){return function(...r){const i=new Error,{method:s,url:o}=Px(r),a={args:r,fetchData:{method:s,url:o},startTimestamp:Ce()*1e3,virtualError:i,headers:Ox(r)};return t||Pt("fetch",{...a}),n.apply(G,r).then(async c=>(t?t(c):Pt("fetch",{...a,endTimestamp:Ce()*1e3,response:c}),c),c=>{if(Pt("fetch",{...a,endTimestamp:Ce()*1e3,error:c}),bn(c)&&c.stack===void 0&&(c.stack=i.stack,Je(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function Ax(t,e){if(t?.body){const n=t.body,r=n.getReader(),i=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let s=!0;for(;s;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(o),a&&(e(),s=!1)}catch{s=!1}finally{clearTimeout(o)}}clearTimeout(i),r.releaseLock(),n.cancel().then(null,()=>{})}}function Mx(t){let e;try{e=t.clone()}catch{return}Ax(e,()=>{Pt("fetch-body-resolved",{endTimestamp:Ce()*1e3,response:t})})}function ll(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Ih(t){return typeof t=="string"?t:t?ll(t,"url")?t.url:t.toString?t.toString():"":""}function Px(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:Ih(n),method:ll(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:Ih(e),method:ll(e,"method")?String(e.method).toUpperCase():"GET"}}function Ox(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(h_(e))return new Headers(e.headers)}catch{}}function Nx(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Lx(){return"npm"}function Dx(){return!Nx()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Ta(){return typeof window<"u"&&(!Dx()||$x())}function $x(){return G.process?.type==="renderer"}const Bt=G,Se=Bt.document,as=Bt.navigator,Zy="Report a Bug",Fx="Cancel",Ux="Send Bug Report",Bx="Confirm",Hx="Report a Bug",Wx="your.email@example.org",jx="Email",qx="What's the bug? What did you expect?",zx="Description",Gx="Your Name",Vx="Name",Yx="Thank you for your report!",Jx="(required)",Kx="Add a screenshot",Xx="Remove screenshot",Zx="Highlight",Qx="Hide",eC="Remove",tC="widget",nC="api",rC=5e3,Qy=(t,e={includeReplay:!0})=>{if(!t.message)throw new Error("Unable to submit feedback with empty message");const n=$();if(!n)throw new Error("No client setup, cannot send feedback.");t.tags&&Object.keys(t.tags).length&&ne().setTags(t.tags);const r=$y({source:nC,url:Ur(),...t},e);return new Promise((i,s)=>{const o=setTimeout(()=>s("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(o),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?i(r):u?.statusCode===403?s("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):s("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},$o=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function iC(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(as.userAgent)||/Macintosh/i.test(as.userAgent)&&as.maxTouchPoints&&as.maxTouchPoints>1||!isSecureContext)}function fo(t,e){return{...t,...e,tags:{...t.tags,...e.tags},onFormOpen:()=>{e.onFormOpen?.(),t.onFormOpen?.()},onFormClose:()=>{e.onFormClose?.(),t.onFormClose?.()},onSubmitSuccess:(n,r)=>{e.onSubmitSuccess?.(n,r),t.onSubmitSuccess?.(n,r)},onSubmitError:n=>{e.onSubmitError?.(n),t.onSubmitError?.(n)},onFormSubmitted:()=>{e.onFormSubmitted?.(),t.onFormSubmitted?.()},themeDark:{...t.themeDark,...e.themeDark},themeLight:{...t.themeLight,...e.themeLight}}}function sC(t){const e=Se.createElement("style");return e.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,t&&e.setAttribute("nonce",t),e}function kt(t,e){return Object.entries(e).forEach(([n,r])=>{t.setAttributeNS(null,n,r)}),t}const qr=20,oC="http://www.w3.org/2000/svg";function aC(){const t=a=>Bt.document.createElementNS(oC,a),e=kt(t("svg"),{width:`${qr}`,height:`${qr}`,viewBox:`0 0 ${qr} ${qr}`,fill:"var(--actor-color, var(--foreground))"}),n=kt(t("g"),{clipPath:"url(#clip0_57_80)"}),r=kt(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});e.appendChild(n).appendChild(r);const i=t("defs"),s=kt(t("clipPath"),{id:"clip0_57_80"}),o=kt(t("rect"),{width:`${qr}`,height:`${qr}`,fill:"white"});return s.appendChild(o),i.appendChild(s),e.appendChild(i).appendChild(s).appendChild(o),e}function cC({triggerLabel:t,triggerAriaLabel:e,shadow:n,styleNonce:r}){const i=Se.createElement("button");if(i.type="button",i.className="widget__actor",i.ariaHidden="false",i.ariaLabel=e||t||Zy,i.appendChild(aC()),t){const o=Se.createElement("span");o.appendChild(Se.createTextNode(t)),i.appendChild(o)}const s=sC(r);return{el:i,appendToDom(){n.appendChild(s),n.appendChild(i)},removeFromDom(){i.remove(),s.remove()},show(){i.ariaHidden="false"},hide(){i.ariaHidden="true"}}}const ev="rgba(88, 74, 192, 1)",uC={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:ev,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},kh={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:ev,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Rh(t){return`
  --foreground: ${t.foreground};
  --background: ${t.background};
  --accent-foreground: ${t.accentForeground};
  --accent-background: ${t.accentBackground};
  --success-color: ${t.successColor};
  --error-color: ${t.errorColor};
  --border: ${t.border};
  --box-shadow: ${t.boxShadow};
  --outline: ${t.outline};
  --interactive-filter: ${t.interactiveFilter};
  `}function lC({colorScheme:t,themeDark:e,themeLight:n,styleNonce:r}){const i=Se.createElement("style");return i.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${t!=="system"?"color-scheme: only light;":""}

  ${Rh(t==="dark"?{...kh,...e}:{...uC,...n})}
}

${t==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Rh({...kh,...e})}
  }
}`:""}
}
`,r&&i.setAttribute("nonce",r),i}const tv=({lazyLoadIntegration:t,getModalIntegration:e,getScreenshotIntegration:n})=>(({id:i="sentry-feedback",autoInject:s=!0,showBranding:o=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:l=!0,enableScreenshot:d=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:g,colorScheme:m="system",themeLight:_={},themeDark:v={},addScreenshotButtonLabel:I=Kx,cancelButtonLabel:E=Fx,confirmButtonLabel:C=Bx,emailLabel:A=jx,emailPlaceholder:S=Wx,formTitle:w=Hx,isRequiredLabel:W=Jx,messageLabel:T=zx,messagePlaceholder:M=qx,nameLabel:R=Vx,namePlaceholder:O=Gx,removeScreenshotButtonLabel:U=Xx,submitButtonLabel:Y=Ux,successMessageText:ee=Yx,triggerLabel:se=Zy,triggerAriaLabel:k="",highlightToolText:z=Zx,hideToolText:x=Qx,removeHighlightText:V=eC,onFormOpen:J,onFormClose:K,onSubmitSuccess:ce,onSubmitError:Me,onFormSubmitted:qe}={})=>{const ze={id:i,autoInject:s,showBranding:o,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:l,enableScreenshot:d,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:g,colorScheme:m,themeDark:v,themeLight:_,triggerLabel:se,triggerAriaLabel:k,cancelButtonLabel:E,submitButtonLabel:Y,confirmButtonLabel:C,formTitle:w,emailLabel:A,emailPlaceholder:S,messageLabel:T,messagePlaceholder:M,nameLabel:R,namePlaceholder:O,successMessageText:ee,isRequiredLabel:W,addScreenshotButtonLabel:I,removeScreenshotButtonLabel:U,highlightToolText:z,hideToolText:x,removeHighlightText:V,onFormClose:K,onFormOpen:J,onSubmitError:Me,onSubmitSuccess:ce,onFormSubmitted:qe};let Xe=null,ft=[];const Ge=ue=>{if(!Xe){const ye=Se.createElement("div");ye.id=String(ue.id),Se.body.appendChild(ye),Xe=ye.attachShadow({mode:"open"}),Xe.appendChild(lC(ue))}return Xe},un=async ue=>{const ye=ue.enableScreenshot&&iC();let at,Ue;try{at=(e?e():await t("feedbackModalIntegration",g))(),rl(at)}catch{throw $o&&y.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const Vt=ye?n?n():await t("feedbackScreenshotIntegration",g):void 0;Vt&&(Ue=Vt(),rl(Ue))}catch{$o&&y.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const it=at.createDialog({options:{...ue,onFormClose:()=>{it?.close(),ue.onFormClose?.()},onFormSubmitted:()=>{it?.close(),ue.onFormSubmitted?.()}},screenshotIntegration:Ue,sendFeedback:Qy,shadow:Ge(ue)});return it},j=(ue,ye={})=>{const at=fo(ze,ye),Ue=typeof ue=="string"?Se.querySelector(ue):typeof ue.addEventListener=="function"?ue:null;if(!Ue)throw $o&&y.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let it=null;const Vt=async()=>{it||(it=await un({...at,onFormSubmitted:()=>{it?.removeFromDom(),at.onFormSubmitted?.()}})),it.appendToDom(),it.open()};Ue.addEventListener("click",Vt);const de=()=>{ft=ft.filter(Et=>Et!==de),it?.removeFromDom(),it=null,Ue.removeEventListener("click",Vt)};return ft.push(de),de},St=(ue={})=>{const ye=fo(ze,ue),at=Ge(ye),Ue=cC({triggerLabel:ye.triggerLabel,triggerAriaLabel:ye.triggerAriaLabel,shadow:at,styleNonce:h});return j(Ue.el,{...ye,onFormOpen(){Ue.hide()},onFormClose(){Ue.show()},onFormSubmitted(){Ue.show()}}),Ue};return{name:"Feedback",setupOnce(){!Ta()||!ze.autoInject||(Se.readyState==="loading"?Se.addEventListener("DOMContentLoaded",()=>St().appendToDom()):St().appendToDom())},attachTo:j,createWidget(ue={}){const ye=St(fo(ze,ue));return ye.appendToDom(),ye},async createForm(ue={}){return un(fo(ze,ue))},remove(){Xe&&(Xe.parentElement?.remove(),Xe=null),ft.forEach(ue=>ue()),ft=[]}}});function dC(){return $()?.getIntegrationByName("Feedback")}var uc,Ie,nv,gr,xh,rv,dl,Is={},Md=[],fC=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Pd=Array.isArray;function Hn(t,e){for(var n in e)t[n]=e[n];return t}function iv(t){var e=t.parentNode;e&&e.removeChild(t)}function ae(t,e,n){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?uc.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Fo(t,o,r,i,null)}function Fo(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++nv,__i:-1,__u:0};return i==null&&Ie.vnode!=null&&Ie.vnode(s),s}function Hs(t){return t.children}function Uo(t,e){this.props=t,this.context=e}function vi(t,e){if(e==null)return t.__?vi(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?vi(t):null}function pC(t,e,n){var r,i=t.__v,s=i.__e,o=t.__P;if(o)return(r=Hn({},i)).__v=i.__v+1,Ie.vnode&&Ie.vnode(r),Od(o,r,i,t.__n,o.ownerSVGElement!==void 0,32&i.__u?[s]:null,e,s??vi(i),!!(32&i.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&sv(r),r}function sv(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return sv(t)}}function Ch(t){(!t.__d&&(t.__d=!0)&&gr.push(t)&&!Ia.__r++||xh!==Ie.debounceRendering)&&((xh=Ie.debounceRendering)||rv)(Ia)}function Ia(){var t,e,n,r=[],i=[];for(gr.sort(dl);t=gr.shift();)t.__d&&(n=gr.length,e=pC(t,r,i)||e,n===0||gr.length>n?(fl(r,e,i),i.length=r.length=0,e=void 0,gr.sort(dl)):e&&Ie.__c&&Ie.__c(e,Md));e&&fl(r,e,i),Ia.__r=0}function ov(t,e,n,r,i,s,o,a,c,u,l){var d,f,p,h,g,m=r&&r.__k||Md,_=e.length;for(n.__d=c,hC(n,e,m),c=n.__d,d=0;d<_;d++)(p=n.__k[d])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Is:m[p.__i]||Is,p.__i=d,Od(t,p,f,i,s,o,a,c,u,l),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Nd(f.ref,null,p),l.push(p.ref,p.__c||h,p)),g==null&&h!=null&&(g=h),65536&p.__u||f.__k===p.__k?c=av(p,c,t):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=g}function hC(t,e,n){var r,i,s,o,a,c=e.length,u=n.length,l=u,d=0;for(t.__k=[],r=0;r<c;r++)(i=t.__k[r]=(i=e[r])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Fo(null,i,null,null,i):Pd(i)?Fo(Hs,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?Fo(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=t,i.__b=t.__b+1,a=gC(i,n,o=r+d,l),i.__i=a,s=null,a!==-1&&(l--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&d--,typeof i.type!="function"&&(i.__u|=65536)):a!==o&&(a===o+1?d++:a>o?l>c-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==r+d&&(i.__u|=65536))):(s=n[r])&&s.key==null&&s.__e&&(s.__e==t.__d&&(t.__d=vi(s)),pl(s,s,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)(s=n[r])!=null&&(131072&s.__u)==0&&(s.__e==t.__d&&(t.__d=vi(s)),pl(s,s))}function av(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=av(r[i],e,n));return e}t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function gC(t,e,n,r){var i=t.key,s=t.type,o=n-1,a=n+1,c=e[n];if(c===null||c&&i==c.key&&s===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;o>=0||a<e.length;){if(o>=0){if((c=e[o])&&(131072&c.__u)==0&&i==c.key&&s===c.type)return o;o--}if(a<e.length){if((c=e[a])&&(131072&c.__u)==0&&i==c.key&&s===c.type)return a;a++}}return-1}function Ah(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||fC.test(e)?n:n+"px"}function po(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Ah(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Ah(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=Date.now(),t.addEventListener(e,s?Ph:Mh,s)):t.removeEventListener(e,s?Ph:Mh,s);else{if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function Mh(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(Ie.event?Ie.event(t):t)}}function Ph(t){if(this.l)return this.l[t.type+!0](Ie.event?Ie.event(t):t)}function Od(t,e,n,r,i,s,o,a,c,u){var l,d,f,p,h,g,m,_,v,I,E,C,A,S,w,W=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=e.__e=n.__e]),(l=Ie.__b)&&l(e);e:if(typeof W=="function")try{if(_=e.props,v=(l=W.contextType)&&r[l.__c],I=l?v?v.props.value:l.__:r,n.__c?m=(d=e.__c=n.__c).__=d.__E:("prototype"in W&&W.prototype.render?e.__c=d=new W(_,I):(e.__c=d=new Uo(_,I),d.constructor=W,d.render=_C),v&&v.sub(d),d.props=_,d.state||(d.state={}),d.context=I,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),W.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Hn({},d.__s)),Hn(d.__s,W.getDerivedStateFromProps(_,d.__s))),p=d.props,h=d.state,d.__v=e,f)W.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(W.getDerivedStateFromProps==null&&_!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(_,I),!d.__e&&(d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(_,d.__s,I)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(T){T&&(T.__=e)}),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(_,d.__s,I),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,h,g)})}if(d.context=I,d.props=_,d.__P=t,d.__e=!1,C=Ie.__r,A=0,"prototype"in W&&W.prototype.render){for(d.state=d.__s,d.__d=!1,C&&C(e),l=d.render(d.props,d.state,d.context),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[]}else do d.__d=!1,C&&C(e),l=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++A<25);d.state=d.__s,d.getChildContext!=null&&(r=Hn(Hn({},r),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(g=d.getSnapshotBeforeUpdate(p,h)),ov(t,Pd(w=l!=null&&l.type===Hs&&l.key==null?l.props.children:l)?w:[w],e,n,r,i,s,o,a,c,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),m&&(d.__E=d.__=null)}catch(T){e.__v=null,c||s!=null?(e.__e=a,e.__u|=c?160:32,s[s.indexOf(a)]=null):(e.__e=n.__e,e.__k=n.__k),Ie.__e(T,e,n)}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=mC(n.__e,e,n,r,i,s,o,c,u);(l=Ie.diffed)&&l(e)}function fl(t,e,n){for(var r=0;r<n.length;r++)Nd(n[r],n[++r],n[++r]);Ie.__c&&Ie.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){Ie.__e(s,i.__v)}})}function mC(t,e,n,r,i,s,o,a,c){var u,l,d,f,p,h,g,m=n.props,_=e.props,v=e.type;if(v==="svg"&&(i=!0),s!=null){for(u=0;u<s.length;u++)if((p=s[u])&&"setAttribute"in p==!!v&&(v?p.localName===v:p.nodeType===3)){t=p,s[u]=null;break}}if(t==null){if(v===null)return document.createTextNode(_);t=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,_.is&&_),s=null,a=!1}if(v===null)m===_||a&&t.data===_||(t.data=_);else{if(s=s&&uc.call(t.childNodes),m=n.props||Is,!a&&s!=null)for(m={},u=0;u<t.attributes.length;u++)m[(p=t.attributes[u]).name]=p.value;for(u in m)p=m[u],u=="children"||(u=="dangerouslySetInnerHTML"?d=p:u==="key"||u in _||po(t,u,null,p,i));for(u in _)p=_[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?l=p:u=="value"?h=p:u=="checked"?g=p:u==="key"||a&&typeof p!="function"||m[u]===p||po(t,u,p,m[u],i);if(l)a||d&&(l.__html===d.__html||l.__html===t.innerHTML)||(t.innerHTML=l.__html),e.__k=[];else if(d&&(t.innerHTML=""),ov(t,Pd(f)?f:[f],e,n,r,i&&v!=="foreignObject",s,o,s?s[0]:n.__k&&vi(n,0),a,c),s!=null)for(u=s.length;u--;)s[u]!=null&&iv(s[u]);a||(u="value",h!==void 0&&(h!==t[u]||v==="progress"&&!h||v==="option"&&h!==m[u])&&po(t,u,h,m[u],!1),u="checked",g!==void 0&&g!==t[u]&&po(t,u,g,m[u],!1))}return t}function Nd(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){Ie.__e(r,n)}}function pl(t,e,n){var r,i;if(Ie.unmount&&Ie.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Nd(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Ie.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&pl(r[i],e,n||typeof t.type!="function");n||t.__e==null||iv(t.__e),t.__=t.__e=t.__d=void 0}function _C(t,e,n){return this.constructor(t,n)}function yC(t,e,n){var r,i,s,o;Ie.__&&Ie.__(t,e),i=(r=!1)?null:e.__k,s=[],o=[],Od(e,t=e.__k=ae(Hs,null,[t]),i||Is,Is,e.ownerSVGElement!==void 0,i?null:e.firstChild?uc.call(e.childNodes):null,s,i?i.__e:e.firstChild,r,o),t.__d=void 0,fl(s,t,o)}uc=Md.slice,Ie={__e:function(t,e,n,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(a){t=a}throw t}},nv=0,Uo.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Hn({},this.state),typeof t=="function"&&(t=t(Hn({},n),this.props)),t&&Hn(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ch(this))},Uo.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ch(this))},Uo.prototype.render=Hs,gr=[],rv=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dl=function(t,e){return t.__v.__b-e.__v.__b},Ia.__r=0;var xn,Ee,Zc,Oh,bi=0,cv=[],Bo=[],Oe=Ie,Nh=Oe.__b,Lh=Oe.__r,Dh=Oe.diffed,$h=Oe.__c,Fh=Oe.unmount,Uh=Oe.__;function Hr(t,e){Oe.__h&&Oe.__h(Ee,t,bi||e),bi=0;var n=Ee.__H||(Ee.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:Bo}),n.__[t]}function _r(t){return bi=1,uv(dv,t)}function uv(t,e,n){var r=Hr(xn++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):dv(void 0,e),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=Ee,!Ee.u)){var i=function(a,c,u){if(!r.__c.__H)return!0;var l=r.__c.__H.__.filter(function(f){return!!f.__c});if(l.every(function(f){return!f.__N}))return!s||s.call(this,a,c,u);var d=!1;return l.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(d=!0)}}),!(!d&&r.__c.props===a)&&(!s||s.call(this,a,c,u))};Ee.u=!0;var s=Ee.shouldComponentUpdate,o=Ee.componentWillUpdate;Ee.componentWillUpdate=function(a,c,u){if(this.__e){var l=s;s=void 0,i(a,c,u),s=l}o&&o.call(this,a,c,u)},Ee.shouldComponentUpdate=i}return r.__N||r.__}function vC(t,e){var n=Hr(xn++,3);!Oe.__s&&Ld(n.__H,e)&&(n.__=t,n.i=e,Ee.__H.__h.push(n))}function lv(t,e){var n=Hr(xn++,4);!Oe.__s&&Ld(n.__H,e)&&(n.__=t,n.i=e,Ee.__h.push(n))}function bC(t){return bi=5,Ws(function(){return{current:t}},[])}function SC(t,e,n){bi=6,lv(function(){return typeof t=="function"?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0},n==null?n:n.concat(t))}function Ws(t,e){var n=Hr(xn++,7);return Ld(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function ai(t,e){return bi=8,Ws(function(){return t},e)}function EC(t){var e=Ee.context[t.__c],n=Hr(xn++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(Ee)),e.props.value):t.__}function wC(t,e){Oe.useDebugValue&&Oe.useDebugValue(e?e(t):t)}function TC(t){var e=Hr(xn++,10),n=_r();return e.__=t,Ee.componentDidCatch||(Ee.componentDidCatch=function(r,i){e.__&&e.__(r,i),n[1](r)}),[n[0],function(){n[1](void 0)}]}function IC(){var t=Hr(xn++,11);if(!t.__){for(var e=Ee.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function kC(){for(var t;t=cv.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ho),t.__H.__h.forEach(hl),t.__H.__h=[]}catch(e){t.__H.__h=[],Oe.__e(e,t.__v)}}Oe.__b=function(t){Ee=null,Nh&&Nh(t)},Oe.__=function(t,e){e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Uh&&Uh(t,e)},Oe.__r=function(t){Lh&&Lh(t),xn=0;var e=(Ee=t.__c).__H;e&&(Zc===Ee?(e.__h=[],Ee.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Bo,n.__N=n.i=void 0})):(e.__h.forEach(Ho),e.__h.forEach(hl),e.__h=[],xn=0)),Zc=Ee},Oe.diffed=function(t){Dh&&Dh(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(cv.push(e)!==1&&Oh===Oe.requestAnimationFrame||((Oh=Oe.requestAnimationFrame)||RC)(kC)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Bo&&(n.__=n.__V),n.i=void 0,n.__V=Bo})),Zc=Ee=null},Oe.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ho),n.__h=n.__h.filter(function(r){return!r.__||hl(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Oe.__e(r,n.__v)}}),$h&&$h(t,e)},Oe.unmount=function(t){Fh&&Fh(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ho(r)}catch(i){e=i}}),n.__H=void 0,e&&Oe.__e(e,n.__v))};var Bh=typeof requestAnimationFrame=="function";function RC(t){var e,n=function(){clearTimeout(r),Bh&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Bh&&(e=requestAnimationFrame(n))}function Ho(t){var e=Ee,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Ee=e}function hl(t){var e=Ee;t.__c=t.__(),Ee=e}function Ld(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function dv(t,e){return typeof e=="function"?e(t):e}const xC=Object.defineProperty({__proto__:null,useCallback:ai,useContext:EC,useDebugValue:wC,useEffect:vC,useErrorBoundary:TC,useId:IC,useImperativeHandle:SC,useLayoutEffect:lv,useMemo:Ws,useReducer:uv,useRef:bC,useState:_r},Symbol.toStringTag,{value:"Module"}),CC="http://www.w3.org/2000/svg";function AC(){const t=r=>Se.createElementNS(CC,r),e=kt(t("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=kt(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return e.appendChild(n),e}function MC({options:t}){const e=Ws(()=>({__html:AC().outerHTML}),[]);return ae("h2",{class:"dialog__header"},ae("span",{class:"dialog__title"},t.formTitle),t.showBranding?ae("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:e}):null)}function PC(t,e){const n=[];return e.isNameRequired&&!t.name&&n.push(e.nameLabel),e.isEmailRequired&&!t.email&&n.push(e.emailLabel),t.message||n.push(e.messageLabel),n}function Qc(t,e){const n=t.get(e);return typeof n=="string"?n.trim():""}function OC({options:t,defaultEmail:e,defaultName:n,onFormClose:r,onSubmit:i,onSubmitSuccess:s,onSubmitError:o,showEmail:a,showName:c,screenshotInput:u}){const{tags:l,addScreenshotButtonLabel:d,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:g,isEmailRequired:m,isNameRequired:_,messageLabel:v,messagePlaceholder:I,nameLabel:E,namePlaceholder:C,submitButtonLabel:A,isRequiredLabel:S}=t,[w,W]=_r(!1),[T,M]=_r(null),[R,O]=_r(!1),U=u?.input,[Y,ee]=_r(null),se=ai(x=>{ee(x),O(!1)},[]),k=ai(x=>{const V=PC(x,{emailLabel:h,isEmailRequired:m,isNameRequired:_,messageLabel:v,nameLabel:E});return V.length>0?M(`Please enter in the following required fields: ${V.join(", ")}`):M(null),V.length===0},[h,m,_,v,E]),z=ai(async x=>{W(!0);try{if(x.preventDefault(),!(x.target instanceof HTMLFormElement))return;const V=new FormData(x.target),J=await(u&&R?u.value():void 0),K={name:Qc(V,"name"),email:Qc(V,"email"),message:Qc(V,"message"),attachments:J?[J]:void 0};if(!k(K))return;try{const ce=await i({name:K.name,email:K.email,message:K.message,source:tC,tags:l},{attachments:K.attachments});s(K,ce)}catch(ce){$o&&y.error(ce),M(ce),o(ce)}}finally{W(!1)}},[u&&R,s,o]);return ae("form",{class:"form",onSubmit:z},U&&R?ae(U,{onError:se}):null,ae("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:w},ae("div",{class:"form__top"},T?ae("div",{class:"form__error-container"},T):null,c?ae("label",{for:"name",class:"form__label"},ae(eu,{label:E,isRequiredLabel:S,isRequired:_}),ae("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:C,required:_,type:"text"})):ae("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?ae("label",{for:"email",class:"form__label"},ae(eu,{label:h,isRequiredLabel:S,isRequired:m}),ae("input",{class:"form__input",defaultValue:e,id:"email",name:"email",placeholder:g,required:m,type:"email"})):ae("input",{"aria-hidden":!0,value:e,name:"email",type:"hidden"}),ae("label",{for:"message",class:"form__label"},ae(eu,{label:v,isRequiredLabel:S,isRequired:!0}),ae("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:I,required:!0,rows:5})),U?ae("label",{for:"screenshot",class:"form__label"},ae("button",{class:"btn btn--default",disabled:w,type:"button",onClick:()=>{ee(null),O(x=>!x)}},R?f:d),Y?ae("div",{class:"form__error-container"},Y.message):null):null),ae("div",{class:"btn-group"},ae("button",{class:"btn btn--primary",disabled:w,type:"submit"},A),ae("button",{class:"btn btn--default",disabled:w,type:"button",onClick:r},p))))}function eu({label:t,isRequired:e,isRequiredLabel:n}){return ae("span",{class:"form__label__text"},t,e&&ae("span",{class:"form__label__text--required"},n))}const ho=16,Hh=17,NC="http://www.w3.org/2000/svg";function LC(){const t=c=>Bt.document.createElementNS(NC,c),e=kt(t("svg"),{width:`${ho}`,height:`${Hh}`,viewBox:`0 0 ${ho} ${Hh}`,fill:"inherit"}),n=kt(t("g"),{clipPath:"url(#clip0_57_156)"}),r=kt(t("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),i=kt(t("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});e.appendChild(n).append(i,r);const s=t("defs"),o=kt(t("clipPath"),{id:"clip0_57_156"}),a=kt(t("rect"),{width:`${ho}`,height:`${ho}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),s.appendChild(o),e.appendChild(s).appendChild(o).appendChild(a),e}function DC({open:t,onFormSubmitted:e,...n}){const r=n.options,i=Ws(()=>({__html:LC().outerHTML}),[]),[s,o]=_r(null),a=ai(()=>{s&&(clearTimeout(s),o(null)),e()},[s]),c=ai((u,l)=>{n.onSubmitSuccess(u,l),o(setTimeout(()=>{e(),o(null)},rC))},[e]);return ae(Hs,null,s?ae("div",{class:"success__position",onClick:a},ae("div",{class:"success__content"},r.successMessageText,ae("span",{class:"success__icon",dangerouslySetInnerHTML:i}))):ae("dialog",{class:"dialog",onClick:r.onFormClose,open:t},ae("div",{class:"dialog__position"},ae("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},ae(MC,{options:r}),ae(OC,{...n,onSubmitSuccess:c})))))}const $C=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,FC=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,UC=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,BC=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,HC=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function WC(t){const e=Se.createElement("style");return e.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${$C}
${FC}
${UC}
${BC}
${HC}
`,t&&e.setAttribute("nonce",t),e}function jC(){const t=ne().getUser(),e=je().getUser(),n=En().getUser();return t&&Object.keys(t).length?t:e&&Object.keys(e).length?e:n}const qC=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:t,screenshotIntegration:e,sendFeedback:n,shadow:r})=>{const i=r,s=t.useSentryUser,o=jC(),a=Se.createElement("div"),c=WC(t.styleNonce);let u="";const l={get el(){return a},appendToDom(){!i.contains(c)&&!i.contains(a)&&(i.appendChild(c),i.appendChild(a))},removeFromDom(){a.remove(),c.remove(),Se.body.style.overflow=u},open(){f(!0),t.onFormOpen?.(),$()?.emit("openFeedbackWidget"),u=Se.body.style.overflow,Se.body.style.overflow="hidden"},close(){f(!1),Se.body.style.overflow=u}},d=e?.createInput({h:ae,hooks:xC,dialog:l,options:t}),f=p=>{yC(ae(DC,{options:t,screenshotInput:d,showName:t.showName||t.isNameRequired,showEmail:t.showEmail||t.isEmailRequired,defaultName:s&&o?.[s.name]||"",defaultEmail:s&&o?.[s.email]||"",onFormClose:()=>{f(!1),t.onFormClose?.()},onSubmit:n,onSubmitSuccess:(h,g)=>{f(!1),t.onSubmitSuccess?.(h,g)},onSubmitError:h=>{t.onSubmitError?.(h)},onFormSubmitted:()=>{t.onFormSubmitted?.()},open:p}),a)};return l}}));function zC({h:t}){return function(){return t("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},t("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),t("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),t("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),t("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function GC(t){const e=Se.createElement("style"),n="#1A141F",r="#302735";return e.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,t&&e.setAttribute("nonce",t),e}function VC({h:t}){return function({action:n,setAction:r,options:i}){return t("div",{class:"editor__tool-container"},t("div",{class:"editor__tool-bar"},t("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},i.highlightToolText),t("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},i.hideToolText)))}}function YC({hooks:t}){function e(){const[n,r]=t.useState(Bt.devicePixelRatio??1);return t.useEffect(()=>{const i=()=>{r(Bt.devicePixelRatio)},s=matchMedia(`(resolution: ${Bt.devicePixelRatio}dppx)`);return s.addEventListener("change",i),()=>{s.removeEventListener("change",i)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:i,onAfterScreenshot:s,onError:o}){const a=e();t.useEffect(()=>{(async()=>{r();const u=await as.mediaDevices.getDisplayMedia({video:{width:Bt.innerWidth*a,height:Bt.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),l=Se.createElement("video");await new Promise((d,f)=>{l.srcObject=u,l.onloadedmetadata=()=>{i(l,a),u.getTracks().forEach(p=>p.stop()),d()},l.play().catch(f)}),s()})().catch(o)},[])}}function JC(t,e,n){switch(t.type){case"highlight":{e.shadowColor="rgba(0, 0, 0, 0.7)",e.shadowBlur=50,e.fillStyle=n,e.fillRect(t.x-1,t.y-1,t.w+2,t.h+2),e.clearRect(t.x,t.y,t.w,t.h);break}case"hide":e.fillStyle="rgb(0, 0, 0)",e.fillRect(t.x,t.y,t.w,t.h);break}}function $n(t,e,n){if(!t)return;const r=t.getContext("2d",e);r&&n(t,r)}function tu(t,e){$n(t,{alpha:!0},(n,r)=>{r.drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height)})}function nu(t,e,n){$n(t,{alpha:!0},(r,i)=>{n.length&&(i.fillStyle="rgba(0, 0, 0, 0.25)",i.fillRect(0,0,r.width,r.height)),n.forEach(s=>{JC(s,i,e)})})}function KC({h:t,hooks:e,outputBuffer:n,dialog:r,options:i}){const s=YC({hooks:e}),o=VC({h:t}),a=zC({h:t}),c={__html:GC(i.styleNonce).innerText},u=r.el.style,l=({screenshot:d})=>{const[f,p]=e.useState("highlight"),[h,g]=e.useState([]),m=e.useRef(null),_=e.useRef(null),v=e.useRef(null),I=e.useRef(null),[E,C]=e.useState(1),A=e.useMemo(()=>{const R=Se.getElementById(i.id);if(!R)return"white";const O=getComputedStyle(R);return O.getPropertyValue("--button-primary-background")||O.getPropertyValue("--accent-background")},[i.id]);e.useLayoutEffect(()=>{const R=()=>{const O=m.current;O&&($n(d.canvas,{alpha:!1},U=>{const Y=Math.min(O.clientWidth/U.width,O.clientHeight/U.height);C(Y)}),(O.clientHeight===0||O.clientWidth===0)&&setTimeout(R,0))};return R(),Bt.addEventListener("resize",R),()=>{Bt.removeEventListener("resize",R)}},[d]);const S=e.useCallback((R,O)=>{$n(R,{alpha:!0},(U,Y)=>{Y.scale(O,O),U.width=d.canvas.width,U.height=d.canvas.height})},[d]);e.useEffect(()=>{S(_.current,d.dpi),tu(_.current,d.canvas)},[d]),e.useEffect(()=>{S(v.current,d.dpi),$n(v.current,{alpha:!0},(R,O)=>{O.clearRect(0,0,R.width,R.height)}),nu(v.current,A,h)},[h,A]),e.useEffect(()=>{S(n,d.dpi),tu(n,d.canvas),$n(Se.createElement("canvas"),{alpha:!0},(R,O)=>{O.scale(d.dpi,d.dpi),R.width=d.canvas.width,R.height=d.canvas.height,nu(R,A,h),tu(n,R)})},[h,d,A]);const w=R=>{if(!f||!I.current)return;const O=I.current.getBoundingClientRect(),U={type:f,x:R.offsetX/E,y:R.offsetY/E},Y=(k,z)=>{const x=(z.clientX-O.x)/E,V=(z.clientY-O.y)/E;return{type:k.type,x:Math.min(k.x,x),y:Math.min(k.y,V),w:Math.abs(x-k.x),h:Math.abs(V-k.y)}},ee=k=>{$n(v.current,{alpha:!0},(z,x)=>{x.clearRect(0,0,z.width,z.height)}),nu(v.current,A,[...h,Y(U,k)])},se=k=>{const z=Y(U,k);z.w*E>=1&&z.h*E>=1&&g(x=>[...x,z]),Se.removeEventListener("mousemove",ee),Se.removeEventListener("mouseup",se)};Se.addEventListener("mousemove",ee),Se.addEventListener("mouseup",se)},W=e.useCallback(R=>O=>{O.preventDefault(),O.stopPropagation(),g(U=>{const Y=[...U];return Y.splice(R,1),Y})},[]),T={width:`${d.canvas.width*E}px`,height:`${d.canvas.height*E}px`},M=R=>{R.stopPropagation()};return t("div",{class:"editor"},t("style",{nonce:i.styleNonce,dangerouslySetInnerHTML:c}),t("div",{class:"editor__image-container"},t("div",{class:"editor__canvas-container",ref:m},t("canvas",{ref:_,id:"background",style:T}),t("canvas",{ref:v,id:"foreground",style:T}),t("div",{ref:I,onMouseDown:w,style:T},h.map((R,O)=>t("div",{key:O,class:"editor__rect",style:{top:`${R.y*E}px`,left:`${R.x*E}px`,width:`${R.w*E}px`,height:`${R.h*E}px`}},t("button",{"aria-label":i.removeHighlightText,onClick:W(O),onMouseDown:M,onMouseUp:M,type:"button"},t(a,null))))))),t(o,{options:i,action:f,setAction:p}))};return function({onError:f}){const[p,h]=e.useState();return s({onBeforeScreenshot:e.useCallback(()=>{u.display="none"},[]),onScreenshot:e.useCallback((g,m)=>{$n(Se.createElement("canvas"),{alpha:!1},(_,v)=>{v.scale(m,m),_.width=g.videoWidth,_.height=g.videoHeight,v.drawImage(g,0,0,_.width,_.height),h({canvas:_,dpi:m})}),n.width=g.videoWidth,n.height=g.videoHeight},[]),onAfterScreenshot:e.useCallback(()=>{u.display="block"},[]),onError:e.useCallback(g=>{u.display="block",f(g)},[])}),p?t(l,{screenshot:p}):t("div",null)}}const XC=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:t,hooks:e,dialog:n,options:r})=>{const i=Se.createElement("canvas");return{input:KC({h:t,hooks:e,outputBuffer:i,dialog:n,options:r}),value:async()=>{const s=await new Promise(o=>{i.toBlob(o,"image/png")});if(s)return{data:new Uint8Array(await s.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),H=G;let gl=0;function fv(){return gl>0}function ZC(){gl++,setTimeout(()=>{gl--})}function Si(t,e={}){function n(i){return typeof i=="function"}if(!n(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(Zl(t))return t}catch{return t}const r=function(...i){try{const s=i.map(o=>Si(o,e));return t.apply(this,s)}catch(s){throw ZC(),bt(o=>{o.addEventProcessor(a=>(e.mechanism&&(Yu(a,void 0),kn(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),Pe(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}m_(r,t),Je(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function Dd(){const t=Ur(),{referrer:e}=H.document||{},{userAgent:n}=H.navigator||{},r={...e&&{Referer:e},...n&&{"User-Agent":n}};return{url:t,headers:r}}const QC={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},Wh=H;async function pv(t,e){const n=QC[t],r=Wh.Sentry=Wh.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${t}`);const i=r[t];if(typeof i=="function"&&!("_isShim"in i))return i;const s=eA(n),o=H.document.createElement("script");o.src=s,o.crossOrigin="anonymous",o.referrerPolicy="strict-origin",e&&o.setAttribute("nonce",e);const a=new Promise((d,f)=>{o.addEventListener("load",()=>d()),o.addEventListener("error",f)}),c=H.document.currentScript,u=H.document.body||H.document.head||c?.parentElement;if(u)u.appendChild(o);else throw new Error(`Could not find parent element to insert lazy-loaded ${t} script`);try{await a}catch{throw new Error(`Error when loading integration: ${t}`)}const l=r[t];if(typeof l!="function")throw new Error(`Could not load integration: ${t}`);return l}function eA(t){const n=$()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${vn}/${t}.min.js`,n).toString()}const tA=tv({lazyLoadIntegration:pv}),jh=tv({getModalIntegration:()=>qC,getScreenshotIntegration:()=>XC});function lc(t,e){const n=$d(t,e),r={type:oA(e),value:aA(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function nA(t,e,n,r){const s=$()?.getOptions().normalizeDepth,o=lA(e),a={__serialized__:j_(e,s)};if(o)return{exception:{values:[lc(t,o)]},extra:a};const c={exception:{values:[{type:Ga(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:cA(e,{isUnhandledRejection:r})}]},extra:a};if(n){const u=$d(t,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function ru(t,e){return{exception:{values:[lc(t,e)]}}}function $d(t,e){const n=e.stacktrace||e.stack||"",r=iA(e),i=sA(e);try{return t(n,r,i)}catch{}return[]}const rA=/Minified React error #\d+;/i;function iA(t){return t&&rA.test(t.message)?1:0}function sA(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function hv(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function oA(t){const e=t?.name;return!e&&hv(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function aA(t){const e=t?.message;return hv(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function gv(t,e,n,r){const i=n?.syntheticException||void 0,s=dc(t,e,i,r);return kn(s),s.level="error",n?.event_id&&(s.event_id=n.event_id),Qa(s)}function mv(t,e,n="info",r,i){const s=r?.syntheticException||void 0,o=ml(t,e,s,i);return o.level=n,r?.event_id&&(o.event_id=r.event_id),Qa(o)}function dc(t,e,n,r,i){let s;if(f_(e)&&e.error)return ru(t,e.error);if(wp(e)||lw(e)){const o=e;if("stack"in e)s=ru(t,e);else{const a=o.name||(wp(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;s=ml(t,c,n,r),Yu(s,c)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return bn(e)?ru(t,e):en(e)||Ga(e)?(s=nA(t,e,n,i),kn(s,{synthetic:!0}),s):(s=ml(t,e,n,r),Yu(s,`${e}`),kn(s,{synthetic:!0}),s)}function ml(t,e,n,r){const i={};if(r&&n){const s=$d(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]}),kn(i,{synthetic:!0})}if(za(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function cA(t,{isUnhandledRejection:e}){const n=mw(t),r=e?"promise rejection":"exception";return f_(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Ga(t)?`Event \`${uA(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function uA(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function lA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}class _v extends FI{constructor(e){const n=dA(e),r=H.SENTRY_SDK_SOURCE||Lx();Ty(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:i,sendClientReports:s,enableLogs:o,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;H.document&&(s||o||u)&&H.document.addEventListener("visibilitychange",()=>{H.document.visibilityState==="hidden"&&(s&&this._flushOutcomes(),o&&ld(this),u&&fd(this))}),i&&this.on("beforeSendSession",ek)}eventFromException(e,n){return gv(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return mv(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,i){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,i)}}function dA(t){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:H.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const Dr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ie=G,fA=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",js=(t,e,n,r)=>{let i,s;return o=>{e.value>=0&&(o||r)&&(s=e.value-(i??0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=fA(e.value,n),t(e)))}},qs=(t=!0)=>{const e=ie.performance?.getEntriesByType?.("navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},$i=()=>qs()?.activationStart??0;function Ir(t,e,n){ie.document&&ie.addEventListener(t,e,n)}function Fd(t,e,n){ie.document&&ie.removeEventListener(t,e,n)}let ci=-1;const yv=new Set,pA=()=>ie.document?.visibilityState==="hidden"&&!ie.document?.prerendering?0:1/0,Wo=t=>{if(hA(t)&&ci>-1){if(t.type==="visibilitychange"||t.type==="pagehide")for(const e of yv)e();isFinite(ci)||(ci=t.type==="visibilitychange"?t.timeStamp:0,Fd("prerenderingchange",Wo,!0))}},zs=()=>{if(ie.document&&ci<0){const t=$i();ci=(ie.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>t)[0]?.startTime)??pA(),Ir("visibilitychange",Wo,!0),Ir("pagehide",Wo,!0),Ir("prerenderingchange",Wo,!0)}return{get firstHiddenTime(){return ci},onHidden(t){yv.add(t)}}};function hA(t){return t.type==="pagehide"||ie.document?.visibilityState==="hidden"}const gA=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Gs=(t,e=-1)=>{const n=qs();let r="navigate";return n&&(ie.document?.prerendering||$i()>0?r="prerender":ie.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:gA(),navigationType:r}},iu=new WeakMap;function Ud(t,e){return iu.get(t)||iu.set(t,new e),iu.get(t)}class ka{constructor(){ka.prototype.__init.call(this),ka.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),this._onAfterProcessingUnexpectedShift?.(e)}}const Fi=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{e(i.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Bd=t=>{let e=!1;return()=>{e||(t(),e=!0)}},fc=t=>{ie.document?.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},mA=[1800,3e3],_A=(t,e={})=>{fc(()=>{const n=zs(),r=Gs("FCP");let i;const o=Fi("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-$i(),0),r.entries.push(c),i(!0)))});o&&(i=js(t,r,mA,e.reportAllChanges))})},yA=[.1,.25],vA=(t,e={})=>{_A(Bd(()=>{const n=Gs("CLS",0);let r;const i=zs(),s=Ud(e,ka),o=c=>{for(const u of c)s._processEntry(u);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},a=Fi("layout-shift",o);a&&(r=js(t,n,yA,e.reportAllChanges),i.onHidden(()=>{o(a.takeRecords()),r(!0)}),ie?.setTimeout?.(r))}))};let vv=0,su=1/0,go=0;const bA=t=>{t.forEach(e=>{e.interactionId&&(su=Math.min(su,e.interactionId),go=Math.max(go,e.interactionId),vv=go?(go-su)/7+1:0)})};let _l;const bv=()=>_l?vv:performance.interactionCount||0,SA=()=>{"interactionCount"in performance||_l||(_l=Fi("event",bA,{type:"event",buffered:!0,durationThreshold:0}))},ou=10;let Sv=0;const EA=()=>bv()-Sv;class Ra{constructor(){Ra.prototype.__init.call(this),Ra.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Sv=bv(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(EA()/50));return this._longestInteractionList[e]}_processEntry(e){if(this._onBeforeProcessingEntry?.(e),!(e.interactionId||e.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(e.interactionId);if(r||this._longestInteractionList.length<ou||e.duration>n._latency){if(r?e.duration>r._latency?(r.entries=[e],r._latency=e.duration):e.duration===r._latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((i,s)=>s._latency-i._latency),this._longestInteractionList.length>ou){const i=this._longestInteractionList.splice(ou);for(const s of i)this._longestInteractionMap.delete(s.id)}this._onAfterProcessingINPCandidate?.(r)}}}const Ev=t=>{const e=n=>{(n.type==="pagehide"||ie.document?.visibilityState==="hidden")&&t(n)};Ir("visibilitychange",e,!0),Ir("pagehide",e,!0)},wv=t=>{const e=ie.requestIdleCallback||ie.setTimeout;ie.document?.visibilityState==="hidden"?t():(t=Bd(t),Ir("visibilitychange",t,{once:!0,capture:!0}),e(()=>{t(),Fd("visibilitychange",t,{capture:!0})}),Ev(t))},wA=[200,500],TA=40,IA=(t,e={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=zs();fc(()=>{SA();const r=Gs("INP");let i;const s=Ud(e,Ra),o=c=>{wv(()=>{for(const l of c)s._processEntry(l);const u=s._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,i())})},a=Fi("event",o,{durationThreshold:e.durationThreshold??TA});i=js(t,r,wA,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{o(a.takeRecords()),i(!0)}))})};class kA{_processEntry(e){this._onBeforeProcessingEntry?.(e)}}const RA=[2500,4e3],xA=(t,e={})=>{fc(()=>{const n=zs(),r=Gs("LCP");let i;const s=Ud(e,kA),o=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)s._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-$i(),0),r.entries=[u],i())},a=Fi("largest-contentful-paint",o);if(a){i=js(t,r,RA,e.reportAllChanges);const c=Bd(()=>{o(a.takeRecords()),a.disconnect(),i(!0)}),u=l=>{l.isTrusted&&(wv(c),Fd(l.type,u,{capture:!0}))};for(const l of["keydown","click","visibilitychange"])Ir(l,u,{capture:!0})}})},CA=[800,1800],yl=t=>{ie.document?.prerendering?fc(()=>yl(t)):ie.document?.readyState!=="complete"?addEventListener("load",()=>yl(t),!0):setTimeout(t)},AA=(t,e={})=>{const n=Gs("TTFB"),r=js(t,n,CA,e.reportAllChanges);yl(()=>{const i=qs();i&&(n.value=Math.max(i.responseStart-$i(),0),n.entries=[i],r(!0))})},fs={},xa={};let Tv,Iv,kv,Rv;function Hd(t,e=!1){return pc("cls",t,PA,Tv,e)}function Wd(t,e=!1){return pc("lcp",t,OA,Iv,e)}function MA(t){return pc("ttfb",t,NA,kv)}function xv(t){return pc("inp",t,LA,Rv)}function $r(t,e){return Cv(t,e),xa[t]||(DA(t),xa[t]=!0),Av(t,e)}function Vs(t,e){const n=fs[t];if(n?.length)for(const r of n)try{r(e)}catch(i){Dr&&y.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Tn(r)}
Error:`,i)}}function PA(){return vA(t=>{Vs("cls",{metric:t}),Tv=t},{reportAllChanges:!0})}function OA(){return xA(t=>{Vs("lcp",{metric:t}),Iv=t},{reportAllChanges:!0})}function NA(){return AA(t=>{Vs("ttfb",{metric:t}),kv=t})}function LA(){return IA(t=>{Vs("inp",{metric:t}),Rv=t})}function pc(t,e,n,r,i=!1){Cv(t,e);let s;return xa[t]||(s=n(),xa[t]=!0),r&&e({metric:r}),Av(t,e,i?s:void 0)}function DA(t){const e={};t==="event"&&(e.durationThreshold=0),Fi(t,n=>{Vs(t,{entries:n})},e)}function Cv(t,e){fs[t]=fs[t]||[],fs[t].push(e)}function Av(t,e,n){return()=>{n&&n();const r=fs[t];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function $A(t){return"duration"in t}function au(t){return typeof t=="number"&&isFinite(t)}function Qn(t,e,n,{...r}){const i=q(t).start_timestamp;return i&&i>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),Ar(t,()=>{const s=Nt({startTime:e,...r});return s&&s.end(n),s})}function jd(t){const e=$();if(!e)return;const{name:n,transaction:r,attributes:i,startTime:s}=t,{release:o,environment:a,sendDefaultPii:c}=e.getOptions(),l=e.getIntegrationByName("Replay")?.getReplayId(),d=ne(),f=d.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=d.getScopeData().contexts.profile.profile_id}catch{}const g={release:o,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":ie.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...i};return Nt({name:n,attributes:g,startTime:s,experimental:{standalone:!0}})}function Ys(){return ie.addEventListener&&ie.performance}function Fe(t){return t/1e3}function FA(t){let e="unknown",n="unknown",r="";for(const i of t){if(i==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=i}return r===t&&(e=r),{name:e,version:n}}function Mv(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function Pv(t,e){let n,r=!1;function i(a){!r&&n&&e(a,n),r=!0}Ev(()=>{i("pagehide")});const s=t.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(i("navigation"),s(),o())}),o=t.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,o()})}function UA(t){let e=0,n;if(!Mv("layout-shift"))return;const r=Hd(({metric:i})=>{const s=i.entries[i.entries.length-1];s&&(e=i.value,n=s)},!0);Pv(t,(i,s)=>{BA(e,n,s,i),r()})}function BA(t,e,n,r){Dr&&y.log(`Sending CLS span (${t})`);const i=e?Fe((ot()||0)+e.startTime):Ce(),s=ne().getScopeData().transactionName,o=e?vt(e.sources[0]?.node):"Layout shift",a={[re]:"auto.http.browser.cls",[Te]:"ui.webvital.cls",[Pi]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e?.sources&&e.sources.forEach((u,l)=>{a[`cls.source.${l+1}`]=vt(u.node)});const c=jd({name:o,transaction:s,attributes:a,startTime:i});c&&(c.addEvent("cls",{[$s]:"",[Fs]:t}),c.end(i))}function HA(t){let e=0,n;if(!Mv("largest-contentful-paint"))return;const r=Wd(({metric:i})=>{const s=i.entries[i.entries.length-1];s&&(e=i.value,n=s)},!0);Pv(t,(i,s)=>{WA(e,n,s,i),r()})}function WA(t,e,n,r){Dr&&y.log(`Sending LCP span (${t})`);const i=Fe((ot()||0)+(e?.startTime||0)),s=ne().getScopeData().transactionName,o=e?vt(e.element):"Largest contentful paint",a={[re]:"auto.http.browser.lcp",[Te]:"ui.webvital.lcp",[Pi]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};e&&(e.element&&(a["lcp.element"]=vt(e.element)),e.id&&(a["lcp.id"]=e.id),e.url&&(a["lcp.url"]=e.url),e.loadTime!=null&&(a["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(a["lcp.renderTime"]=e.renderTime),e.size!=null&&(a["lcp.size"]=e.size));const c=jd({name:o,transaction:s,attributes:a,startTime:i});c&&(c.addEvent("lcp",{[$s]:"millisecond",[Fs]:t}),c.end(i))}function Ct(t){return t&&((ot()||performance.timeOrigin)+t)/1e3}function Ov(t){const e={};if(t.nextHopProtocol!=null){const{name:n,version:r}=FA(t.nextHopProtocol);e["network.protocol.version"]=r,e["network.protocol.name"]=n}return ot()||Ys()?.timeOrigin?jA({...e,"http.request.redirect_start":Ct(t.redirectStart),"http.request.redirect_end":Ct(t.redirectEnd),"http.request.worker_start":Ct(t.workerStart),"http.request.fetch_start":Ct(t.fetchStart),"http.request.domain_lookup_start":Ct(t.domainLookupStart),"http.request.domain_lookup_end":Ct(t.domainLookupEnd),"http.request.connect_start":Ct(t.connectStart),"http.request.secure_connection_start":Ct(t.secureConnectionStart),"http.request.connection_end":Ct(t.connectEnd),"http.request.request_start":Ct(t.requestStart),"http.request.response_start":Ct(t.responseStart),"http.request.response_end":Ct(t.responseEnd),"http.request.time_to_first_byte":t.responseStart!=null?t.responseStart/1e3:void 0}):e}function jA(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!=null))}const qA=2147483647;let qh=0,Ut={},pt,Ca;function zA({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:n}){const r=Ys();if(r&&ot()){r.mark&&ie.performance.mark("sentry-tracing-init");const i=e?HA(n):KA(),s=XA(),o=t?UA(n):JA();return()=>{i?.(),s(),o?.()}}return()=>{}}function GA(){$r("longtask",({entries:t})=>{const e=De();if(!e)return;const{op:n,start_timestamp:r}=q(e);for(const i of t){const s=Fe(ot()+i.startTime),o=Fe(i.duration);n==="navigation"&&r&&s<r||Qn(e,s,s+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[re]:"auto.ui.browser.metrics"}})}})}function VA(){new PerformanceObserver(e=>{const n=De();if(n)for(const r of e.getEntries()){if(!r.scripts[0])continue;const i=Fe(ot()+r.startTime),{start_timestamp:s,op:o}=q(n);if(o==="navigation"&&s&&i<s)continue;const a=Fe(r.duration),c={[re]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:l,invokerType:d,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=l,c["browser.script.invoker_type"]=d,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),Qn(n,i,i+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function YA(){$r("event",({entries:t})=>{const e=De();if(e){for(const n of t)if(n.name==="click"){const r=Fe(ot()+n.startTime),i=Fe(n.duration),s={name:vt(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[re]:"auto.ui.browser.metrics"}},o=g_(n.target);o&&(s.attributes["ui.component_name"]=o),Qn(e,r,r+i,s)}}})}function JA(){return Hd(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Ut.cls={value:t.value,unit:""},Ca=e)},!0)}function KA(){return Wd(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Ut.lcp={value:t.value,unit:"millisecond"},pt=e)},!0)}function XA(){return MA(({metric:t})=>{t.entries[t.entries.length-1]&&(Ut.ttfb={value:t.value,unit:"millisecond"})})}function ZA(t,e){const n=Ys(),r=ot();if(!n?.getEntries||!r)return;const i=Fe(r),s=n.getEntries(),{op:o,start_timestamp:a}=q(t);s.slice(qh).forEach(c=>{const u=Fe(c.startTime),l=Fe(Math.max(0,c.duration));if(!(o==="navigation"&&a&&i+u<a))switch(c.entryType){case"navigation":{nM(t,c,i);break}case"mark":case"paint":case"measure":{eM(t,c,u,l,i,e.ignorePerformanceApiSpans);const d=zs(),f=c.startTime<d.firstHiddenTime;c.name==="first-paint"&&f&&(Ut.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(Ut.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{sM(t,c,c.name,u,l,i,e.ignoreResourceSpans);break}}}),qh=Math.max(s.length-1,0),oM(t),o==="pageload"&&(uM(Ut),e.recordClsOnPageloadSpan||delete Ut.cls,e.recordLcpOnPageloadSpan||delete Ut.lcp,Object.entries(Ut).forEach(([c,u])=>{z_(c,u.value,u.unit)}),t.setAttribute("performance.timeOrigin",i),t.setAttribute("performance.activationStart",$i()),aM(t,e)),pt=void 0,Ca=void 0,Ut={}}function QA(t){if(t?.entryType==="measure")try{return t.detail.devtools.track==="Components "}catch{return}}function eM(t,e,n,r,i,s){if(QA(e)||["mark","measure"].includes(e.entryType)&&Wt(e.name,s))return;const o=qs(!1),a=Fe(o?o.requestStart:0),c=i+Math.max(n,a),u=i+n,l=u+r,d={[re]:"auto.resource.browser.metrics"};c!==u&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=c),tM(d,e),c<=l&&Qn(t,c,l,{name:e.name,op:e.entryType,attributes:d})}function tM(t,e){try{const n=e.detail;if(!n)return;if(typeof n=="object"){for(const[r,i]of Object.entries(n))if(i&&Xn(i))t[`sentry.browser.measure.detail.${r}`]=i;else if(i!==void 0)try{t[`sentry.browser.measure.detail.${r}`]=JSON.stringify(i)}catch{}return}if(Xn(n)){t["sentry.browser.measure.detail"]=n;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function nM(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{mo(t,e,r,n)}),mo(t,e,"secureConnection",n,"TLS/SSL"),mo(t,e,"fetch",n,"cache"),mo(t,e,"domainLookup",n,"DNS"),iM(t,e,n)}function mo(t,e,n,r,i=n){const s=rM(n),o=e[s],a=e[`${n}Start`];!a||!o||Qn(t,r+Fe(a),r+Fe(o),{op:`browser.${i}`,name:e.name,attributes:{[re]:"auto.ui.browser.metrics",...n==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function rM(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function iM(t,e,n){const r=n+Fe(e.requestStart),i=n+Fe(e.responseEnd),s=n+Fe(e.responseStart);e.responseEnd&&(Qn(t,r,i,{op:"browser.request",name:e.name,attributes:{[re]:"auto.ui.browser.metrics"}}),Qn(t,s,i,{op:"browser.response",name:e.name,attributes:{[re]:"auto.ui.browser.metrics"}}))}function sM(t,e,n,r,i,s,o){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(o?.includes(a))return;const c={[re]:"auto.resource.browser.metrics"},u=wr(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(ie.location.origin),cM(e,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const l={...c,...Ov(e)},d=s+r,f=d+i;Qn(t,d,f,{name:n.replace(ie.location.origin,""),op:a,attributes:l})}function oM(t){const e=ie.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&t.setAttribute("connectionType",n.type),au(n.rtt)&&(Ut["connection.rtt"]={value:n.rtt,unit:"millisecond"})),au(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),au(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function aM(t,e){pt&&e.recordLcpOnPageloadSpan&&(pt.element&&t.setAttribute("lcp.element",vt(pt.element)),pt.id&&t.setAttribute("lcp.id",pt.id),pt.url&&t.setAttribute("lcp.url",pt.url.trim().slice(0,200)),pt.loadTime!=null&&t.setAttribute("lcp.loadTime",pt.loadTime),pt.renderTime!=null&&t.setAttribute("lcp.renderTime",pt.renderTime),t.setAttribute("lcp.size",pt.size)),Ca?.sources&&e.recordClsOnPageloadSpan&&Ca.sources.forEach((n,r)=>t.setAttribute(`cls.source.${r+1}`,vt(n.node)))}function cM(t,e,n){n.forEach(([r,i])=>{const s=t[r];s!=null&&(typeof s=="number"&&s<qA||typeof s=="string")&&(e[i]=s)})}function uM(t){const e=qs(!1);if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function lM(){return Ys()&&ot()?$r("element",dM):()=>{}}const dM=({entries:t})=>{const e=De(),n=e?Le(e):void 0,r=n?q(n).description:ne().getScopeData().transactionName;t.forEach(i=>{const s=i;if(!s.identifier)return;const o=s.name,a=s.renderTime,c=s.loadTime,[u,l]=c?[Fe(c),"load-time"]:a?[Fe(a),"render-time"]:[Ce(),"entry-emission"],d=o==="image-paint"?Fe(Math.max(0,(a??0)-(c??0))):0,f={[re]:"auto.ui.browser.elementtiming",[Te]:"ui.elementtiming",[_e]:"component","sentry.span_start_time_source":l,"sentry.transaction_name":r,"element.id":s.id,"element.type":s.element?.tagName?.toLowerCase()||"unknown","element.size":s.naturalWidth&&s.naturalHeight?`${s.naturalWidth}x${s.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":s.url||void 0,"element.identifier":s.identifier,"element.paint_type":o};Pn({name:`element[${s.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+d)})})},fM=1e3;let zh,vl,bl;function Nv(t){nr("dom",t),rr("dom",pM)}function pM(){if(!ie.document)return;const t=Pt.bind(null,"dom"),e=Gh(t,!0);ie.document.addEventListener("click",e,!1),ie.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const i=ie[n]?.prototype;i?.hasOwnProperty?.("addEventListener")&&(rt(i,"addEventListener",function(s){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},l=u[o]=u[o]||{refCount:0};if(!l.handler){const d=Gh(t);l.handler=d,s.call(this,o,d,c)}l.refCount++}catch{}return s.call(this,o,a,c)}}),rt(i,"removeEventListener",function(s){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},l=u[o];l&&(l.refCount--,l.refCount<=0&&(s.call(this,o,l.handler,c),l.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,c)}}))})}function hM(t){if(t.type!==vl)return!1;try{if(!t.target||t.target._sentryId!==bl)return!1}catch{}return!0}function gM(t,e){return t!=="keypress"?!1:e?.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function Gh(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=mM(n);if(gM(n.type,r))return;Je(n,"_sentryCaptured",!0),r&&!r._sentryId&&Je(r,"_sentryId",Ye());const i=n.type==="keypress"?"input":n.type;hM(n)||(t({event:n,name:i,global:e}),vl=n.type,bl=r?r._sentryId:void 0),clearTimeout(zh),zh=ie.setTimeout(()=>{bl=void 0,vl=void 0},fM)}}function mM(t){try{return t.target}catch{return null}}let _o;function hc(t){const e="history";nr(e,t),rr(e,_M)}function _M(){if(ie.addEventListener("popstate",()=>{const e=ie.location.href,n=_o;if(_o=e,n===e)return;Pt("history",{from:n,to:e})}),!kx())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const i=_o,s=yM(String(r));if(_o=s,i===s)return e.apply(this,n);Pt("history",{from:i,to:s})}return e.apply(this,n)}}rt(ie.history,"pushState",t),rt(ie.history,"replaceState",t)}function yM(t){try{return new URL(t,ie.location.origin).toString()}catch{return t}}const jo={};function qd(t){const e=jo[t];if(e)return e;let n=ie[t];if(ul(n))return jo[t]=n.bind(ie);const r=ie.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const s=i.contentWindow;s?.[t]&&(n=s[t]),r.head.removeChild(i)}catch(i){Dr&&y.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return n&&(jo[t]=n.bind(ie))}function vM(t){jo[t]=void 0}function Js(...t){return qd("setTimeout")(...t)}const yn="__sentry_xhr_v3__";function zd(t){nr("xhr",t),rr("xhr",bM)}function bM(){if(!ie.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const i=new Error,s=Ce()*1e3,o=Ht(r[0])?r[0].toUpperCase():void 0,a=SM(r[1]);if(!o||!a)return e.apply(n,r);n[yn]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[yn];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const l={endTimestamp:Ce()*1e3,startTimestamp:s,xhr:n,virtualError:i};Pt("xhr",l)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,l,d){return c(),u.apply(l,d)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,l,d){const[f,p]=d,h=l[yn];return h&&Ht(f)&&Ht(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(l,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const i=n[yn];if(!i)return e.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const s={startTimestamp:Ce()*1e3,xhr:n};return Pt("xhr",s),e.apply(n,r)}})}function SM(t){if(Ht(t))return t;try{return t.toString()}catch{}}function Lv(t){return new URLSearchParams(t).toString()}function Aa(t,e=y){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Lv(t)];if(!t)return[void 0]}catch(n){return Dr&&e.error(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Dr&&e.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Gd(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function Dv(t){let e;try{e=t.getAllResponseHeaders()}catch(n){return Dr&&y.error(n,"Failed to get xhr response headers",t),{}}return e?e.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return s&&(n[i.toLowerCase()]=s),n},{}):{}}const cu=[],qo=new Map,zr=new Map,EM=60;function wM(){if(Ys()&&ot()){const e=TM();return()=>{e()}}return()=>{}}const Sl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function TM(){return xv(IM)}const IM=({metric:t})=>{if(t.value==null)return;const e=Fe(t.value);if(e>EM)return;const n=t.entries.find(h=>h.duration===t.value&&Sl[h.name]);if(!n)return;const{interactionId:r}=n,i=Sl[n.name],s=Fe(ot()+n.startTime),o=De(),a=o?Le(o):void 0,c=r!=null?qo.get(r):void 0,u=c?.span||a,l=u?q(u).description:ne().getScopeData().transactionName,d=c?.elementName||vt(n.target),f={[re]:"auto.http.browser.inp",[Te]:`ui.interaction.${i}`,[Pi]:n.duration},p=jd({name:d,transaction:l,attributes:f,startTime:s});p&&(p.addEvent("inp",{[$s]:"millisecond",[Fs]:t.value}),p.end(s+e))};function kM(){const t=Object.keys(Sl);Ta()&&t.forEach(i=>{ie.addEventListener(i,e,{capture:!0,passive:!0})});function e(i){const s=i.target;if(!s)return;const o=vt(s),a=Math.round(i.timeStamp);if(zr.set(a,o),zr.size>50){const c=zr.keys().next().value;c!==void 0&&zr.delete(c)}}function n(i){const s=Math.round(i.startTime);let o=zr.get(s);if(!o)for(let a=-5;a<=5;a++){const c=zr.get(s+a);if(c){o=c;break}}return o||"<unknown>"}const r=({entries:i})=>{const s=De(),o=s&&Le(s);i.forEach(a=>{if(!$A(a))return;const c=a.interactionId;if(c==null||qo.has(c))return;const u=a.target?vt(a.target):n(a);if(cu.length>10){const l=cu.shift();qo.delete(l)}cu.push(c),qo.set(c,{span:o,elementName:u})})};$r("event",r),$r("first-input",r)}const RM=40;function Vd(t,e=qd("fetch")){let n=0,r=0;async function i(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{const c=await e(t.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw vM("fetch"),c}finally{n-=o,r--}}return py(t,i,gd(t.bufferSize||RM))}const P=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function xM(){const t=$();if(!t){P&&y.warn("No Sentry client available, profiling is not started");return}if(!t.getIntegrationByName("BrowserProfiling")){P&&y.warn("BrowserProfiling integration is not available");return}t.emit("startUIProfiler")}function CM(){const t=$();if(!t){P&&y.warn("No Sentry client available, profiling is not started");return}if(!t.getIntegrationByName("BrowserProfiling")){P&&y.warn("ProfilingIntegration is not available");return}t.emit("stopUIProfiler")}const AM={startProfiler:xM,stopProfiler:CM},MM=10,PM=20,OM=30,NM=40,LM=50;function Ei(t,e,n,r){const i={filename:t,function:e==="<anonymous>"?sn:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const DM=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,$M=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,FM=/\((\S*)(?::(\d+))(?::(\d+))\)/,UM=/at (.+?) ?\(data:(.+?),/,BM=t=>{const e=t.match(UM);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const n=DM.exec(t);if(n){const[,i,s,o]=n;return Ei(i,sn,+s,+o)}const r=$M.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=FM.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[s,o]=Hv(r[1]||sn,r[2]);return Ei(o,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},$v=[OM,BM],HM=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,WM=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,jM=t=>{const e=HM.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=WM.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||sn;return[i,r]=Hv(i,r),Ei(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Fv=[LM,jM],qM=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,zM=t=>{const e=qM.exec(t);return e?Ei(e[2],e[1]||sn,+e[3],e[4]?+e[4]:void 0):void 0},GM=[NM,zM],VM=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,YM=t=>{const e=VM.exec(t);return e?Ei(e[2],e[3]||sn,+e[1]):void 0},JM=[MM,YM],KM=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,XM=t=>{const e=KM.exec(t);return e?Ei(e[5],e[3]||e[4]||sn,+e[1],+e[2]):void 0},ZM=[PM,XM],Uv=[$v,Fv],Bv=a_(...Uv),Hv=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:sn,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};function QM(t,{metadata:e,tunnel:n,dsn:r}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e?.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:Mn(r)}},s=eP(t);return Gt(i,[s])}function eP(t){return[{type:"user_report"},t]}const yo=1024,tP="Breadcrumbs",nP=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:tP,setup(n){e.console&&vd(sP(n)),e.dom&&Nv(iP(n,e.dom)),e.xhr&&zd(oP(n)),e.fetch&&Ad(aP(n)),e.history&&hc(cP(n)),e.sentry&&n.on("beforeSendEvent",rP(n))}}}),Wv=nP;function rP(t){return function(n){$()===t&&zt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:hr(n)},{event:n})}}function iP(t,e){return function(r){if($()!==t)return;let i,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>yo&&(P&&y.warn(`\`dom.maxStringLength\` cannot exceed ${yo}, but a value of ${a} was configured. Sentry will use ${yo} instead.`),a=yo),typeof o=="string"&&(o=[o]);try{const u=r.event,l=uP(u)?u.target:u;i=vt(l,{keyAttrs:o,maxStringLength:a}),s=g_(l)}catch{i="<unknown>"}if(i.length===0)return;const c={category:`ui.${r.name}`,message:i};s&&(c.data={"ui.component_name":s}),zt(c,{event:r.event,name:r.name,global:r.global})}}function sP(t){return function(n){if($()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:ba(n.level),message:fa(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${fa(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;zt(r,{input:n.args,level:n.level})}}function oP(t){return function(n){if($()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[yn];if(!r||!i||!s)return;const{method:o,url:a,status_code:c,body:u}=s,l={method:o,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:i},f={category:"xhr",data:l,type:"http",level:Jy(c)};t.emit("beforeOutgoingRequestBreadcrumb",f,d),zt(f,d)}}function aP(t){return function(n){if($()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const s=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i},a={category:"fetch",data:s,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",a,o),zt(a,o)}else{const s=n.response,o={...n.fetchData,status_code:s?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,s?.status;const a={input:n.args,response:s,startTimestamp:r,endTimestamp:i},c={category:"fetch",data:o,type:"http",level:Jy(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",c,a),zt(c,a)}}}function cP(t){return function(n){if($()!==t)return;let r=n.from,i=n.to;const s=wr(H.location.href);let o=r?wr(r):void 0;const a=wr(i);o?.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),zt({category:"navigation",data:{from:r,to:i}})}}function uP(t){return!!t&&!!t.target}const lP=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],dP="BrowserApiErrors",fP=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:dP,setupOnce(){e.setTimeout&&rt(H,"setTimeout",Vh),e.setInterval&&rt(H,"setInterval",Vh),e.requestAnimationFrame&&rt(H,"requestAnimationFrame",pP),e.XMLHttpRequest&&"XMLHttpRequest"in H&&rt(XMLHttpRequest.prototype,"send",hP);const n=e.eventTarget;n&&(Array.isArray(n)?n:lP).forEach(i=>gP(i,e))}}}),jv=fP;function Vh(t){return function(...e){const n=e[0];return e[0]=Si(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Tn(t)}`}}),t.apply(this,e)}}function pP(t){return function(e){return t.apply(this,[Si(e,{mechanism:{data:{handler:Tn(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function hP(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&rt(n,i,function(s){const o={mechanism:{data:{handler:Tn(s)},handled:!1,type:`auto.browser.browserapierrors.xhr.${i}`}},a=Zl(s);return a&&(o.mechanism.data.handler=Tn(a)),Si(s,o)})}),t.apply(this,e)}}function gP(t,e){const r=H[t]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(rt(r,"addEventListener",function(i){return function(s,o,a){try{mP(o)&&(o.handleEvent=Si(o.handleEvent,{mechanism:{data:{handler:Tn(o),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&_P(this,s,o),i.apply(this,[s,Si(o,{mechanism:{data:{handler:Tn(o),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),rt(r,"removeEventListener",function(i){return function(s,o,a){try{const c=o.__sentry_wrapped__;c&&i.call(this,s,c,a)}catch{}return i.call(this,s,o,a)}}))}function mP(t){return typeof t.handleEvent=="function"}function _P(t,e,n){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,n)}const qv=()=>({name:"BrowserSession",setupOnce(){if(typeof H.document>"u"){P&&y.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}tl({ignoreDuration:!0}),nl(),hc(({from:t,to:e})=>{t!==void 0&&t!==e&&(tl({ignoreDuration:!0}),nl())})}}),yP="GlobalHandlers",vP=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:yP,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(bP(n),Yh("onerror")),e.onunhandledrejection&&(SP(n),Yh("onunhandledrejection"))}}}),zv=vP;function bP(t){u_(e=>{const{stackParser:n,attachStacktrace:r}=Yv();if($()!==t||fv())return;const{msg:i,url:s,line:o,column:a,error:c}=e,u=EP(dc(n,c||i,void 0,r,!1),s,o,a);u.level="error",Oi(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function SP(t){l_(e=>{const{stackParser:n,attachStacktrace:r}=Yv();if($()!==t||fv())return;const i=Gv(e),s=Xn(i)?Vv(i):dc(n,i,void 0,r,!0);s.level="error",Oi(s,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Gv(t){if(Xn(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function Vv(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function EP(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=wP(e)??Ur();return c.length===0&&c.push({colno:u,filename:d,function:sn,in_app:!0,lineno:l}),t}function Yh(t){P&&y.log(`Global Handler attached: ${t}`)}function Yv(){return $()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function wP(t){if(!(!Ht(t)||t.length===0)){if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/),n=e?e[1]:"text/javascript",r=t.includes("base64,");return`<data:${n}${r?",base64":""}>`}return t}}const Jv=()=>({name:"HttpContext",preprocessEvent(t){if(!H.navigator&&!H.location&&!H.document)return;const e=Dd(),n={...e.headers,...t.request?.headers};t.request={...e,...t.request,headers:n}}}),TP="cause",IP=5,kP="LinkedErrors",RP=((t={})=>{const e=t.limit||IP,n=t.key||TP;return{name:kP,preprocessEvent(r,i,s){const o=s.getOptions();mk(lc,o.stackParser,n,e,r,i)}}}),Kv=RP,xP="SpotlightBrowser",CP=((t={})=>{const e=t.sidecarUrl||"http://localhost:8969/stream";return{name:xP,setup:()=>{P&&y.log("Using Sidecar URL",e)},processEvent:n=>MP(n)?null:n,afterAllSetup:n=>{AP(n,e)}}});function AP(t,e){const n=qd("fetch");let r=0;t.on("beforeEnvelope",i=>{if(r>3){y.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(e,{method:"POST",body:ma(i),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(s=>{s.status>=200&&s.status<400&&(r=0)},s=>{r++,y.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",s)})})}const Xv=CP;function MP(t){return!!(t.type==="transaction"&&t.spans&&t.contexts?.trace&&t.contexts.trace.op==="ui.action.click"&&t.spans.some(({description:e})=>e?.includes("#sentry-spotlight")))}function PP(){return OP()?(P&&tr(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function OP(){if(typeof H.window>"u")return!1;const t=H;if(t.nw||!(t.chrome||t.browser)?.runtime?.id)return!1;const n=Ur(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(H===H.top&&r.some(s=>n.startsWith(`${s}://`)))}function Zv(t){return[Ry(),Iy(),jv(),Wv(),zv(),Kv(),My(),Jv(),qv()]}function NP(t={}){const e=!t.skipBrowserExtensionCheck&&PP();let n=t.defaultIntegrations==null?Zv():t.defaultIntegrations;if(t.spotlight){n||(n=[]);const i=typeof t.spotlight=="string"?{sidecarUrl:t.spotlight}:void 0;n.push(Xv(i))}const r={...t,enabled:e?!1:t.enabled,stackParser:ow(t.stackParser||Bv),integrations:hI({integrations:t.integrations,defaultIntegrations:n}),transport:t.transport||Vd};return jI(_v,r)}function LP(){}function DP(t){t()}function El(t={}){const e=H.document,n=e?.head||e?.body;if(!n){P&&y.error("[showReportDialog] Global document not defined");return}const r=ne(),s=$()?.getDsn();if(!s){P&&y.error("[showReportDialog] DSN not configured");return}const o={...t,user:{...r.getUser(),...t.user},eventId:t.eventId||Q_()},a=H.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=fI(s,o);const{onLoad:c,onClose:u}=o;if(c&&(a.onload=c),u){const l=d=>{if(d.data==="__sentry_reportdialog_closed__")try{u()}finally{H.removeEventListener("message",l)}};H.addEventListener("message",l)}n.appendChild(a)}const $P=G,FP="ReportingObserver",Jh=new WeakMap,UP=((t={})=>{const e=t.types||["crash","deprecation","intervention"];function n(r){if(Jh.has($()))for(const i of r)bt(s=>{s.setExtra("url",i.url);const o=`ReportingObserver [${i.type}]`;let a="No details available";if(i.body){const c={};for(const u in i.body)c[u]=i.body[u];if(s.setExtra("body",c),i.type==="crash"){const u=i.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=i.body.message||a}Z_(`${o}: ${a}`)})}return{name:FP,setupOnce(){if(!xx())return;new $P.ReportingObserver(n,{buffered:!0,types:e}).observe()},setup(r){Jh.set(r,!0)}}}),BP=UP,HP="HttpClient",WP=((t={})=>{const e={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...t};return{name:HP,setup(n){XP(n,e),ZP(n,e)}}}),jP=WP;function qP(t,e,n,r,i){if(eb(t,n.status,n.url)){const s=QP(e,r);let o,a,c,u;nb()&&([o,c]=Kh("Cookie",s),[a,u]=Kh("Set-Cookie",n));const l=tb({url:s.url,method:s.method,status:n.status,requestHeaders:o,responseHeaders:a,requestCookies:c,responseCookies:u,error:i,type:"fetch"});Oi(l)}}function Kh(t,e){const n=VP(e.headers);let r;try{const i=n[t]||n[t.toLowerCase()]||void 0;i&&(r=Qv(i))}catch{}return[n,r]}function zP(t,e,n,r,i){if(eb(t,e.status,e.responseURL)){let s,o,a;if(nb()){try{const u=e.getResponseHeader("Set-Cookie")||e.getResponseHeader("set-cookie")||void 0;u&&(o=Qv(u))}catch{}try{a=YP(e)}catch{}s=r}const c=tb({url:e.responseURL,method:n,status:e.status,requestHeaders:s,responseHeaders:a,responseCookies:o,error:i,type:"xhr"});Oi(c)}}function GP(t){if(t){const e=t["Content-Length"]||t["content-length"];if(e)return parseInt(e,10)}}function Qv(t){return t.split("; ").reduce((e,n)=>{const[r,i]=n.split("=");return r&&i&&(e[r]=i),e},{})}function VP(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function YP(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return i&&s&&(n[i]=s),n},{}):{}}function JP(t,e){return t.some(n=>typeof n=="string"?e.includes(n):n.test(e))}function KP(t,e){return t.some(n=>typeof n=="number"?n===e:e>=n[0]&&e<=n[1])}function XP(t,e){Ky()&&Ad(n=>{if($()!==t)return;const{response:r,args:i,error:s,virtualError:o}=n,[a,c]=i;r&&qP(e,a,r,c,s||o)},!1)}function ZP(t,e){"XMLHttpRequest"in G&&zd(n=>{if($()!==t)return;const{error:r,virtualError:i}=n,s=n.xhr,o=s[yn];if(!o)return;const{method:a,request_headers:c}=o;try{zP(e,s,a,c,r||i)}catch(u){P&&y.warn("Error while extracting response event form XHR response",u)}})}function eb(t,e,n){return KP(t.failedRequestStatusCodes,e)&&JP(t.failedRequestTargets,n)&&!Ey(n,$())}function tb(t){const e=$(),n=e&&t.error&&t.error instanceof Error?t.error.stack:void 0,r=n&&e?e.getOptions().stackParser(n,0,1):void 0,i=`HTTP Client Error with status code: ${t.status}`,s={message:i,exception:{values:[{type:"Error",value:i,stacktrace:r?{frames:r}:void 0}]},request:{url:t.url,method:t.method,headers:t.requestHeaders,cookies:t.requestCookies},contexts:{response:{status_code:t.status,headers:t.responseHeaders,cookies:t.responseCookies,body_size:GP(t.responseHeaders)}}};return kn(s,{type:`auto.http.client.${t.type}`,handled:!1}),s}function QP(t,e){return!e&&t instanceof Request||t instanceof Request&&t.bodyUsed?t:new Request(t,e)}function nb(){const t=$();return t?!!t.getOptions().sendDefaultPii:!1}const uu=G,eO=7,tO="ContextLines",nO=((t={})=>{const e=t.frameContextLines!=null?t.frameContextLines:eO;return{name:tO,processEvent(n){return iO(n,e)}}}),rO=nO;function iO(t,e){const n=uu.document,r=uu.location&&Sy(uu.location.href);if(!n||!r)return t;const i=t.exception?.values;if(!i?.length)return t;const s=n.documentElement.innerHTML;if(!s)return t;const o=["<!DOCTYPE html>","<html>",...s.split(`
`),"</html>"];return i.forEach(a=>{const c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>sO(u,o,r,e)))}),t}function sO(t,e,n,r){return t.filename!==n||!t.lineno||!e.length||vw(e,t,r),t}const oO="GraphQLClient",aO=(t=>({name:oO,setup(e){cO(e,t),uO(e,t)}}));function cO(t,e){t.on("beforeOutgoingRequestSpan",(n,r)=>{const s=q(n).data||{};if(!(s[Te]==="http.client"))return;const c=s[Lw]||s["http.url"],u=s[Nw]||s["http.method"];if(!Ht(c)||!Ht(u))return;const{endpoints:l}=e,d=Wt(c,l),f=ib(r);if(d&&f){const p=sb(f);if(p){const h=rb(p);n.updateName(`${u} ${c} (${h})`),n.setAttribute("graphql.document",f)}}})}function uO(t,e){t.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:i,type:s,data:o}=n;if(s==="http"&&(i==="fetch"||i==="xhr")){const l=o?.url,{endpoints:d}=e,f=Wt(l,d),p=ib(r);if(f&&o&&p){const h=sb(p);if(!o.graphql&&h){const g=rb(h);o["graphql.document"]=h.query,o["graphql.operation"]=g}}}})}function rb(t){const{query:e,operationName:n}=t,{operationName:r=n,operationType:i}=lO(e);return r?`${i} ${r}`:`${i}`}function ib(t){const e="xhr"in t;let n;if(e){const r=t.xhr[yn];n=r&&Aa(r.body)[0]}else{const r=Gd(t.input);n=Aa(r)[0]}return n}function lO(t){const e=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=t.match(e);if(r)return{operationType:r[1],operationName:r[2]};const i=t.match(n);return i?{operationType:i[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function sb(t){let e;try{const n=JSON.parse(t);!!n.query&&(e=n)}finally{return e}}const dO=aO,Re=G,Yd="sentryReplaySession",fO="replay_event",Jd="Unable to send Replay",pO=3e5,hO=9e5,gO=5e3,mO=5500,_O=6e4,yO=5e3,vO=3,Xh=15e4,vo=5e3,bO=3e3,SO=300,Kd=2e7,EO=4999,wO=5e4,Zh=36e5;var TO=Object.defineProperty,IO=(t,e,n)=>e in t?TO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qh=(t,e,n)=>IO(t,typeof e!="symbol"?e+"":e,n),He=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(He||{});function kO(t){return t.nodeType===t.ELEMENT_NODE}function ps(t){return t?.host?.shadowRoot===t}function hs(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function RO(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}function xO(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}function Ma(t){try{const e=t.rules||t.cssRules;return e?RO(Array.from(e,ob).join("")):null}catch{return null}}function CO(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style,i=r[n],s=r.getPropertyPriority(i);e+=`${i}:${r.getPropertyValue(i)}${s?" !important":""};`}return`${t.selectorText} { ${e} }`}function ob(t){let e;if(MO(t))try{e=Ma(t.styleSheet)||xO(t)}catch{}else if(PO(t)){let n=t.cssText;const r=t.selectorText.includes(":"),i=typeof t.style.all=="string"&&t.style.all;if(i&&(n=CO(t)),r&&(n=AO(n)),r||i)return n}return e||t.cssText}function AO(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function MO(t){return"styleSheet"in t}function PO(t){return"selectorText"in t}let ab=class{constructor(){Qh(this,"idNodeMap",new Map),Qh(this,"nodeMetaMap",new WeakMap)}getId(e){return e?this.getMeta(e)?.id??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function OO(){return new ab}function gc({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function ks({isMasked:t,element:e,value:n,maskInputFn:r}){let i=n||"";return t?(r&&(i=r(i,e)),"*".repeat(i.length)):i}function wi(t){return t.toLowerCase()}function wl(t){return t.toUpperCase()}const eg="__rrweb_original__";function NO(t){const e=t.getContext("2d");if(!e)return!0;const n=50;for(let r=0;r<t.width;r+=n)for(let i=0;i<t.height;i+=n){const s=e.getImageData,o=eg in s?s[eg]:s;if(new Uint32Array(o.call(e,r,i,Math.min(n,t.width-r),Math.min(n,t.height-i)).data.buffer).some(c=>c!==0))return!1}return!0}function Xd(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?wi(e):null}function Pa(t,e,n){return e==="INPUT"&&(n==="radio"||n==="checkbox")?t.getAttribute("value")||"":t.value}function cb(t,e){let n;try{n=new URL(t,e??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const tg={};function ub(t){const e=tg[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(i)}catch{}return tg[t]=r.bind(window)}function Tl(...t){return ub("setTimeout")(...t)}function lb(...t){return ub("clearTimeout")(...t)}function db(t){try{return t.contentDocument}catch{}}let LO=1;const DO=new RegExp("[^a-z0-9-_:]"),Rs=-2;function Zd(){return LO++}function $O(t){if(t instanceof HTMLFormElement)return"form";const e=wi(t.tagName);return DO.test(e)?"div":e}function FO(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let Gr,ng;const UO=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,BO=/^(?:[a-z+]+:)?\/\//i,HO=/^www\..*/i,WO=/^(data:)([^,]*),(.*)/i;function jO(t,e){if(!t||e.size===0)return t;try{const n=t.split(";"),r=[];for(let i of n){if(i=i.trim(),!i)continue;const s=i.indexOf(":");if(s===-1){r.push(i);continue}const o=i.slice(0,s).trim();e.has(o)||r.push(i)}return r.join("; ")+(r.length>0&&t.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),t}}function Oa(t,e){return(t||"").replace(UO,(n,r,i,s,o,a)=>{const c=i||o||a,u=r||s||"";if(!c)return n;if(BO.test(c)||HO.test(c))return`url(${u}${c}${u})`;if(WO.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${FO(e)+c}${u})`;const l=e.split("/"),d=c.split("/");l.pop();for(const f of d)f!=="."&&(f===".."?l.pop():l.push(f));return`url(${u}${l.join("/")}${u})`})}const qO=/^[^ \t\n\r\u000c]+/,zO=/^[, \t\n\r\u000c]+/;function GO(t,e){if(e.trim()==="")return e;let n=0;function r(s){let o;const a=s.exec(e.substring(n));return a?(o=a[0],n+=o.length,o):""}const i=[];for(;r(zO),!(n>=e.length);){let s=r(qO);if(s.slice(-1)===",")s=ei(t,s.substring(0,s.length-1)),i.push(s);else{let o="";s=ei(t,s);let a=!1;for(;;){const c=e.charAt(n);if(c===""){i.push((s+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,i.push((s+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return i.join(", ")}const rg=new WeakMap;function ei(t,e){return!e||e.trim()===""?e:mc(t,e)}function VO(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function mc(t,e){let n=rg.get(t);if(n||(n=t.createElement("a"),rg.set(t,n)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return n.setAttribute("href",e),n.href}function fb(t,e,n,r,i,s,o){if(!r)return r;if(n==="src"||n==="href"&&!(e==="use"&&r[0]==="#"))return ei(t,r);if(n==="xlink:href"&&r[0]!=="#")return ei(t,r);if(n==="background"&&(e==="table"||e==="td"||e==="th"))return ei(t,r);if(n==="srcset")return GO(t,r);if(n==="style"){let a=Oa(r,mc(t));return o&&o.size>0&&(a=jO(a,o)),a}else if(e==="object"&&n==="data")return ei(t,r);return typeof s=="function"?s(n,r,i):r}function pb(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function YO(t,e,n,r){try{if(r&&t.matches(r))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let i=t.classList.length;i--;){const s=t.classList[i];if(e.test(s))return!0}if(n)return t.matches(n)}catch{}return!1}function JO(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function yr(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:yr(t.parentNode,e,n,r+1)}function ti(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(JO(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function Ti(t,e,n,r,i,s){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(s){if(c=yr(o,ti(r,i)),c<0)return!0;a=yr(o,ti(e,n),c>=0?c:1/0)}else{if(a=yr(o,ti(e,n)),a<0)return!1;c=yr(o,ti(r,i),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!s}catch{}return!!s}function KO(t,e,n){const r=t.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=Tl(()=>{i||(e(),i=!0)},n);t.addEventListener("load",()=>{lb(a),i=!0,e()});return}const o="about:blank";if(r.location.href!==o||t.src===o||t.src==="")return Tl(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function XO(t,e,n){let r=!1,i;try{i=t.sheet}catch{return}if(i)return;const s=Tl(()=>{r||(e(),r=!0)},n);t.addEventListener("load",()=>{lb(s),r=!0,e()})}function ZO(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:g,maskInputFn:m,dataURLOptions:_={},inlineImages:v,recordCanvas:I,keepIframeSrcFn:E,newlyAddedElement:C=!1,ignoreCSSAttributes:A}=e,S=QO(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:He.Document,childNodes:[],compatMode:t.compatMode}:{type:He.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:He.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:S};case t.ELEMENT_NODE:return tN(t,{doc:n,blockClass:i,blockSelector:s,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:m,dataURLOptions:_,inlineImages:v,recordCanvas:I,keepIframeSrcFn:E,newlyAddedElement:C,rootId:S,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,ignoreCSSAttributes:A});case t.TEXT_NODE:return eN(t,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:g,maskInputOptions:h,maskInputFn:m,rootId:S});case t.CDATA_SECTION_NODE:return{type:He.CDATA,textContent:"",rootId:S};case t.COMMENT_NODE:return{type:He.Comment,textContent:t.textContent||"",rootId:S};default:return!1}}function QO(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return n===1?void 0:n}function eN(t,e){const{maskAllText:n,maskTextClass:r,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=e,d=t.parentNode&&t.parentNode.tagName;let f=t.textContent;const p=d==="STYLE"?!0:void 0,h=d==="SCRIPT"?!0:void 0,g=d==="TEXTAREA"?!0:void 0;if(p&&f){try{t.nextSibling||t.previousSibling||t.parentNode.sheet?.cssRules&&(f=Ma(t.parentNode.sheet))}catch(_){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_}`,t)}f=Oa(f,mc(e.doc))}h&&(f="SCRIPT_PLACEHOLDER");const m=Ti(t,r,s,i,o,n);if(!p&&!h&&!g&&f&&m&&(f=a?a(f,t.parentElement):f.replace(/[\S]/g,"*")),g&&f&&(c.textarea||m)&&(f=u?u(f,t.parentNode):f.replace(/[\S]/g,"*")),d==="OPTION"&&f){const _=gc({type:null,tagName:d,maskInputOptions:c});f=ks({isMasked:Ti(t,r,s,i,o,_),element:t,value:f,maskInputFn:u})}return{type:He.Text,textContent:f||"",isStyle:p,rootId:l}}function tN(t,e){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:g,maskTextClass:m,unmaskTextClass:_,maskTextSelector:v,unmaskTextSelector:I,ignoreCSSAttributes:E}=e,C=YO(t,r,i,s),A=$O(t);let S={};const w=t.attributes.length;for(let T=0;T<w;T++){const M=t.attributes[T];M.name&&!pb(A,M.name,M.value)&&(S[M.name]=fb(n,A,wi(M.name),M.value,t,c,E))}if(A==="link"&&o){const T=Array.from(n.styleSheets).find(R=>R.href===t.href);let M=null;T&&(M=Ma(T)),M&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=Oa(M,T.href))}if(A==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const T=Ma(t.sheet);T&&(S._cssText=Oa(T,mc(n)))}if(A==="input"||A==="textarea"||A==="select"||A==="option"){const T=t,M=Xd(T),R=Pa(T,wl(A),M),O=T.checked;if(M!=="submit"&&M!=="button"&&R){const U=Ti(T,m,v,_,I,gc({type:M,tagName:wl(A),maskInputOptions:a}));S.value=ks({isMasked:U,element:T,value:R,maskInputFn:u})}O&&(S.checked=O)}if(A==="option"&&(t.selected&&!a.select?S.selected=!0:delete S.selected),A==="canvas"&&f){if(t.__context==="2d")NO(t)||(S.rr_dataURL=t.toDataURL(l.type,l.quality));else if(!("__context"in t)){const T=t.toDataURL(l.type,l.quality),M=n.createElement("canvas");M.width=t.width,M.height=t.height;const R=M.toDataURL(l.type,l.quality);T!==R&&(S.rr_dataURL=T)}}if(A==="img"&&d){Gr||(Gr=n.createElement("canvas"),ng=Gr.getContext("2d"));const T=t,M=T.currentSrc||T.getAttribute("src")||"<unknown-src>",R=T.crossOrigin,O=()=>{T.removeEventListener("load",O);try{Gr.width=T.naturalWidth,Gr.height=T.naturalHeight,ng.drawImage(T,0,0),S.rr_dataURL=Gr.toDataURL(l.type,l.quality)}catch(U){if(T.crossOrigin!=="anonymous"){T.crossOrigin="anonymous",T.complete&&T.naturalWidth!==0?O():T.addEventListener("load",O);return}else console.warn(`Cannot inline img src=${M}! Error: ${U}`)}T.crossOrigin==="anonymous"&&(R?S.crossOrigin=R:T.removeAttribute("crossorigin"))};T.complete&&T.naturalWidth!==0?O():T.addEventListener("load",O)}if((A==="audio"||A==="video")&&(S.rr_mediaState=t.paused?"paused":"played",S.rr_mediaCurrentTime=t.currentTime),h||(t.scrollLeft&&(S.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(S.rr_scrollTop=t.scrollTop)),C){const{width:T,height:M}=t.getBoundingClientRect();S={class:S.class,rr_width:`${T}px`,rr_height:`${M}px`}}A==="iframe"&&!p(S.src)&&(!C&&!db(t)&&(S.rr_src=S.src),delete S.src);let W;try{customElements.get(A)&&(W=!0)}catch{}return{type:He.Element,tagName:A,attributes:S,childNodes:[],isSVG:VO(t)||void 0,needBlock:C,rootId:g,isCustom:W}}function ke(t){return t==null?"":t.toLowerCase()}function nN(t,e){if(e.comment&&t.type===He.Comment)return!0;if(t.type===He.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&cb(t.attributes.href)==="js"))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(ke(t.attributes.name).match(/^msapplication-tile(image|color)$/)||ke(t.attributes.name)==="application-name"||ke(t.attributes.rel)==="icon"||ke(t.attributes.rel)==="apple-touch-icon"||ke(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&ke(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(ke(t.attributes.property).match(/^(og|twitter|fb):/)||ke(t.attributes.name).match(/^(og|twitter):/)||ke(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(ke(t.attributes.name)==="robots"||ke(t.attributes.name)==="googlebot"||ke(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(ke(t.attributes.name)==="author"||ke(t.attributes.name)==="generator"||ke(t.attributes.name)==="framework"||ke(t.attributes.name)==="publisher"||ke(t.attributes.name)==="progid"||ke(t.attributes.property).match(/^article:/)||ke(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(ke(t.attributes.name)==="google-site-verification"||ke(t.attributes.name)==="yandex-verification"||ke(t.attributes.name)==="csrf-token"||ke(t.attributes.name)==="p:domain_verify"||ke(t.attributes.name)==="verify-v1"||ke(t.attributes.name)==="verification"||ke(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function ni(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:I={},inlineImages:E=!1,recordCanvas:C=!1,onSerialize:A,onIframeLoad:S,iframeLoadTimeout:w=5e3,onBlockedImageLoad:W,onStylesheetLoad:T,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:R=()=>!1,newlyAddedElement:O=!1,ignoreCSSAttributes:U}=e;let{preserveWhiteSpace:Y=!0}=e;const ee=ZO(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,dataURLOptions:I,inlineImages:E,recordCanvas:C,keepIframeSrcFn:R,newlyAddedElement:O,ignoreCSSAttributes:U});if(!ee)return console.warn(t,"not serialized"),null;let se;r.hasNode(t)?se=r.getId(t):nN(ee,v)||!Y&&ee.type===He.Text&&!ee.isStyle&&!ee.textContent.replace(/^\s+|\s+$/gm,"").length?se=Rs:se=Zd();const k=Object.assign(ee,{id:se});if(r.add(t,k),se===Rs)return null;A&&A(t);let z=!f;if(k.type===He.Element){z=z&&!k.needBlock;const x=t.shadowRoot;x&&hs(x)&&(k.isShadowHost=!0)}if((k.type===He.Document||k.type===He.Element)&&z){v.headWhitespace&&k.type===He.Element&&k.tagName==="head"&&(Y=!1);const x={doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:I,inlineImages:E,recordCanvas:C,preserveWhiteSpace:Y,onSerialize:A,onIframeLoad:S,iframeLoadTimeout:w,onBlockedImageLoad:W,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:R,ignoreCSSAttributes:U},V=t.childNodes?Array.from(t.childNodes):[];for(const J of V){const K=ni(J,x);K&&k.childNodes.push(K)}if(kO(t)&&t.shadowRoot)for(const J of Array.from(t.shadowRoot.childNodes)){const K=ni(J,x);K&&(hs(t.shadowRoot)&&(K.isShadow=!0),k.childNodes.push(K))}}if(t.parentNode&&ps(t.parentNode)&&hs(t.parentNode)&&(k.isShadow=!0),k.type===He.Element&&k.tagName==="iframe"&&!k.needBlock&&KO(t,()=>{const x=db(t);if(x&&S){const V=ni(x,{doc:x,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:I,inlineImages:E,recordCanvas:C,preserveWhiteSpace:Y,onSerialize:A,onIframeLoad:S,iframeLoadTimeout:w,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:R,ignoreCSSAttributes:U});V&&S(t,V)}},w),k.type===He.Element&&k.tagName==="img"&&!t.complete&&k.needBlock){const x=t,V=()=>{if(x.isConnected&&!x.complete&&W)try{const J=x.getBoundingClientRect();J.width>0&&J.height>0&&W(x,k,J)}catch{}x.removeEventListener("load",V)};x.isConnected&&x.addEventListener("load",V)}return k.type===He.Element&&k.tagName==="link"&&typeof k.attributes.rel=="string"&&(k.attributes.rel==="stylesheet"||k.attributes.rel==="preload"&&typeof k.attributes.href=="string"&&cb(k.attributes.href)==="css")&&XO(t,()=>{if(T){const x=ni(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOMOptions:v,dataURLOptions:I,inlineImages:E,recordCanvas:C,preserveWhiteSpace:Y,onSerialize:A,onIframeLoad:S,iframeLoadTimeout:w,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:R,ignoreCSSAttributes:U});x&&T(t,x)}},M),k.type===He.Element&&delete k.needBlock,k}function rN(t,e){const{mirror:n=new ab,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOM:v=!1,dataURLOptions:I,preserveWhiteSpace:E,onSerialize:C,onIframeLoad:A,iframeLoadTimeout:S,onBlockedImageLoad:w,onStylesheetLoad:W,stylesheetLoadTimeout:T,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:R=new Set([])}=e||{};return ni(t,{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOMOptions:v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:v==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:v===!1?{}:v,dataURLOptions:I,inlineImages:f,recordCanvas:p,preserveWhiteSpace:E,onSerialize:C,onIframeLoad:A,iframeLoadTimeout:S,onBlockedImageLoad:w,onStylesheetLoad:W,stylesheetLoadTimeout:T,keepIframeSrcFn:M,newlyAddedElement:!1,ignoreCSSAttributes:R})}function lt(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Jr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ig={map:{},getId(){return console.error(Jr),-1},getNode(){return console.error(Jr),null},removeNodeFromMap(){console.error(Jr)},has(){return console.error(Jr),!1},reset(){console.error(Jr)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ig=new Proxy(ig,{get(t,e,n){return e==="map"&&console.error(Jr),Reflect.get(t,e,n)}}));function xs(t,e,n={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&n.leading===!1&&(i=o);const a=e-(o-i),c=this;a<=0||a>e?(r&&(lN(r),r=null),i=o,t.apply(c,s)):!r&&n.trailing!==!1&&(r=_c(()=>{i=n.leading===!1?0:Date.now(),r=null,t.apply(c,s)},a))}}function hb(t,e,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(o){_c(()=>{n.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>hb(t,e,s||{},!0)}function Qd(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}let Na=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Na=()=>new Date().getTime());function gb(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:e?.documentElement.scrollLeft||e?.body?.parentElement?.scrollLeft||e?.body?.scrollLeft||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:e?.documentElement.scrollTop||e?.body?.parentElement?.scrollTop||e?.body?.scrollTop||0}}function mb(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function _b(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function yb(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function It(t,e,n,r,i){if(!t)return!1;const s=yb(t);if(!s)return!1;const o=ti(e,n);if(!i){const u=r&&s.matches(r);return o(s)&&!u}const a=yr(s,o);let c=-1;return a<0?!1:(r&&(c=yr(s,ti(null,r))),a>-1&&c<0?!0:a<c)}function iN(t,e){return e.getId(t)!==-1}function lu(t,e){return e.getId(t)===Rs}function vb(t,e){if(ps(t))return!1;const n=e.getId(t);return e.has(n)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?vb(t.parentNode,e):!0:!0}function Il(t){return!!t.changedTouches}function sN(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let n=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function bb(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function Sb(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function kl(t){return!!t?.shadowRoot}class oN{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Eb(t){let e=null;return t.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function aN(t){let e=t,n;for(;n=Eb(e);)e=n;return e}function cN(t){const e=t.ownerDocument;if(!e)return!1;const n=aN(t);return e.contains(n)}function wb(t){const e=t.ownerDocument;return e?e.contains(t)||cN(t):!1}const sg={};function ef(t){const e=sg[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(i)}catch{}return sg[t]=r.bind(window)}function uN(...t){return ef("requestAnimationFrame")(...t)}function _c(...t){return ef("setTimeout")(...t)}function lN(...t){return ef("clearTimeout")(...t)}var oe=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(oe||{}),te=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(te||{}),ut=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(ut||{}),fn=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(fn||{}),Kr=(t=>(t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t))(Kr||{});function tf(t){try{return t.contentDocument}catch{}}function dN(t){try{return t.contentWindow}catch{}}function og(t){return"__ln"in t}class fN{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=n?.next||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&og(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&og(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const ag=(t,e)=>`${t}@${e}`;class pN{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new fN,i=c=>{let u=c,l=Rs;for(;l===Rs;)u=u&&u.nextSibling,l=u&&this.mirror.getId(u);return l},s=c=>{if(!c.parentNode||!wb(c))return;const u=ps(c.parentNode)?this.mirror.getId(Eb(c)):this.mirror.getId(c.parentNode),l=i(c);if(u===-1||l===-1)return r.addNode(c);const d=ni(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{bb(f,this.mirror)&&!It(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Sb(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),kl(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{It(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:g})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${h}px`,height:`${g}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});d&&(e.push({parentId:u,nextId:l,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)cg(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||s(c);for(const c of this.addedSet)!ug(this.droppedSet,c)&&!cg(this.removes,c,this.mirror)||ug(this.movedSet,c)?s(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),l=i(o.value);u!==-1&&l!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const l=u;if(u=u.previous,l){const d=this.mirror.getId(l.value.parentNode);if(i(l.value)===-1)continue;if(d!==-1){c=l;break}else{const p=l.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=l;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),s(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const l=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);l.length<u.style.length&&(l+d).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!lu(e.target,this.mirror))switch(e.type){case"characterData":{const n=e.target.textContent;!It(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==e.oldValue&&this.texts.push({value:Ti(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,yb(e.target)):n.replace(/[\S]/g,"*"):n,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){const o=Xd(n),a=n.tagName;i=Pa(n,a,o);const c=gc({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),u=Ti(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);i=ks({isMasked:u,element:n,value:i,maskInputFn:this.maskInputFn})}if(It(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let s=this.attributeMap.get(e.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!tf(n))r="rr_src";else return;if(s||(s={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(e.target,s)),r==="type"&&n.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!pb(n.tagName,r)&&(s.attributes[r]=fb(this.doc,wi(n.tagName),wi(r),i,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==o.style.getPropertyValue(a)||u!==o.style.getPropertyPriority(a)?u===""?s.styleDiff[a]=c:s.styleDiff[a]=[c,u]:s._unchangedStyles[a]=[c,u]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}break}case"childList":{if(It(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(n=>this.genAdds(n,e.target)),e.removedNodes.forEach(n=>{const r=this.mirror.getId(n),i=ps(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);It(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||lu(n,this.mirror)||!iN(n,this.mirror)||(this.addedSet.has(n)?(Rl(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(e.target)&&r===-1||vb(e.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[ag(r,i)]?Rl(this.movedSet,n):this.removes.push({parentId:i,id:r,isShadow:ps(e.target)&&hs(e.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(lu(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[ag(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);It(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes&&e.childNodes.forEach(r=>this.genAdds(r)),kl(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Rl(t,e){t.delete(e),e.childNodes?.forEach(n=>Rl(t,n))}function cg(t,e,n){return t.length===0?!1:hN(t,e,n)}function hN(t,e,n){let r=e.parentNode;for(;r;){const i=n.getId(r);if(t.some(s=>s.id===i))return!0;r=r.parentNode}return!1}function ug(t,e){return t.size===0?!1:Tb(t,e)}function Tb(t,e){const{parentNode:n}=e;return n?t.has(n)?!0:Tb(t,n):!1}let gs;function gN(t){gs=t}function mN(){gs=void 0}const he=t=>gs?(...n)=>{try{return t(...n)}catch(r){if(gs&&gs(r)===!0)return()=>{};throw r}}:t,ri=[];function Ks(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function Ib(t,e){const n=new pN;ri.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const i=window?.Zone?.__symbol__?.("MutationObserver");i&&window[i]&&(r=window[i]);const s=new r(he(o=>{t.onMutation&&t.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function _N({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const c=xs(he(d=>{const f=Date.now()-a;t(o.map(p=>(p.timeOffset-=f,p)),d),o=[],a=null}),s),u=he(xs(he(d=>{const f=Ks(d),{clientX:p,clientY:h}=Il(d)?d.changedTouches[0]:d;a||(a=Na()),o.push({x:p,y:h,id:r.getId(f),timeOffset:Na()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?te.Drag:d instanceof MouseEvent?te.MouseMove:te.TouchMove)}),i,{trailing:!1})),l=[lt("mousemove",u,n),lt("touchmove",u,n),lt("drag",u,n)];return he(()=>{l.forEach(d=>d())})}function yN({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const l=d=>f=>{const p=Ks(f);if(It(p,r,i,s,!0))return;let h=null,g=d;if("pointerType"in f){switch(f.pointerType){case"mouse":h=fn.Mouse;break;case"touch":h=fn.Touch;break;case"pen":h=fn.Pen;break}h===fn.Touch?ut[d]===ut.MouseDown?g="TouchStart":ut[d]===ut.MouseUp&&(g="TouchEnd"):fn.Pen}else Il(f)&&(h=fn.Touch);h!==null?(u=h,(g.startsWith("Touch")&&h===fn.Touch||g.startsWith("Mouse")&&h===fn.Mouse)&&(h=null)):ut[d]===ut.Click&&(h=u,u=null);const m=Il(f)?f.changedTouches[0]:f;if(!m)return;const _=n.getId(p),{clientX:v,clientY:I}=m;he(t)({type:ut[g],id:_,x:v,y:I,...h!==null&&{pointerType:h}})};return Object.keys(ut).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=wi(d);const p=l(d);if(window.PointerEvent)switch(ut[d]){case ut.MouseDown:case ut.MouseUp:f=f.replace("mouse","pointer");break;case ut.TouchStart:case ut.TouchEnd:return}c.push(lt(f,p,e))}),he(()=>{c.forEach(d=>d())})}function kb({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){const a=he(xs(he(c=>{const u=Ks(c);if(!u||It(u,r,i,s,!0))return;const l=n.getId(u);if(u===e&&e.defaultView){const d=gb(e.defaultView);t({id:l,x:d.left,y:d.top})}else t({id:l,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return lt("scroll",a,e)}function vN({viewportResizeCb:t},{win:e}){let n=-1,r=-1;const i=he(xs(he(()=>{const s=mb(),o=_b();(n!==s||r!==o)&&(t({width:Number(o),height:Number(s)}),n=s,r=o)}),200));return lt("resize",i,e)}const bN=["INPUT","TEXTAREA","SELECT"],lg=new WeakMap;function SN({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:g}){function m(S){let w=Ks(S);const W=S.isTrusted,T=w&&wl(w.tagName);if(T==="OPTION"&&(w=w.parentElement),!w||!T||bN.indexOf(T)<0||It(w,r,i,s,!0))return;const M=w;if(M.classList.contains(o)||a&&M.matches(a))return;const R=Xd(w);let O=Pa(M,T,R),U=!1;const Y=gc({maskInputOptions:c,tagName:T,type:R}),ee=Ti(w,f,h,p,g,Y);(R==="radio"||R==="checkbox")&&(U=w.checked),O=ks({isMasked:ee,element:w,value:O,maskInputFn:u}),_(w,d?{text:O,isChecked:U,userTriggered:W}:{text:O,isChecked:U});const se=w.name;R==="radio"&&se&&U&&e.querySelectorAll(`input[type="radio"][name="${se}"]`).forEach(k=>{if(k!==w){const z=ks({isMasked:ee,element:k,value:Pa(k,T,R),maskInputFn:u});_(k,d?{text:z,isChecked:!U,userTriggered:!1}:{text:z,isChecked:!U})}})}function _(S,w){const W=lg.get(S);if(!W||W.text!==w.text||W.isChecked!==w.isChecked){lg.set(S,w);const T=n.getId(S);he(t)({...w,id:T})}}const I=(l.input==="last"?["change"]:["input","change"]).map(S=>lt(S,he(m),e)),E=e.defaultView;if(!E)return()=>{I.forEach(S=>S())};const C=E.Object.getOwnPropertyDescriptor(E.HTMLInputElement.prototype,"value"),A=[[E.HTMLInputElement.prototype,"value"],[E.HTMLInputElement.prototype,"checked"],[E.HTMLSelectElement.prototype,"value"],[E.HTMLTextAreaElement.prototype,"value"],[E.HTMLSelectElement.prototype,"selectedIndex"],[E.HTMLOptionElement.prototype,"selected"]];return C&&C.set&&I.push(...A.map(S=>hb(S[0],S[1],{set(){he(m)({target:this,isTrusted:!1})}},!1,E))),he(()=>{I.forEach(S=>S())})}function La(t){const e=[];function n(r,i){if(bo("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||bo("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||bo("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||bo("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return n(t,e)}function Fn(t,e,n){let r,i;return t?(t.ownerNode?r=e.getId(t.ownerNode):i=n.getId(t),{styleId:i,id:r}):{}}function EN({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:he((l,d,f)=>{const[p,h]=f,{id:g,styleId:m}=Fn(d,e,n.styleMirror);return(g&&g!==-1||m&&m!==-1)&&t({id:g,styleId:m,adds:[{rule:p,index:h}]}),l.apply(d,f)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:he((l,d,f)=>{const[p]=f,{id:h,styleId:g}=Fn(d,e,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,removes:[{index:p}]}),l.apply(d,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:he((l,d,f)=>{const[p]=f,{id:h,styleId:g}=Fn(d,e,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,replace:p}),l.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:he((l,d,f)=>{const[p]=f,{id:h,styleId:g}=Fn(d,e,n.styleMirror);return(h&&h!==-1||g&&g!==-1)&&t({id:h,styleId:g,replaceSync:p}),l.apply(d,f)})}));const c={};So("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(So("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),So("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),So("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([l,d])=>{u[l]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(u[l].insertRule,{apply:he((f,p,h)=>{const[g,m]=h,{id:_,styleId:v}=Fn(p.parentStyleSheet,e,n.styleMirror);return(_&&_!==-1||v&&v!==-1)&&t({id:_,styleId:v,adds:[{rule:g,index:[...La(p),m||0]}]}),f.apply(p,h)})}),d.prototype.deleteRule=new Proxy(u[l].deleteRule,{apply:he((f,p,h)=>{const[g]=h,{id:m,styleId:_}=Fn(p.parentStyleSheet,e,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&t({id:m,styleId:_,removes:[{index:[...La(p),g]}]}),f.apply(p,h)})})}),he(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([l,d])=>{d.prototype.insertRule=u[l].insertRule,d.prototype.deleteRule=u[l].deleteRule})})}function Rb({mirror:t,stylesheetManager:e},n){let r=null;n.nodeName==="#document"?r=t.getId(n):r=t.getId(n.host);const i=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,s=i?.prototype?Object.getOwnPropertyDescriptor(i?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!i||!s?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return s.get?.call(this)},set(o){const a=s.set?.call(this,o);if(r!==null&&r!==-1)try{e.adoptStyleSheets(o,r)}catch{}return a}}),he(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function wN({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:he((a,c,u)=>{const[l,d,f]=u;if(n.has(l))return s.apply(c,[l,d,f]);const{id:p,styleId:h}=Fn(c.parentRule?.parentStyleSheet,e,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&t({id:p,styleId:h,set:{property:l,value:d,priority:f},index:La(c.parentRule)}),a.apply(c,u)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:he((a,c,u)=>{const[l]=u;if(n.has(l))return o.apply(c,[l]);const{id:d,styleId:f}=Fn(c.parentRule?.parentStyleSheet,e,r.styleMirror);return(d&&d!==-1||f&&f!==-1)&&t({id:d,styleId:f,remove:{property:l},index:La(c.parentRule)}),a.apply(c,u)})}),he(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function TN({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:i,sampling:s,doc:o}){const a=he(u=>xs(he(l=>{const d=Ks(l);if(!d||It(d,e,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:g}=d;t({type:u,id:i.getId(d),currentTime:f,volume:p,muted:h,playbackRate:g})}),s.media||500)),c=[lt("play",a(Kr.Play),o),lt("pause",a(Kr.Pause),o),lt("seeked",a(Kr.Seeked),o),lt("volumechange",a(Kr.VolumeChange),o),lt("ratechange",a(Kr.RateChange),o)];return he(()=>{c.forEach(u=>u())})}function IN({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,s=n.FontFace;n.FontFace=function(c,u,l){const d=new s(c,u,l);return i.set(d,{family:c,buffer:typeof u!="string",descriptors:l,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),d};const o=Qd(e.fonts,"add",function(a){return function(c){return _c(he(()=>{const u=i.get(c);u&&(t(u),i.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=s}),r.push(o),he(()=>{r.forEach(a=>a())})}function kN(t){const{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:o}=t;let a=!0;const c=he(()=>{const u=e.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const l=[],d=u.rangeCount||0;for(let f=0;f<d;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:g,endContainer:m,endOffset:_}=p;It(h,r,i,s,!0)||It(m,r,i,s,!0)||l.push({start:n.getId(h),startOffset:g,end:n.getId(m),endOffset:_})}o({ranges:l})});return c(),lt("selectionchange",c)}function RN({doc:t,customElementCb:e}){const n=t.defaultView;return!n||!n.customElements?()=>{}:Qd(n.customElements,"define",function(i){return function(s,o,a){try{e({define:{name:s}})}catch{}return i.apply(this,[s,o,a])}})}function xN(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};let r;t.recordDOM&&(r=Ib(t,t.doc));const i=_N(t),s=yN(t),o=kb(t),a=vN(t,{win:n}),c=SN(t),u=TN(t);let l=()=>{},d=()=>{},f=()=>{},p=()=>{};t.recordDOM&&(l=EN(t,{win:n}),d=Rb(t,t.doc),f=wN(t,{win:n}),t.collectFonts&&(p=IN(t)));const h=kN(t),g=RN(t),m=[];for(const _ of t.plugins)m.push(_.observer(_.callback,n,_.options));return he(()=>{ri.forEach(_=>_.reset()),r?.disconnect(),i(),s(),o(),a(),c(),u(),l(),d(),f(),p(),h(),g(),m.forEach(_=>_())})}function bo(t){return typeof window[t]<"u"}function So(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class xl{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,i){const s=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),o.set(a,n)),a}getIds(e,n){const r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return n.map(s=>this.getId(e,s,r,i))}getRemoteId(e,n,r){const i=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;const s=i.get(n);return s||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}class CN{constructor(){this.crossOriginIframeMirror=new xl(Zd),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class AN{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new xl(Zd),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new xl(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&e.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(e);const r=tf(e);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const i=this.crossOriginIframeMap.get(e.source);if(!i)return;const s=this.transformCrossOriginEvent(i,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(e,n){switch(n.type){case oe.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:oe.IncrementalSnapshot,data:{source:te.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case oe.Meta:case oe.Load:case oe.DomContentLoaded:return!1;case oe.Plugin:return n;case oe.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case oe.IncrementalSnapshot:switch(n.data.source){case te.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(r.node,i)}),n.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case te.Drag:case te.TouchMove:case te.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case te.ViewportResize:return!1;case te.MediaInteraction:case te.MouseInteraction:case te.Scroll:case te.CanvasMutation:case te.Input:return this.replaceIds(n.data,e,["id"]),n;case te.StyleSheetRule:case te.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case te.Font:return n;case te.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),n;case te.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,e,["styleId"])}),n}}return!1}replace(e,n,r,i){for(const s of i)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=e.getIds(r,n[s]):n[s]=e.getId(r,n[s]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type!==He.Document&&!e.rootId&&(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class MN{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class PN{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!hs(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const r=Ib({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(kb({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),_c(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Rb({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const n=tf(e),r=dN(e);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(Qd(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s);return this.shadowRoot&&wb(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var dg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ON=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Eo=0;Eo<dg.length;Eo++)ON[dg.charCodeAt(Eo)]=Eo;class fg{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class NN{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new oN,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,c)=>({rule:ob(a),index:c}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class LN{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==n)}add(e,n){this.active||(this.active=!0,uN(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}destroy(){}}let $e,Da;try{if(Array.from([1],t=>t*2)[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=t.contentWindow?.Array.from||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}const Ft=OO();function wn(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:g,maskInputOptions:m,slimDOMOptions:_,maskAttributeFn:v,maskInputFn:I,maskTextFn:E,maxCanvasSize:C=null,packFn:A,sampling:S={},dataURLOptions:w={},mousemoveWait:W,recordDOM:T=!0,recordCanvas:M=!1,recordCrossOriginIframes:R=!1,recordAfter:O=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:U=!1,collectFonts:Y=!1,inlineImages:ee=!1,plugins:se,keepIframeSrcFn:k=()=>!1,ignoreCSSAttributes:z=new Set([]),errorHandler:x,onMutation:V,getCanvasManager:J}=t;gN(x);const K=R?window.parent===window:!0;let ce=!1;if(!K)try{window.parent.document&&(ce=!1)}catch{ce=!0}if(K&&!e)throw new Error("emit function is required");if(!K&&!ce)return()=>{};W!==void 0&&S.mousemove===void 0&&(S.mousemove=W),Ft.reset();const Me=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:m!==void 0?m:{},qe=_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_==="all",headMetaDescKeywords:_==="all"}:_||{};sN();let ze,Xe=0;const ft=de=>{for(const Et of se||[])Et.eventProcessor&&(de=Et.eventProcessor(de));return A&&!ce&&(de=A(de)),de};$e=(de,Et)=>{const fe=de;if(fe.timestamp=Na(),ri[0]?.isFrozen()&&fe.type!==oe.FullSnapshot&&!(fe.type===oe.IncrementalSnapshot&&fe.data.source===te.Mutation)&&ri.forEach(et=>et.unfreeze()),K)e?.(ft(fe),Et);else if(ce){const et={type:"rrweb",event:ft(fe),origin:window.location.origin,isCheckout:Et};window.parent.postMessage(et,"*")}if(fe.type===oe.FullSnapshot)ze=fe,Xe=0;else if(fe.type===oe.IncrementalSnapshot){if(fe.data.source===te.Mutation&&fe.data.isAttachIframe)return;Xe++;const et=r&&Xe>=r,ge=n&&ze&&fe.timestamp-ze.timestamp>n;(et||ge)&&Vt(!0)}};const Ge=de=>{$e({type:oe.IncrementalSnapshot,data:{source:te.Mutation,...de}})},un=de=>$e({type:oe.IncrementalSnapshot,data:{source:te.Scroll,...de}}),j=de=>$e({type:oe.IncrementalSnapshot,data:{source:te.CanvasMutation,...de}}),St=de=>$e({type:oe.IncrementalSnapshot,data:{source:te.AdoptedStyleSheet,...de}}),ue=new NN({mutationCb:Ge,adoptedStyleSheetCb:St}),ye=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new CN:new AN({mirror:Ft,mutationCb:Ge,stylesheetManager:ue,recordCrossOriginIframes:R,wrappedEmit:$e});for(const de of se||[])de.getMirror&&de.getMirror({nodeMirror:Ft,crossOriginIframeMirror:ye.crossOriginIframeMirror,crossOriginIframeStyleMirror:ye.crossOriginIframeStyleMirror});const at=new LN,Ue=$N(J,{mirror:Ft,win:window,mutationCb:de=>$e({type:oe.IncrementalSnapshot,data:{source:te.CanvasMutation,...de}}),recordCanvas:M,blockClass:i,blockSelector:s,unblockSelector:o,maxCanvasSize:C,sampling:S.canvas,dataURLOptions:w,errorHandler:x}),it=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new MN:new PN({mutationCb:Ge,scrollCb:un,bypassOptions:{onMutation:V,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Me,dataURLOptions:w,maskAttributeFn:v,maskTextFn:E,maskInputFn:I,recordCanvas:M,inlineImages:ee,sampling:S,slimDOMOptions:qe,iframeManager:ye,stylesheetManager:ue,canvasManager:Ue,keepIframeSrcFn:k,processedNodeManager:at,ignoreCSSAttributes:z},mirror:Ft}),Vt=(de=!1)=>{if(!T)return;$e({type:oe.Meta,data:{href:window.location.href,width:_b(),height:mb()}},de),ue.reset(),it.init(),ri.forEach(fe=>fe.lock());const Et=rN(document,{mirror:Ft,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Me,maskAttributeFn:v,maskInputFn:I,maskTextFn:E,slimDOM:qe,dataURLOptions:w,recordCanvas:M,inlineImages:ee,onSerialize:fe=>{bb(fe,Ft)&&ye.addIframe(fe),Sb(fe,Ft)&&ue.trackLinkElement(fe),kl(fe)&&it.addShadowRoot(fe.shadowRoot,document)},onIframeLoad:(fe,et)=>{ye.attachIframe(fe,et),fe.contentWindow&&Ue.addWindow(fe.contentWindow),it.observeAttachShadow(fe)},onStylesheetLoad:(fe,et)=>{ue.attachLinkElement(fe,et)},onBlockedImageLoad:(fe,et,{width:ge,height:Wi})=>{Ge({adds:[],removes:[],texts:[],attributes:[{id:et.id,attributes:{style:{width:`${ge}px`,height:`${Wi}px`}}}]})},keepIframeSrcFn:k,ignoreCSSAttributes:z});if(!Et)return console.warn("Failed to snapshot the document");$e({type:oe.FullSnapshot,data:{node:Et,initialOffset:gb(window)}}),ri.forEach(fe=>fe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ue.adoptStyleSheets(document.adoptedStyleSheets,Ft.getId(document))};Da=Vt;try{const de=[],Et=et=>he(xN)({onMutation:V,mutationCb:Ge,mousemoveCb:(ge,Wi)=>$e({type:oe.IncrementalSnapshot,data:{source:Wi,positions:ge}}),mouseInteractionCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.MouseInteraction,...ge}}),scrollCb:un,viewportResizeCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.ViewportResize,...ge}}),inputCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.Input,...ge}}),mediaInteractionCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.MediaInteraction,...ge}}),styleSheetRuleCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.StyleSheetRule,...ge}}),styleDeclarationCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.StyleDeclaration,...ge}}),canvasMutationCb:j,fontCb:ge=>$e({type:oe.IncrementalSnapshot,data:{source:te.Font,...ge}}),selectionCb:ge=>{$e({type:oe.IncrementalSnapshot,data:{source:te.Selection,...ge}})},customElementCb:ge=>{$e({type:oe.IncrementalSnapshot,data:{source:te.CustomElement,...ge}})},blockClass:i,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Me,inlineStylesheet:h,sampling:S,recordDOM:T,recordCanvas:M,inlineImages:ee,userTriggeredOnInput:U,collectFonts:Y,doc:et,maskAttributeFn:v,maskInputFn:I,maskTextFn:E,keepIframeSrcFn:k,blockSelector:s,unblockSelector:o,slimDOMOptions:qe,dataURLOptions:w,mirror:Ft,iframeManager:ye,stylesheetManager:ue,shadowDomManager:it,processedNodeManager:at,canvasManager:Ue,ignoreCSSAttributes:z,plugins:se?.filter(ge=>ge.observer)?.map(ge=>({observer:ge.observer,options:ge.options,callback:Wi=>$e({type:oe.Plugin,data:{plugin:ge.name,payload:Wi}})}))||[]},{});ye.addLoadListener(et=>{try{de.push(Et(et.contentDocument))}catch(ge){console.warn(ge)}});const fe=()=>{Vt(),de.push(Et(document))};return document.readyState==="interactive"||document.readyState==="complete"?fe():(de.push(lt("DOMContentLoaded",()=>{$e({type:oe.DomContentLoaded,data:{}}),O==="DOMContentLoaded"&&fe()})),de.push(lt("load",()=>{$e({type:oe.Load,data:{}}),O==="load"&&fe()},window))),()=>{de.forEach(et=>et()),at.destroy(),Da=void 0,mN()}}catch(de){console.warn(de)}}function DN(t){if(!Da)throw new Error("please take full snapshot after start recording");Da(t)}wn.mirror=Ft;wn.takeFullSnapshot=DN;function $N(t,e){try{return t?t(e):new fg}catch{return console.warn("Unable to initialize CanvasManager"),new fg}}var pg;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(pg||(pg={}));const FN=3,UN=5;function nf(t){return t>9999999999?t:t*1e3}function du(t){return t>9999999999?t/1e3:t}function Xs(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:oe.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Tt(e,10,1e3)}}),e.category==="console")))}const BN="button,a";function xb(t){return t.closest(BN)||t}function Cb(t){const e=Ab(t);return!e||!(e instanceof Element)?e:xb(e)}function Ab(t){return HN(t)?t.target:t}function HN(t){return typeof t=="object"&&!!t&&"target"in t}let Un;function WN(t){return Un||(Un=[],jN()),Un.push(t),()=>{const e=Un?Un.indexOf(t):-1;e>-1&&Un.splice(e,1)}}function jN(){rt(Re,"open",function(t){return function(...e){if(Un)try{Un.forEach(n=>n())}catch{}return t.apply(Re,e)}})}const qN=new Set([te.Mutation,te.StyleSheetRule,te.StyleDeclaration,te.AdoptedStyleSheet,te.CanvasMutation,te.Selection,te.MediaInteraction]);function zN(t,e,n){t.handleClick(e,n)}class GN{constructor(e,n,r=Xs){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=WN(()=>{this._lastMutation=hg()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if(YN(n,this._ignoreSelector)||!JN(e))return;const r={timestamp:du(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=du(e)}registerScroll(e=Date.now()){this._lastScroll=du(e)}registerClick(e){const n=xb(e);this._handleMultiClick(n)}_handleMultiClick(e){this._getClicks(e).forEach(n=>{n.clickCount++})}_getClicks(e){return this._clicks.filter(n=>n.node===e)}_checkClicks(){const e=[],n=hg();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)});for(const r of e){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,i=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:o,clickBreadcrumb:a}=e;if(s){const c=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",l={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Re.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,l);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Re.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Js(()=>this._checkClicks(),1e3)}}const VN=["A","BUTTON","INPUT"];function YN(t,e){return!!(!VN.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function JN(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function hg(){return Date.now()/1e3}function KN(t,e){try{if(!XN(e))return;const{source:n}=e.data;if(qN.has(n)&&t.registerMutation(e.timestamp),n===te.Scroll&&t.registerScroll(e.timestamp),ZN(e)){const{type:r,id:i}=e.data,s=wn.mirror.getNode(i);s instanceof HTMLElement&&r===ut.Click&&t.registerClick(s)}}catch{}}function XN(t){return t.type===FN}function ZN(t){return t.data.source===te.MouseInteraction}function Zt(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var rf=(t=>(t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t))(rf||{});const QN=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function eL(t){const e={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const n in t)if(QN.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),e[r]=t[n]}return e}const tL=t=>e=>{if(!t.isEnabled())return;const n=nL(e);if(!n)return;const r=e.name==="click",i=r?e.event:void 0;r&&t.clickDetector&&i?.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&zN(t.clickDetector,n,Cb(e.event)),Xs(t,n)};function Mb(t,e){const n=wn.mirror.getId(t),r=n&&wn.mirror.getNode(n),i=r&&wn.mirror.getMeta(r),s=i&&iL(i)?i:null;return{message:e,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(o=>o.type===rf.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:eL(s.attributes)}}:{}}}function nL(t){const{target:e,message:n}=rL(t);return Zt({category:`ui.${t.name}`,...Mb(e,n)})}function rL(t){const e=t.name==="click";let n,r=null;try{r=e?Cb(t.event):Ab(t.event),n=vt(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function iL(t){return t.type===rf.Element}function sL(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=oL(e);n&&Xs(t,n)}function oL(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:i,key:s,target:o}=t;if(!o||aL(o)||!s)return null;const a=e||r||i,c=s.length===1;if(!a&&c)return null;const u=vt(o,{maxStringLength:200})||"<unknown>",l=Mb(o,u);return Zt({category:"ui.keyDown",message:u,data:{...l.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:i,key:s}})}function aL(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const cL={resource:pL,paint:dL,navigation:fL};function fu(t,e){return({metric:n})=>void e.replayPerformanceEntries.push(t(n))}function uL(t){return t.map(lL).filter(Boolean)}function lL(t){const e=cL[t.entryType];return e?e(t):null}function Ii(t){return((ot()||Re.performance.timeOrigin)+t)/1e3}function dL(t){const{duration:e,entryType:n,name:r,startTime:i}=t,s=Ii(i);return{type:n,name:r,start:s,end:s+e,data:void 0}}function fL(t){const{entryType:e,name:n,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:f,startTime:p,transferSize:h,type:g}=t;return i===0?null:{type:`${e}.${g}`,start:Ii(p),end:Ii(s),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:i,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:s,redirectCount:f}}}function pL(t){const{entryType:e,initiatorType:n,name:r,responseEnd:i,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:Ii(s),end:Ii(i),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function hL(t){const e=t.entries[t.entries.length-1],n=e?.element?[e.element]:void 0;return sf(t,"largest-contentful-paint",n)}function gL(t){return t.sources!==void 0}function mL(t){const e=[],n=[];for(const r of t.entries)if(gL(r)){const i=[];for(const s of r.sources)if(s.node){n.push(s.node);const o=wn.mirror.getId(s.node);o&&i.push(o)}e.push({value:r.value,nodeIds:i.length?i:void 0})}return sf(t,"cumulative-layout-shift",n,e)}function _L(t){const e=t.entries[t.entries.length-1],n=e?.target?[e.target]:void 0;return sf(t,"interaction-to-next-paint",n)}function sf(t,e,n,r){const i=t.value,s=t.rating,o=Ii(i);return{type:"web-vital",name:e,start:o,end:o,data:{value:i,size:i,rating:s,nodeIds:n?n.map(a=>wn.mirror.getId(a)):void 0,attributions:r}}}function yL(t){function e(i){t.performanceEntries.includes(i)||t.performanceEntries.push(i)}function n({entries:i}){i.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push($r(i,n))}),r.push(Wd(fu(hL,t)),Hd(fu(mL,t)),xv(fu(_L,t))),()=>{r.forEach(i=>i())}}const X=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,vL='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function bL(){const t=new Blob([vL]);return URL.createObjectURL(t)}const gg=["log","warn","error"],zo="[Replay] ";function pu(t,e="info"){zt({category:"console",data:{logger:"replay"},level:e,message:`${zo}${t}`},{level:e})}function SL(){let t=!1,e=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{t=!!r.captureExceptions,e=!!r.traceInternals}};return X?(gg.forEach(r=>{n[r]=(...i)=>{y[r](zo,...i),e&&pu(i.join(""),ba(r))}}),n.exception=(r,...i)=>{i.length&&n.error&&n.error(...i),y.error(zo,r),t?Pe(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):e&&pu(r,"error")},n.infoTick=(...r)=>{y.log(zo,...r),e&&setTimeout(()=>pu(r[0]),0)}):gg.forEach(r=>{n[r]=()=>{}}),n}const Z=SL();class of extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Kd}.`)}}class Pb{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>Kd)throw new of;this.events.push(e)}finish(){return new Promise(e=>{const n=this.events;this.clear(),e(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(n=>n.timestamp).sort()[0];return e?nf(e):null}}class EL{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){X&&Z.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise((i,s)=>{const o=({data:a})=>{const c=a;if(c.method===e&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){X&&Z.error("Error in compression worker: ",c.response),s(new Error("Error in compression worker"));return}i(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:n})})}_getAndIncrementId(){return this._id++}}class wL{constructor(e){this._worker=new EL(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=nf(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>Kd?Promise.reject(new of):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{X&&Z.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class TL{constructor(e){this._fallback=new Pb,this._compression=new wL(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){X&&Z.exception(e,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n,waitForCheckout:r}=this._fallback,i=[];for(const s of e)i.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(i),this._fallback.clear()}catch(s){X&&Z.exception(s,"Failed to add events when switching buffers.")}}}function IL({useCompression:t,workerUrl:e}){if(t&&window.Worker){const n=kL(e);if(n)return n}return X&&Z.log("Using simple buffer"),new Pb}function kL(t){try{const e=t||RL();if(!e)return;X&&Z.log(`Using compression worker${t?` from ${t}`:""}`);const n=new Worker(e);return new TL(n)}catch(e){X&&Z.exception(e,"Failed to create compression worker")}}function RL(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?bL():""}function af(){try{return"sessionStorage"in Re&&!!Re.sessionStorage}catch{return!1}}function xL(t){CL(),t.session=void 0}function CL(){if(af())try{Re.sessionStorage.removeItem(Yd)}catch{}}function Ob(t){return t===void 0?!1:Math.random()<t}function yc(t){if(af())try{Re.sessionStorage.setItem(Yd,JSON.stringify(t))}catch{}}function Nb(t){const e=Date.now(),n=t.id||Ye(),r=t.started||e,i=t.lastActivity||e,s=t.segmentId||0,o=t.sampled,a=t.previousSessionId,c=t.dirty||!1;return{id:n,started:r,lastActivity:i,segmentId:s,sampled:o,previousSessionId:a,dirty:c}}function AL(t,e){return Ob(t)?"session":e?"buffer":!1}function mg({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const i=AL(t,e),s=Nb({sampled:i,previousSessionId:r});return n&&yc(s),s}function ML(){if(!af())return null;try{const t=Re.sessionStorage.getItem(Yd);if(!t)return null;const e=JSON.parse(t);return X&&Z.infoTick("Loading existing session"),Nb(e)}catch{return null}}function Cl(t,e,n=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=n}function Lb(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return Cl(t.started,e,r)||Cl(t.lastActivity,n,r)}function Db(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!(!Lb(t,{sessionIdleExpire:e,maxReplayDuration:n})||t.sampled==="buffer"&&t.segmentId===0)}function hu({sessionIdleExpire:t,maxReplayDuration:e,previousSessionId:n},r){const i=r.stickySession&&ML();return i?Db(i,{sessionIdleExpire:t,maxReplayDuration:e})?(X&&Z.infoTick("Session in sessionStorage is expired, creating new one..."),mg(r,{previousSessionId:i.id})):i:(X&&Z.infoTick("Creating new session"),mg(r,{previousSessionId:n}))}function PL(t){return t.type===oe.Custom}function cf(t,e,n){return Fb(t,e)?($b(t,e,n),!0):!1}function OL(t,e,n){return Fb(t,e)?$b(t,e,n):Promise.resolve(null)}async function $b(t,e,n){const{eventBuffer:r}=t;if(!r||r.waitForCheckout&&!n)return null;const i=t.recordingMode==="buffer";try{n&&i&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const s=t.getOptions(),o=NL(e,s.beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(s){const o=s&&s instanceof of,a=o?"addEventSizeExceeded":"addEvent",c=$();if(c){const u=o?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(o&&i)return r.clear(),r.waitForCheckout=!0,null;t.handleException(s),await t.stop({reason:a})}}function Fb(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=nf(e.timestamp);return n+t.timeouts.sessionIdlePause<Date.now()?!1:n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(X&&Z.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function NL(t,e){try{if(typeof e=="function"&&PL(t))return e(t)}catch(n){return X&&Z.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return t}function uf(t){return!t.type}function Al(t){return t.type==="transaction"}function LL(t){return t.type==="replay_event"}function _g(t){return t.type==="feedback"}function DL(t){return(e,n)=>{if(!t.isEnabled()||!uf(e)&&!Al(e))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(Al(e)){$L(t,e);return}FL(t,e)}}}function $L(t,e){const n=t.getContext();e.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}function FL(t,e){const n=t.getContext();if(e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();typeof r=="function"&&!r(e)||Js(async()=>{try{await t.sendBufferedReplayOrFlush()}catch(i){t.handleException(i)}})}function UL(t){return e=>{!t.isEnabled()||!uf(e)||BL(t,e)}}function BL(t,e){const n=e.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Zt({category:"replay.hydrate-error",data:{url:Ur()}});Xs(t,r)}}function HL(t){const e=$();e&&e.on("beforeAddBreadcrumb",n=>WL(t,n))}function WL(t,e){if(!t.isEnabled()||!Ub(e))return;const n=jL(e);n&&Xs(t,n)}function jL(t){return!Ub(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:t.category==="console"?qL(t):Zt(t)}function qL(t){const e=t.data?.arguments;if(!Array.isArray(e)||e.length===0)return Zt(t);let n=!1;const r=e.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>vo?(n=!0,`${i.slice(0,vo)}`):i;if(typeof i=="object")try{const s=Tt(i,7);return JSON.stringify(s).length>vo?(n=!0,`${JSON.stringify(s,null,2).slice(0,vo)}`):s}catch{}return i});return Zt({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Ub(t){return!!t.category}function zL(t,e){return t.type||!t.exception?.values?.length?!1:!!e.originalException?.__rrweb__}function Bb(){const t=ne().getPropagationContext().dsc;t&&delete t.replay_id;const e=De();if(e){const n=qt(e);delete n.replay_id}}function GL(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:oe.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function VL(t,e){return t.recordingMode!=="buffer"||e.message===Jd||!e.exception||e.type?!1:Ob(t.getOptions().errorSampleRate)}function YL(t){return Object.assign((e,n)=>{if(!t.isEnabled()||t.isPaused())return e;if(LL(e))return delete e.breadcrumbs,e;if(!uf(e)&&!Al(e)&&!_g(e))return e;if(!t.checkAndHandleExpiredSession())return Bb(),e;if(_g(e))return t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),GL(t,e),e;if(zL(e,n)&&!t.getOptions()._experiments.captureExceptions)return X&&Z.log("Ignoring error from rrweb internals",e),null;const i=VL(t,e);if((i||t.recordingMode==="session")&&(e.tags={...e.tags,replayId:t.getSessionId()}),i&&t.recordingMode==="buffer"&&t.session?.sampled==="buffer"){const o=t.session;o.dirty=!0,t.getOptions().stickySession&&yc(o)}return e},{id:"Replay"})}function vc(t,e){return e.map(({type:n,start:r,end:i,name:s,data:o})=>{const a=t.throttledAddEvent({type:oe.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:i,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function JL(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}function KL(t){return e=>{if(!t.isEnabled())return;const n=JL(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate(()=>(vc(t,[n]),!1)))}}function XL(t,e){return X&&t.getOptions()._experiments.traceInternals?!1:Ey(e,$())}function Hb(t,e){t.isEnabled()&&e!==null&&(XL(t,e.name)||t.addUpdate(()=>(vc(t,[e]),!0)))}function bc(t){if(!t)return;const e=new TextEncoder;try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Lv(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function Wb(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function $a(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function jb(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:s,statusCode:o,request:a,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:i,data:{method:s,statusCode:o,request:a,response:c}}}function Cs(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function Gn(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:i,warnings:s}=ZL(n);return r.body=i,s?.length&&(r._meta={warnings:s}),r}function Ml(t,e){return Object.entries(t).reduce((n,[r,i])=>{const s=r.toLowerCase();return e.includes(s)&&t[r]&&(n[s]=i),n},{})}function ZL(t){if(!t||typeof t!="string")return{body:t};const e=t.length>Xh,n=QL(t);if(e){const r=t.slice(0,Xh);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function QL(t){const e=t[0],n=t[t.length-1];return e==="["&&n==="]"||e==="{"&&n==="}"}function Fa(t,e){const n=eD(t);return Wt(n,e)}function eD(t,e=Re.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(Re.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;return!t.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function tD(t,e,n){try{const r=await rD(t,e,n),i=jb("resource.fetch",r);Hb(n.replay,i)}catch(r){X&&Z.exception(r,"Failed to capture fetch breadcrumb")}}function nD(t,e){const{input:n,response:r}=e,i=n?Gd(n):void 0,s=bc(i),o=r?Wb(r.headers.get("content-length")):void 0;s!==void 0&&(t.data.request_body_size=s),o!==void 0&&(t.data.response_body_size=o)}async function rD(t,e,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=e,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=t.data,d=Fa(o,n.networkDetailAllowUrls)&&!Fa(o,n.networkDetailDenyUrls),f=d?iD(n,e.input,u):Cs(u),p=await sD(d,n,e.response,l);return{startTimestamp:i,endTimestamp:s,url:o,method:a,statusCode:c,request:f,response:p}}function iD({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const i=n?cD(n,e):{};if(!t)return Gn(i,r,void 0);const s=Gd(n),[o,a]=Aa(s,Z),c=Gn(i,r,o);return a?$a(c,a):c}async function sD(t,{networkCaptureBodies:e,networkResponseHeaders:n},r,i){if(!t&&i!==void 0)return Cs(i);const s=r?qb(r.headers,n):{};if(!r||!e&&i!==void 0)return Gn(s,i,void 0);const[o,a]=await aD(r),c=oD(o,{networkCaptureBodies:e,responseBodySize:i,captureDetails:t,headers:s});return a?$a(c,a):c}function oD(t,{networkCaptureBodies:e,responseBodySize:n,captureDetails:r,headers:i}){try{const s=t?.length&&n===void 0?bc(t):n;return r?e?Gn(i,s,t):Gn(i,s,void 0):Cs(s)}catch(s){return X&&Z.exception(s,"Failed to serialize response body"),Gn(i,n,void 0)}}async function aD(t){const e=uD(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await lD(e)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(X&&Z.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(X&&Z.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function qb(t,e){const n={};return e.forEach(r=>{t.get(r)&&(n[r]=t.get(r))}),n}function cD(t,e){return t.length===1&&typeof t[0]!="string"?yg(t[0],e):t.length===2?yg(t[1],e):{}}function yg(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?qb(n,e):Array.isArray(n)?{}:Ml(n,e):{}}function uD(t){try{return t.clone()}catch(e){X&&Z.exception(e,"Failed to clone response body")}}function lD(t){return new Promise((e,n)=>{const r=Js(()=>n(new Error("Timeout while trying to read response body")),500);dD(t).then(i=>e(i),i=>n(i)).finally(()=>clearTimeout(r))})}async function dD(t){return await t.text()}async function fD(t,e,n){try{const r=hD(t,e,n),i=jb("resource.xhr",r);Hb(n.replay,i)}catch(r){X&&Z.exception(r,"Failed to capture xhr breadcrumb")}}function pD(t,e){const{xhr:n,input:r}=e;if(!n)return;const i=bc(r),s=n.getResponseHeader("content-length")?Wb(n.getResponseHeader("content-length")):_D(n.response,n.responseType);i!==void 0&&(t.data.request_body_size=i),s!==void 0&&(t.data.response_body_size=s)}function hD(t,e,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:o,xhr:a}=e,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:f}=t.data;if(!c)return null;if(!a||!Fa(c,n.networkDetailAllowUrls)||Fa(c,n.networkDetailDenyUrls)){const A=Cs(d),S=Cs(f);return{startTimestamp:i,endTimestamp:s,url:c,method:u,statusCode:l,request:A,response:S}}const p=a[yn],h=p?Ml(p.request_headers,n.networkRequestHeaders):{},g=Ml(Dv(a),n.networkResponseHeaders),[m,_]=n.networkCaptureBodies?Aa(o,Z):[void 0],[v,I]=n.networkCaptureBodies?gD(a):[void 0],E=Gn(h,d,m),C=Gn(g,f,v);return{startTimestamp:i,endTimestamp:s,url:c,method:u,statusCode:l,request:_?$a(E,_):E,response:I?$a(C,I):C}}function gD(t){const e=[];try{return[t.responseText]}catch(n){e.push(n)}try{return mD(t.response,t.responseType)}catch(n){e.push(n)}return X&&Z.warn("Failed to get xhr response body",...e),[void 0]}function mD(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch(n){return X&&Z.exception(n,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return X&&Z.log("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function _D(t,e){try{const n=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return bc(n)}catch{return}}function yD(t){const e=$();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o}=t.getOptions(),a={replay:t,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:s,networkResponseHeaders:o};e&&e.on("beforeAddBreadcrumb",(c,u)=>vD(a,c,u))}catch{}}function vD(t,e,n){if(e.data)try{bD(e)&&ED(n)&&(pD(e,n),fD(e,n,t)),SD(e)&&wD(n)&&(nD(e,n),tD(e,n,t))}catch(r){X&&Z.exception(r,"Error when enriching network breadcrumb")}}function bD(t){return t.category==="xhr"}function SD(t){return t.category==="fetch"}function ED(t){return t?.xhr}function wD(t){return t?.response}function TD(t){const e=$();Nv(tL(t)),hc(KL(t)),HL(t),yD(t);const n=YL(t);ty(n),e&&(e.on("beforeSendEvent",UL(t)),e.on("afterSendEvent",DL(t)),e.on("createDsc",r=>{const i=t.getSessionId();i&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(r.replay_id=i)}),e.on("spanStart",r=>{t.lastActiveSpan=r}),e.on("spanEnd",r=>{t.lastActiveSpan=r}),e.on("beforeSendFeedback",async(r,i)=>{const s=t.getSessionId();i?.includeReplay&&t.isEnabled()&&s&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await t.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=s)}),e.on("openFeedbackWidget",async()=>{await t.sendBufferedReplayOrFlush()}))}async function ID(t){try{return Promise.all(vc(t,[kD(Re.performance.memory)]))}catch{return[]}}function kD(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function RD(t,e,n){return rk(t,e,{...n,setTimeoutImpl:Js})}const wo=G.navigator;function xD(){return/iPhone|iPad|iPod/i.test(wo?.userAgent??"")||/Macintosh/i.test(wo?.userAgent??"")&&wo?.maxTouchPoints&&wo?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function CD(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession()){X&&Z.warn("Received replay event after session expired.");return}const i=r||!e;e=!0,t.clickDetector&&KN(t.clickDetector,n),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&i&&t.setInitialState(),!cf(t,n,i))return!0;if(!i)return!1;const s=t.session;if(MD(t,i),t.recordingMode==="buffer"&&s&&t.eventBuffer&&!s.dirty){const o=t.eventBuffer.getEarliestTimestamp();o&&(X&&Z.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),s.started=o,t.getOptions().stickySession&&yc(s))}return s?.previousSessionId||t.recordingMode==="session"&&t.flush(),!0})}}function AD(t){const e=t.getOptions();return{type:oe.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function MD(t,e){!e||!t.session||t.session.segmentId!==0||cf(t,AD(t),!1)}function PD(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function OD(t,e,n,r){return Gt(q_(t,Ka(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function ND({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}
`;if(typeof t=="string")n=`${r}${t}`;else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+t.length),n.set(s),n.set(t,s.length)}return n}async function LD({client:t,scope:e,replayId:n,event:r}){const i=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,s={event_id:n,integrations:i};t.emit("preprocessEvent",r,s);const o=await X_(t.getOptions(),r,s,e,t,je());if(!o)return null;t.emit("postprocessEvent",o,s),o.platform=o.platform||"javascript";const a=t.getSdkMetadata(),{name:c,version:u,settings:l}=a?.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:l},o}async function DD({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:i,session:s}){const o=ND({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=$(),f=ne(),p=d?.getTransport(),h=d?.getDsn();if(!d||!p||!h||!s.sampled)return Promise.resolve({});const g={type:fO,replay_start_timestamp:l/1e3,timestamp:i/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:e,segment_id:n,replay_type:s.sampled},m=await LD({scope:f,client:d,replayId:e,event:g});if(!m)return d.recordDroppedEvent("event_processor","replay"),X&&Z.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete m.sdkProcessingMetadata;const _=OD(m,o,h,d.getOptions().tunnel);let v;try{v=await p.send(_)}catch(E){const C=new Error(Jd);try{C.cause=E}catch{}throw C}if(typeof v.statusCode=="number"&&(v.statusCode<200||v.statusCode>=300))throw new zb(v.statusCode);const I=dy({},v);if(ly(I,"replay"))throw new lf(I);return v}class zb extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class lf extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Gb(t,e={count:0,interval:yO}){const{recordingData:n,onError:r}=t;if(n.length)try{return await DD(t),!0}catch(i){if(i instanceof zb||i instanceof lf)throw i;if(cd("Replays",{_retryCount:e.count}),r&&r(i),e.count>=vO){const s=new Error(`${Jd} - max retries exceeded`);try{s.cause=i}catch{}throw s}return e.interval*=++e.count,new Promise((s,o)=>{Js(async()=>{try{await Gb(t,e),s(!0)}catch(a){o(a)}},e.interval)})}}const Vb="__THROTTLED",$D="__SKIPPED";function FD(t,e,n){const r=new Map,i=a=>{const c=a-n;r.forEach((u,l)=>{l<c&&r.delete(l)})},s=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(i(c),s()>=e){const l=o;return o=!0,l?$D:Vb}o=!1;const u=r.get(c)||0;return r.set(c,u+1),t(...a)}}class UD{constructor({options:e,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:pO,sessionIdleExpire:hO},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=RD(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=FD((o,a)=>OL(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(bO,r),timeout:r,scrollTimeout:SO,ignoreSelector:i?i.join(","):""}:void 0;if(s&&(this.clickDetector=new GN(this,s)),X){const o=e._experiments;Z.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{Re.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=Zt({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=Zt({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{sL(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){X&&Z.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options,i=n<=0&&r<=0;if(this._requiresManualStart=i,!i){if(this._initializeSessionForSampling(e),!this.session){X&&Z.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",X&&Z.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){X&&Z.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){X&&Z.log("Buffering is in progress, call `flush()` to save the replay");return}X&&Z.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=hu({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){X&&Z.log("Buffering is in progress, call `flush()` to save the replay");return}X&&Z.infoTick("Starting replay in buffer mode");const e=hu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=wn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:_O}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:CD(this),...xD(),onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{X&&Z.log(`Stopping Replay${n?` triggered by ${n}`:""}`),Bb(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,xL(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),X&&Z.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),X&&Z.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();X&&Z.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(e){if(!(e&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Cl(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${Re.location.pathname}${Re.location.hash}${Re.location.search}`,n=`${Re.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===Vb){const i=Zt({category:"replay.throttled"});this.addUpdate(()=>!cf(this,{type:UN,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastActiveSpan||De(),n=e&&Le(e),i=(n&&q(n).data||{})[_e];if(!(!n||!i||!["route","custom"].includes(i)))return q(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=IL({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=hu({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return Db(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{Re.document.addEventListener("visibilitychange",this._handleVisibilityChange),Re.addEventListener("blur",this._handleWindowBlur),Re.addEventListener("focus",this._handleWindowFocus),Re.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(TD(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=yL(this)}_removeListeners(){try{Re.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Re.removeEventListener("blur",this._handleWindowBlur),Re.removeEventListener("focus",this._handleWindowFocus),Re.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){!this.session||Lb(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){X&&Z.log("Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:oe.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=uL(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;e=e.filter(r=>r.start>=n)}return Promise.all(vc(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||this._requiresManualStart||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){X&&Z.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await ID(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await Gb({replayId:e,recordingData:s,segmentId:i,eventContext:r,session:this.session,timestamp:n,onError:o=>this.handleException(o)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=$();if(r){const i=n instanceof lf?"ratelimit_backoff":"send_error";r.recordDroppedEvent(i,"replay")}}}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){X&&Z.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,i=Date.now()-n;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,o=i>this._options.maxReplayDuration+5e3;if(s||o){X&&Z.log(`Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`),s&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&X&&Z.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&yc(this.session)}_onMutationHandler(e){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&e.some(a=>{const c=PD(a.target),u=n.join(",");return c?.matches(u)}))return!1;const r=e.length,i=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,o=i&&r>i;if(r>s||o){const a=Zt({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(a)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Zi(t,e){return[...t,...e].join(",")}function BD({mask:t,unmask:e,block:n,unblock:r,ignore:i}){const s=["base","iframe[srcdoc]:not([src])"],o=Zi(t,[".sentry-mask","[data-sentry-mask]"]),a=Zi(e,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:Zi(n,[".sentry-block","[data-sentry-block]",...s]),unblockSelector:Zi(r,[]),ignoreSelector:Zi(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function HD({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&t.matches(i.unmaskTextSelector)?s:n.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const vg='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',WD=["content-length","content-type","accept"];let bg=!1;const jD=(t=>new qD(t));class qD{constructor({flushMinDelay:e=gO,flushMaxDelay:n=mO,minReplayDuration:r=EO,maxReplayDuration:i=Zh,stickySession:s=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:l=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:I=[],networkResponseHeaders:E=[],mask:C=[],maskAttributes:A=["title","placeholder","aria-label"],unmask:S=[],block:w=[],unblock:W=[],ignore:T=[],maskFn:M,beforeAddRecordingEvent:R,beforeErrorSampling:O,onError:U}={}){this.name="Replay";const Y=BD({mask:C,unmask:S,block:w,unblock:W,ignore:T});if(this._recordingOptions={maskAllInputs:l,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:M,maskInputFn:M,maskAttributeFn:(ee,se,k)=>HD({maskAttributes:A,maskAllText:u,privacyOptions:Y,key:ee,value:se,el:k}),...Y,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ee=>{try{ee.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,wO),maxReplayDuration:Math.min(i,Zh),stickySession:s,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:l,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:g,networkDetailAllowUrls:m,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:Sg(I),networkResponseHeaders:Sg(E),beforeAddRecordingEvent:R,beforeErrorSampling:O,onError:U,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${vg}`:vg,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&Ta())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return bg}set _isInitialized(e){bg=e}afterAllSetup(e){!Ta()||this._replay||(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(e){if(this._replay?.isEnabled())return this._replay.getSessionId(e)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const n=zD(this._initialOptions,e);this._replay=new UD({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const n=e.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function zD(t,e){const n=e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...t},i=xr(n.replaysSessionSampleRate),s=xr(n.replaysOnErrorSampleRate);return i==null&&s==null&&tr(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),i!=null&&(r.sessionSampleRate=i),s!=null&&(r.errorSampleRate=s),r}function Sg(t){return[...WD,...t.map(e=>e.toLowerCase())]}function GD(){return $()?.getIntegrationByName("Replay")}var VD=Object.defineProperty,YD=(t,e,n)=>e in t?VD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eg=(t,e,n)=>YD(t,typeof e!="symbol"?e+"":e,n);class JD{constructor(){Eg(this,"idNodeMap",new Map),Eg(this,"nodeMetaMap",new WeakMap)}getId(e){return e?this.getMeta(e)?.id??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function KD(){return new JD}function XD(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function Pl(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:Pl(t.parentNode,e,n,r+1)}function wg(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(XD(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}const Xr=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Tg={map:{},getId(){return console.error(Xr),-1},getNode(){return console.error(Xr),null},removeNodeFromMap(){console.error(Xr)},has(){return console.error(Xr),!1},reset(){console.error(Xr)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Tg=new Proxy(Tg,{get(t,e,n){return e==="map"&&console.error(Xr),Reflect.get(t,e,n)}}));function df(t,e,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(o){Jb(()=>{n.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>df(t,e,s||{},!0)}function ff(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}Date.now().toString();function ZD(t){if(!t)return null;try{return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}catch{return null}}function Sc(t,e,n,r,i){if(!t)return!1;const s=ZD(t);if(!s)return!1;const o=wg(e,n),a=Pl(s,o);let c=-1;return a<0?!1:(r&&(c=Pl(s,wg(null,r))),a>-1&&c<0?!0:a<c)}const Ig={};function Yb(t){const e=Ig[t];if(e)return e;const n=window.document;let r=window[t];if(n&&typeof n.createElement=="function")try{const i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);const s=i.contentWindow;s&&s[t]&&(r=s[t]),n.head.removeChild(i)}catch{}return Ig[t]=r.bind(window)}function fr(...t){return Yb("requestAnimationFrame")(...t)}function Jb(...t){return Yb("setTimeout")(...t)}var ki=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(ki||{});let Go;function QD(t){Go=t}const gu=t=>Go?(...n)=>{try{return t(...n)}catch(r){if(Go&&Go(r)===!0)return()=>{};throw r}}:t;var ii="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e$=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var To=0;To<ii.length;To++)e$[ii.charCodeAt(To)]=To;var t$=function(t){var e=new Uint8Array(t),n,r=e.length,i="";for(n=0;n<r;n+=3)i+=ii[e[n]>>2],i+=ii[(e[n]&3)<<4|e[n+1]>>4],i+=ii[(e[n+1]&15)<<2|e[n+2]>>6],i+=ii[e[n+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i};const kg=new Map;function n$(t,e){let n=kg.get(t);return n||(n=new Map,kg.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}const Kb=(t,e,n)=>{if(!t||!(Zb(t,e)||typeof t=="object"))return;const r=t.constructor.name,i=n$(n,r);let s=i.indexOf(t);return s===-1&&(s=i.length,i.push(t)),s};function Vo(t,e,n){if(t instanceof Array)return t.map(r=>Vo(r,e,n));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){const r=t.constructor.name,i=t$(t);return{rr_type:r,base64:i}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[Vo(t.buffer,e,n),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){const r=t.constructor.name,{src:i}=t;return{rr_type:r,src:i}}else if(t instanceof HTMLCanvasElement){const r="HTMLImageElement",i=t.toDataURL();return{rr_type:r,src:i}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[Vo(t.data,e,n),t.width,t.height]};if(Zb(t,e)||typeof t=="object"){const r=t.constructor.name,i=Kb(t,e,n);return{rr_type:r,index:i}}}}return t}const Xb=(t,e,n)=>t.map(r=>Vo(r,e,n)),Zb=(t,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>t instanceof e[i]);function r$(t,e,n,r,i){const s=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of o)try{if(typeof e.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=ff(e.CanvasRenderingContext2D.prototype,a,function(u){return function(...l){return Sc(this.canvas,n,r,i,!0)||Jb(()=>{const d=Xb(l,e,this);t(this.canvas,{type:ki["2D"],property:a,args:d})},0),u.apply(this,l)}});s.push(c)}catch{const c=df(e.CanvasRenderingContext2D.prototype,a,{set(u){t(this.canvas,{type:ki["2D"],property:a,args:[u],setter:!0})}});s.push(c)}return()=>{s.forEach(a=>a())}}function i$(t){return t==="experimental-webgl"?"webgl":t}function Rg(t,e,n,r,i){const s=[];try{const o=ff(t.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Sc(this,e,n,r,!0)){const l=i$(c);if("__context"in this||(this.__context=l),i&&["webgl","webgl2"].includes(l))if(u[0]&&typeof u[0]=="object"){const d=u[0];d.preserveDrawingBuffer||(d.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});s.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach(o=>o())}}function xg(t,e,n,r,i,s,o,a){const c=[],u=Object.getOwnPropertyNames(t);for(const l of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if(typeof t[l]!="function")continue;const d=ff(t,l,function(f){return function(...p){const h=f.apply(this,p);if(Kb(h,a,this),"tagName"in this.canvas&&!Sc(this.canvas,r,i,s,!0)){const g=Xb(p,a,this),m={type:e,property:l,args:g};n(this.canvas,m)}return h}});c.push(d)}catch{const d=df(t,l,{set(f){n(this.canvas,{type:e,property:l,args:[f],setter:!0})}});c.push(d)}return c}function s$(t,e,n,r,i,s){const o=[];return o.push(...xg(e.WebGLRenderingContext.prototype,ki.WebGL,t,n,r,i,s,e)),typeof e.WebGL2RenderingContext<"u"&&o.push(...xg(e.WebGL2RenderingContext.prototype,ki.WebGL2,t,n,r,i,s,e)),()=>{o.forEach(a=>a())}}const o$='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function a$(){const t=new Blob([o$]);return URL.createObjectURL(t)}class c${constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:i,recordCanvas:s,errorHandler:o}=e;e.sampling=r,this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,o&&QD(o),(s&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(i),!n&&gu(()=>{s&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),s&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(e){const{sampling:n="all",blockClass:r,blockSelector:i,unblockSelector:s,recordCanvas:o,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(e)){if(a){this.windowsSet.add(e),this.windows.push(new WeakRef(e));return}gu(()=>{if(o&&n==="all"&&this.initCanvasMutationObserver(e,r,i,s),o&&typeof n=="number"){const c=Rg(e,r,i,s,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(e,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,e);return}fr(r=>this.takeSnapshot(r,!0,e))}initFPSWorker(){const e=new Worker(a$());return e.onmessage=n=>{const r=n.data,{id:i}=r;if(this.snapshotInProgressMap.set(i,!1),!("base64"in r))return;const{base64:s,type:o,width:a,height:c}=r;this.mutationCb({id:i,type:ki["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:s}],type:o}]},0,0,a,c]}]})},e}initCanvasFPSObserver(){let e;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),e=fr(n)};e=fr(n),this.restoreHandlers.push(()=>{e&&cancelAnimationFrame(e)})}initCanvasMutationObserver(e,n,r,i){const s=Rg(e,n,r,i,!1),o=r$(this.processMutation.bind(this),e,n,r,i),a=s$(this.processMutation.bind(this),e,n,r,i,this.mirror);this.restoreHandlers.push(()=>{s(),o(),a()})}getCanvasElements(e,n,r){const i=[],s=o=>{o.querySelectorAll("canvas").forEach(a=>{Sc(a,e,n,r)||i.push(a)})};for(const o of this.windows){const a=o.deref();let c;try{c=a&&a.document}catch{}c&&s(c)}for(const o of this.shadowDoms){const a=o.deref();a&&s(a)}return i}takeSnapshot(e,n,r){const{sampling:i,blockClass:s,blockSelector:o,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,d=1e3/(i==="all"?2:i||2);return this.lastSnapshotTime&&e-this.lastSnapshotTime<d?!1:(this.lastSnapshotTime=e,(r?[r]:this.getCanvasElements(s,o,a)).forEach(h=>{const g=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(g))){if(this.snapshotInProgressMap.set(g,!0),!n&&["webgl","webgl2"].includes(h.__context)){const m=h.getContext(h.__context);m?.getContextAttributes()?.preserveDrawingBuffer===!1&&m.clear(m.COLOR_BUFFER_BIT)}createImageBitmap(h).then(m=>{this.worker?.postMessage({id:g,bitmap:m,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[m])}).catch(m=>{gu(()=>{throw this.snapshotInProgressMap.delete(g),m})()})}}),!0)}startPendingCanvasMutationFlusher(){fr(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=n=>{this.rafStamps.latestId=n,fr(e)};fr(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),fr(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||n===-1)return;const i=r.map(o=>{const{type:a,...c}=o;return c}),{type:s}=r[0];this.mutationCb({id:n,type:s,commands:i}),this.pendingCanvasMutations.delete(e)}}try{if(Array.from([1],t=>t*2)[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=t.contentWindow?.Array.from||Array.from,document.body.removeChild(t)}}catch(t){console.debug("Unable to override Array.from",t)}KD();var Cg;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Cg||(Cg={}));const Ag={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},u$="ReplayCanvas",Io=1280,l$=((t={})=>{const[e,n]=t.maxCanvasSize||[],r={quality:t.quality||"medium",enableManualSnapshot:t.enableManualSnapshot,maxCanvasSize:[e?Math.min(e,Io):Io,n?Math.min(n,Io):Io]};let i;const s=new Promise(o=>i=o);return{name:u$,getOptions(){const{quality:o,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const l=new c$({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:d=>{try{typeof d=="object"&&(d.__rrweb__=!0)}catch{}}});return i(l),l},...Ag[o]||Ag.medium}},async snapshot(o,a){(await s).snapshot(o,a)}}}),d$=l$;function f$(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function Qb(t){try{return new URL(t,H.location.origin).href}catch{return}}function p$(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function eS(t){try{return new Headers(t)}catch{return}}const Mg=new WeakMap,mu=new Map,pf={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function tS(t,e){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:i,shouldCreateSpanForRequest:s,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...pf,...e},l=typeof s=="function"?s:h=>!0,d=h=>h$(h,a),f={},p=t.getOptions().propagateTraceparent;n&&(t.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(g=>{if(g.op==="http.client"){const m=mu.get(g.span_id);m&&(g.timestamp=m/1e3,mu.delete(g.span_id))}}),h)),i&&Cx(h=>{if(h.response){const g=Mg.get(h.response);g&&h.endTimestamp&&mu.set(g,h.endTimestamp)}}),Ad(h=>{const g=m1(h,l,d,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&Mg.set(h.response,h.fetchData.__span),g){const m=Qb(h.fetchData.url),_=m?wr(m).host:void 0;g.setAttributes({"http.url":m,"server.address":_}),o&&Pg(g),c?.(g,{headers:h.headers})}})),r&&zd(h=>{const g=g$(h,l,d,f,p,u);g&&(o&&Pg(g),c?.(g,{headers:eS(h.xhr.__sentry_xhr_v3__?.request_headers)}))})}function Pg(t){const{url:e}=q(t).data;if(!e||typeof e!="string")return;const n=$r("resource",({entries:r})=>{r.forEach(i=>{p$(i)&&i.name.endsWith(e)&&(t.setAttributes(Ov(i)),setTimeout(n))})})}function h$(t,e){const n=Ur();if(n){let r,i;try{r=new URL(t,n),i=new URL(n).origin}catch{return!1}const s=r.origin===i;return e?Wt(r.toString(),e)||s&&Wt(r.pathname,e):s}else{const r=!!t.match(/^\/(?!\/)/);return e?Wt(t,e):r}}function g$(t,e,n,r,i,s){const o=t.xhr,a=o?.[yn];if(!o||o.__sentry_own_request__||!a)return;const{url:c,method:u}=a,l=Ot()&&e(c);if(t.endTimestamp&&l){const _=o.__sentry_xhr_span_id__;if(!_)return;const v=r[_];v&&a.status_code!==void 0&&(ws(v,a.status_code),v.end(),s?.(v,{headers:eS(Dv(o)),error:t.error}),delete r[_]);return}const d=Qb(c),f=wr(d||c),p=Sy(c),h=!!De(),g=l&&h?Nt({name:`${u} ${p}`,attributes:{url:c,type:"xhr","http.method":u,"http.url":d,"server.address":f?.host,[re]:"auto.http.browser",[Te]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new Rn;o.__sentry_xhr_span_id__=g.spanContext().spanId,r[o.__sentry_xhr_span_id__]=g,n(c)&&m$(o,Ot()&&h?g:void 0,i);const m=$();return m&&m.emit("beforeOutgoingRequestSpan",g,t),g}function m$(t,e,n){const{"sentry-trace":r,baggage:i,traceparent:s}=yd({span:e,propagateTraceparent:n});r&&_$(t,r,i,s)}function _$(t,e,n,r){const i=t.__sentry_xhr_v3__?.request_headers;if(!(i?.["sentry-trace"]||!t.setRequestHeader))try{if(t.setRequestHeader("sentry-trace",e),r&&!i?.traceparent&&t.setRequestHeader("traceparent",r),n){const s=i?.baggage;(!s||!f$(s))&&t.setRequestHeader("baggage",n)}}catch{}}function y$(){H.document?H.document.addEventListener("visibilitychange",()=>{const t=De();if(!t)return;const e=Le(t);if(H.document.hidden&&e){const n="cancelled",{op:r,status:i}=q(e);P&&y.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),i||e.setStatus({code:pe,message:n}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):P&&y.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const v$=3600,nS="sentry_previous_trace",b$="sentry.previous_trace";function S$(t,{linkPreviousTrace:e,consistentTraceSampling:n}){const r=e==="session-storage";let i=r?T$():void 0;t.on("spanStart",o=>{if(Le(o)!==o)return;const a=ne().getPropagationContext();i=E$(i,o,a),r&&w$(i)});let s=!0;n&&t.on("beforeSampling",o=>{if(!i)return;const a=ne(),c=a.getPropagationContext();if(s&&c.parentSpanId){s=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(i.sampleRate),sampled:String(Ol(i.spanContext))},sampleRand:i.sampleRand}),o.parentSampled=Ol(i.spanContext),o.parentSampleRate=i.sampleRate,o.spanAttributes={...o.spanAttributes,[S_]:i.sampleRate}})}function E$(t,e,n){const r=q(e);function i(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Va])}catch{return 0}}const s={spanContext:e.spanContext(),startTimestamp:r.start_timestamp,sampleRate:i(),sampleRand:n.sampleRand};if(!t)return s;const o=t.spanContext;return o.traceId===r.trace_id?t:(Date.now()/1e3-t.startTimestamp<=v$&&(P&&y.log(`Adding previous_trace ${o} link to span ${{op:r.op,...e.spanContext()}}`),e.addLink({context:o,attributes:{[Dw]:"previous_trace"}}),e.setAttribute(b$,`${o.traceId}-${o.spanId}-${Ol(o)?1:0}`)),s)}function w$(t){try{H.sessionStorage.setItem(nS,JSON.stringify(t))}catch(e){P&&y.warn("Could not store previous trace in sessionStorage",e)}}function T$(){try{const t=H.sessionStorage?.getItem(nS);return JSON.parse(t)}catch{return}}function Ol(t){return t.traceFlags===1}const I$="BrowserTracing",k$={...No,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...pf},Ui=((t={})=>{const e={name:void 0,source:void 0},n=H.document,{enableInp:r,enableElementTiming:i,enableLongTask:s,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:l,idleTimeout:d,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:g,traceXHR:m,trackFetchStreamPerformance:_,shouldCreateSpanForRequest:v,enableHTTPTimings:I,ignoreResourceSpans:E,ignorePerformanceApiSpans:C,instrumentPageLoad:A,instrumentNavigation:S,detectRedirects:w,linkPreviousTrace:W,consistentTraceSampling:T,enableReportPageLoaded:M,onRequestSpanStart:R,onRequestSpanEnd:O}={...k$,...t};let U,Y,ee;function se(k,z,x=!0){const V=z.op==="pageload",J=z.name,K=l?l(z):z,ce=K.attributes||{};if(J!==K.name&&(ce[_e]="custom",K.attributes=ce),!x){const ze=Br();Nt({...K,startTime:ze}).end(ze);return}e.name=K.name,e.source=ce[_e];const Me=J_(K,{idleTimeout:d,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:V,beforeSpanEnd:ze=>{U?.(),ZA(ze,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:E,ignorePerformanceApiSpans:C}),Ng(k,void 0);const Xe=ne(),ft=Xe.getPropagationContext();Xe.setPropagationContext({...ft,traceId:Me.spanContext().traceId,sampled:sr(Me),dsc:qt(ze)}),V&&(ee=void 0)},trimIdleSpanEndTimestamp:!M});V&&M&&(ee=Me),Ng(k,Me);function qe(){n&&["interactive","complete"].includes(n.readyState)&&k.emit("idleSpanEnableAutoFinish",Me)}V&&!M&&n&&(n.addEventListener("readystatechange",()=>{qe()}),qe())}return{name:I$,setup(k){if(B_(),U=zA({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:k}),r&&wM(),i&&lM(),o&&G.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?VA():s&&GA(),a&&YA(),w&&n){const x=()=>{Y=Ce()};addEventListener("click",x,{capture:!0}),addEventListener("keydown",x,{capture:!0,passive:!0})}function z(){const x=As(k);x&&!q(x).timestamp&&(P&&y.log(`[Tracing] Finishing current active span with op: ${q(x).op}`),x.setAttribute(Es,"cancelled"),x.end())}k.on("startNavigationSpan",(x,V)=>{if($()!==k)return;if(V?.isRedirect){P&&y.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),se(k,{op:"navigation.redirect",...x},!1);return}Y=void 0,z(),je().setPropagationContext({traceId:on(),sampleRand:Math.random(),propagationSpanId:Ot()?void 0:Sn()});const J=ne();J.setPropagationContext({traceId:on(),sampleRand:Math.random(),propagationSpanId:Ot()?void 0:Sn()}),J.setSDKProcessingMetadata({normalizedRequest:void 0}),se(k,{op:"navigation",...x,parentSpan:null,forceTransaction:!0})}),k.on("startPageLoadSpan",(x,V={})=>{if($()!==k)return;z();const J=V.sentryTrace||Og("sentry-trace"),K=V.baggage||Og("baggage"),ce=M_(J,K),Me=ne();Me.setPropagationContext(ce),Ot()||(Me.getPropagationContext().propagationSpanId=Sn()),Me.setSDKProcessingMetadata({normalizedRequest:Dd()}),se(k,{op:"pageload",...x})}),k.on("endPageloadSpan",()=>{M&&ee&&(ee.setAttribute(Es,"reportPageLoaded"),ee.end())})},afterAllSetup(k){let z=Ur();if(W!=="off"&&S$(k,{linkPreviousTrace:W,consistentTraceSampling:T}),H.location){if(A){const x=ot();Bi(k,{name:H.location.pathname,startTime:x?x/1e3:void 0,attributes:{[_e]:"url",[re]:"auto.pageload.browser"}})}S&&hc(({to:x,from:V})=>{if(V===void 0&&z?.indexOf(x)!==-1){z=void 0;return}z=void 0;const J=_d(x),K=As(k),ce=K&&w&&x$(K,Y);Hi(k,{name:J?.pathname||H.location.pathname,attributes:{[_e]:"url",[re]:"auto.navigation.browser"}},{url:x,isRedirect:ce})})}h&&y$(),a&&R$(k,d,f,p,e),r&&kM(),tS(k,{traceFetch:g,traceXHR:m,trackFetchStreamPerformance:_,tracePropagationTargets:k.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:v,enableHTTPTimings:I,onRequestSpanStart:R,onRequestSpanEnd:O})}}});function Bi(t,e,n){t.emit("startPageLoadSpan",e,n),ne().setTransactionName(e.name);const r=As(t);return r&&t.emit("afterStartPageLoadSpan",r),r}function Hi(t,e,n){const{url:r,isRedirect:i}=n||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:i}),t.emit("startNavigationSpan",e,{isRedirect:i});const s=ne();return s.setTransactionName(e.name),r&&!i&&s.setSDKProcessingMetadata({normalizedRequest:{...Dd(),url:r}}),As(t)}function Og(t){return H.document?.querySelector(`meta[name=${t}]`)?.getAttribute("content")||void 0}function R$(t,e,n,r,i){const s=H.document;let o;const a=()=>{const c="ui.action.click",u=As(t);if(u){const l=q(u).op;if(["navigation","pageload"].includes(l)){P&&y.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(Es,"interactionInterrupted"),o.end(),o=void 0),!i.name){P&&y.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=J_({name:i.name,op:c,attributes:{[_e]:i.source||"url"}},{idleTimeout:e,finalTimeout:n,childSpanTimeout:r})};s&&addEventListener("click",a,{capture:!0})}const rS="_sentry_idleSpan";function As(t){return t[rS]}function Ng(t,e){Je(t,rS,e)}const Lg=1.5;function x$(t,e){const n=q(t),r=Br(),i=n.start_timestamp;return!(r-i>Lg||e&&r-e<=Lg)}function C$(t=$()){t?.emit("endPageloadSpan")}function A$(t){const e=De();if(e===t)return;const n=ne();t.end=new Proxy(t.end,{apply(r,i,s){return an(n,e),Reflect.apply(r,i,s)}}),an(n,t)}function Ri(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function M$(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Ri(n);return i=>r.then(s=>i(s.transaction(e,"readwrite").objectStore(e)))}function hf(t){return Ri(t.getAllKeys())}function P$(t,e,n){return t(r=>hf(r).then(i=>{if(!(i.length>=n))return r.put(e,Math.max(...i,0)+1),Ri(r.transaction)}))}function O$(t,e,n){return t(r=>hf(r).then(i=>{if(!(i.length>=n))return r.put(e,Math.min(...i,0)-1),Ri(r.transaction)}))}function N$(t){return t(e=>hf(e).then(n=>{const r=n[0];if(r!=null)return Ri(e.get(r)).then(i=>(e.delete(r),Ri(e.transaction).then(()=>i)))}))}function L$(t){let e;function n(){return e==null&&(e=M$(t.dbName||"sentry-offline",t.storeName||"queue")),e}return{push:async r=>{try{const i=await ma(r);await P$(n(),i,t.maxQueueSize||30)}catch{}},unshift:async r=>{try{const i=await ma(r);await O$(n(),i,t.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await N$(n());if(r)return mT(r)}catch{}}}}function D$(t){return e=>{const n=t({...e,createStore:L$});return H.addEventListener("online",async r=>{await n.flush()}),n}}function $$(t=Vd){return D$(zI(t))}const Dg=1e6,F$="window"in G&&G.window===G&&typeof importScripts>"u",Vn=String(0),Ua=F$?"main":"worker",Ba=H.navigator;let iS="",sS="",oS="",Nl=Ba?.userAgent||"",aS="";const U$=Ba?.language||Ba?.languages?.[0]||"";function B$(t){return typeof t=="object"&&t!==null&&"getHighEntropyValues"in t}const $g=Ba?.userAgentData;B$($g)&&$g.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(t=>{if(iS=t.platform||"",oS=t.architecture||"",aS=t.model||"",sS=t.platformVersion||"",t.fullVersionList?.length){const e=t.fullVersionList[t.fullVersionList.length-1];Nl=`${e.brand} ${e.version}`}}).catch(t=>{});function H$(t){return!("thread_metadata"in t)}function W$(t){return H$(t)?Y$(t):t}function j$(t){const e=t.contexts?.trace?.trace_id;return typeof e=="string"&&e.length!==32&&P&&y.log(`[Profiling] Invalid traceId: ${e} on profiled event`),typeof e!="string"?"":e}function q$(t,e,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const i=j$(r),s=W$(n),o=e||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Ce()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:Ce()*1e3;return{event_id:t,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Ja,runtime:{name:"javascript",version:H.navigator.userAgent},os:{name:iS,version:sS,build_number:Nl},device:{locale:U$,model:aS,manufacturer:Nl,architecture:oS,is_emulator:!1},debug_meta:{images:uS(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||Ye(),trace_id:i,active_thread_id:Vn,relative_start_ns:"0",relative_end_ns:((a-o)*1e6).toFixed(0)}]}}function z$(t,e,n){if(t==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${t} instead.`);const r=V$(t),i=e.getOptions(),s=e.getSdkMetadata?.()?.sdk;return{chunk_id:Ye(),client_sdk:{name:s?.name??"sentry.javascript.browser",version:s?.version??"0.0.0"},profiler_id:n||Ye(),platform:"javascript",version:"2",release:i.release??"",environment:i.environment??"production",debug_meta:{images:uS(t.resources)},profile:r}}function G$(t){try{if(!t||typeof t!="object")return{reason:"chunk is not an object"};const e=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!e(t.profiler_id))return{reason:"missing or invalid profiler_id"};if(!e(t.chunk_id))return{reason:"missing or invalid chunk_id"};if(!t.client_sdk)return{reason:"missing client_sdk metadata"};const n=t.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(e){return{reason:`unknown validation error: ${e}`}}}function V$(t){const e=[];for(let a=0;a<t.frames.length;a++){const c=t.frames[a];c&&(e[a]={function:c.name,abs_path:typeof c.resourceId=="number"?t.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}const n=[];for(let a=0;a<t.stacks.length;a++){const c=t.stacks[a];if(!c)continue;const u=[];let l=c;for(;l;)u.push(l.frameId),l=l.parentId===void 0?void 0:t.stacks[l.parentId];n[a]=u}const r=ot(),i=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,s=i-(r||i),o=[];for(let a=0;a<t.samples.length;a++){const c=t.samples[a];if(!c)continue;const u=(i+(c.timestamp-s))/1e3;o[a]={stack_id:c.stackId??0,thread_id:Vn,timestamp:u}}return{frames:e,stacks:n,samples:o,thread_metadata:{[Vn]:{name:Ua}}}}function cS(t){return q(t).op==="pageload"}function Y$(t){let e,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Vn]:{name:Ua}}},i=t.samples[0];if(!i)return r;const s=i.timestamp,o=ot(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:o||0,c=a-(o||a);return t.samples.forEach((u,l)=>{if(u.stackId===void 0){e===void 0&&(e=n,r.stacks[e]=[],n++),r.samples[l]={elapsed_since_start_ns:((u.timestamp+c-s)*Dg).toFixed(0),stack_id:e,thread_id:Vn};return}let d=t.stacks[u.stackId];const f=[];for(;d;){f.push(d.frameId);const h=t.frames[d.frameId];h&&r.frames[d.frameId]===void 0&&(r.frames[d.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?t.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),d=d.parentId===void 0?void 0:t.stacks[d.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-s)*Dg).toFixed(0),stack_id:n,thread_id:Vn};r.stacks[n]=f,r.samples[l]=p,n++}),r}function J$(t,e){if(!e.length)return t;for(const n of e)t[1].push([{type:"profile"},n]);return t}function K$(t){const e=[];return Cr(t,(n,r)=>{if(r==="transaction")for(let i=1;i<n.length;i++)n[i]?.contexts?.profile?.profile_id&&e.push(n[i])}),e}function uS(t){const r=$()?.getOptions()?.stackParser;return r?qT(r,t):[]}function lS(t){return typeof t!="number"&&typeof t!="boolean"||typeof t=="number"&&isNaN(t)?(P&&y.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t===!0||t===!1?!0:t<0||t>1?(P&&y.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function X$(t){return t.samples.length<2?(P&&y.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):t.frames.length?!0:(P&&y.log("[Profiling] Discarding profile because it contains no frames"),!1)}let gf=!1;const dS=3e4;function Z$(t){return typeof t=="function"}function fS(){const t=H.Profiler;if(!Z$(t)){P&&y.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const e=10,n=Math.floor(dS/e);try{return new t({sampleInterval:e,maxBufferSize:n})}catch{P&&(y.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),y.log("[Profiling] Disabling profiling for current user session.")),gf=!0}}function Fg(t){if(gf)return P&&y.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!t.isRecording())return P&&y.log("[Profiling] Discarding profile because root span was not sampled."),!1;const n=$()?.getOptions();if(!n)return P&&y.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return lS(r)?r?(r===!0?!0:Math.random()<r)?!0:(P&&y.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(P&&y.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(P&&y.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function Q$(t){if(gf)return P&&y.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(t.profileLifecycle!=="trace"&&t.profileLifecycle!=="manual")return P&&y.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const e=t.profileSessionSampleRate;return lS(e)?e?Math.random()<=e:(P&&y.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(P&&y.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function ko(t){return typeof t.profilesSampleRate<"u"}function eF(t,e,n,r){return X$(n)?q$(t,e,n,r):null}const vr=new Map;function tF(){return vr.size}function nF(t){const e=vr.get(t);return e&&vr.delete(t),e}function rF(t,e){if(vr.set(t,e),vr.size>30){const n=vr.keys().next().value;n!==void 0&&vr.delete(n)}}function iF(t){return!t?.contexts?.profile||!t.contexts||(t.contexts.trace={...t.contexts?.trace??{},data:{...t.contexts?.trace?.data??{},"thread.id":Vn,"thread.name":Ua}},t.spans?.forEach(e=>{e.data={...e.data||{},"thread.id":Vn,"thread.name":Ua}})),t}function Ug(t){let e;cS(t)&&(e=Ce()*1e3);const n=fS();if(!n)return;P&&y.log(`[Profiling] started profiling span: ${q(t).description}`);const r=Ye();let i=null;ne().setContext("profile",{profile_id:r,start_timestamp:e});async function s(){if(t&&n){if(i){P&&y.log("[Profiling] profile for:",q(t).description,"already exists, returning early");return}return n.stop().then(u=>{if(o&&(H.clearTimeout(o),o=void 0),P&&y.log(`[Profiling] stopped profiling of span: ${q(t).description}`),!u){P&&y.log(`[Profiling] profiler returned null profile for: ${q(t).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}i=u,rF(r,u)}).catch(u=>{P&&y.log("[Profiling] error while stopping profiler:",u)})}}let o=H.setTimeout(()=>{P&&y.log("[Profiling] max profile duration elapsed, stopping profiling for:",q(t).description),s()},dS);const a=t.end.bind(t);function c(){return t?(s().then(()=>{a()},()=>{a()}),t):a()}t.end=c}const sF=6e4,oF=3e5;class aF{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(e){const n=e.getOptions().profileLifecycle,r=Q$(e.getOptions());P&&y.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||P&&y.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=Ye(),this._client=e,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(e)}start(){if(this._lifecycleMode==="trace"){P&&y.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){P&&y.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){P&&y.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){P&&y.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){P&&y.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(e){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=e.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const r=this._activeRootSpanIds.size;r===1&&(P&&y.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,P&&y.log("[Profiling] Started profiling with profiler ID:",this._profilerId),En().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){P&&y.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(e=>{P&&y.error("[Profiling] Failed to collect current profile chunk on `stop()`:",e)}),this._lifecycleMode==="manual"&&En().setContext("profile",{}))}_setupTraceLifecycleListeners(e){e.on("spanStart",n=>{if(!this._sessionSampled){P&&y.log("[Profiling] Session not sampled because of negative sampling decision.");return}if(n!==Le(n))return;if(!n.isRecording()){P&&y.log("[Profiling] Discarding profile because root span was not sampled.");return}const r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const i=this._activeRootSpanIds.size;i===1&&(P&&y.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${i}).`),this._beginProfiling())}),e.on("spanEnd",n=>{if(!this._sessionSampled)return;const r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);const i=this._activeRootSpanIds.size;P&&y.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${i}).`),i===0&&(this._collectCurrentChunk().catch(s=>{P&&y.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",s)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,En().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(e=>clearTimeout(e)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(e){this._activeRootSpanIds.add(e);const n=setTimeout(()=>this._onRootSpanTimeout(e),oF);this._rootSpanTimeouts.set(e,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;const e=fS();if(!e){P&&y.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=e}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(e=>{P&&y.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",e)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},sF))}_onRootSpanTimeout(e){this._rootSpanTimeouts.has(e)&&(this._rootSpanTimeouts.delete(e),this._activeRootSpanIds.has(e)&&(P&&y.log(`[Profiling] Reached 5-minute timeout for root span ${e}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(e),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const e=this._profiler;if(this._profiler=void 0,!!e)try{const n=await e.stop(),r=z$(n,this._client,this._profilerId),i=G$(r);if("reason"in i){P&&y.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",i.reason);return}this._sendProfileChunk(r),P&&y.log("[Profiling] Collected browser profile chunk.")}catch(n){P&&y.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(e){const n=this._client,r=Ka(n.getSdkMetadata?.()),i=n.getDsn(),s=n.getOptions().tunnel,o=Gt({event_id:Ye(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!s&&i&&{dsn:Mn(i)}},[[{type:"profile_chunk"},e]]);n.sendEnvelope(o).then(null,a=>{P&&y.error("Error while sending profile chunk envelope:",a)})}}const cF="BrowserProfiling",uF=(()=>({name:cF,setup(t){const e=t.getOptions(),n=new aF;if(!ko(e)&&!e.profileLifecycle&&(e.profileLifecycle="manual"),ko(e)&&!e.profilesSampleRate){P&&y.log("[Profiling] Profiling disabled, no profiling options found.");return}const r=De(),i=r&&Le(r);if(ko(e)&&e.profileSessionSampleRate!==void 0&&P&&y.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),ko(e))i&&cS(i)&&Fg(i)&&Ug(i),t.on("spanStart",s=>{s===Le(s)&&Fg(s)&&Ug(s)}),t.on("beforeEnvelope",s=>{if(!tF())return;const o=K$(s);if(!o.length)return;const a=[];for(const c of o){const u=c?.contexts,l=u?.profile?.profile_id,d=u?.profile?.start_timestamp;if(typeof l!="string"){P&&y.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!l){P&&y.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;const f=nF(l);if(!f){P&&y.log(`[Profiling] Could not retrieve profile for span: ${l}`);continue}const p=eF(l,d,f,c);p&&a.push(p)}J$(s,a)});else{const s=e.profileLifecycle;if(t.on("startUIProfiler",()=>n.start()),t.on("stopUIProfiler",()=>n.stop()),s==="manual")n.initialize(t);else if(s==="trace"){if(!Ot(e)){P&&y.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(t),i&&n.notifyRootSpanActive(i),H.setTimeout(()=>{const o=De(),a=o&&Le(o);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(t){return iF(t)}})),lF=uF,dF=()=>({name:"LaunchDarkly",processEvent(t,e,n){return Ni(t)}});function fF(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(t,e,n)=>{Mr(t,e.value),Pr(t,e.value)}}}const pF=()=>({name:"OpenFeature",processEvent(t,e,n){return Ni(t)}});class hF{after(e,n){Mr(n.flagKey,n.value),Pr(n.flagKey,n.value)}error(e,n,r){Mr(e.flagKey,e.defaultValue),Pr(e.flagKey,e.defaultValue)}}const gF=({featureFlagClientClass:t})=>({name:"Unleash",setupOnce(){const e=t.prototype;rt(e,"isEnabled",mF)},processEvent(e,n,r){return Ni(e)}});function mF(t){return function(...e){const n=e[0],r=t.apply(this,e);return typeof n=="string"&&typeof r=="boolean"?(Mr(n,r),Pr(n,r)):P&&y.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const _F=(({growthbookClass:t})=>g1({growthbookClass:t})),yF=({featureFlagClient:t})=>({name:"Statsig",setup(e){t.on("gate_evaluation",n=>{Mr(n.gate.name,n.gate.value),Pr(n.gate.name,n.gate.value)})},processEvent(e,n,r){return Ni(e)}});async function vF(){const t=$();if(!t)return"no-client-active";if(!t.getDsn())return"no-dsn-configured";try{await G_(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const bF="WebWorker",SF=({worker:t})=>({name:bF,setupOnce:()=>{(Array.isArray(t)?t:[t]).forEach(e=>Bg(e))},addWorker:e=>Bg(e)});function Bg(t){t.addEventListener("message",e=>{TF(e.data)&&(e.stopImmediatePropagation(),e.data._sentryDebugIds&&(P&&y.log("Sentry debugId web worker message received",e.data),H._sentryDebugIds={...e.data._sentryDebugIds,...H._sentryDebugIds}),e.data._sentryWorkerError&&(P&&y.log("Sentry worker rejection message received",e.data._sentryWorkerError),EF(e.data._sentryWorkerError)))})}function EF(t){const e=$();if(!e)return;const n=e.getOptions().stackParser,r=e.getOptions().attachStacktrace,i=t.reason,s=Xn(i)?Vv(i):dc(n,i,void 0,r,!0);s.level="error",t.filename&&(s.contexts={...s.contexts,worker:{filename:t.filename}}),Oi(s,{originalException:i,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),P&&y.log("Captured worker unhandled rejection",i)}function wF({self:t}){t.postMessage({_sentryMessage:!0,_sentryDebugIds:t._sentryDebugIds??void 0}),t.addEventListener("unhandledrejection",e=>{const r={reason:Gv(e),filename:t.location?.href};t.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),P&&y.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),P&&y.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function TF(t){if(!en(t)||t._sentryMessage!==!0)return!1;const e="_sentryDebugIds"in t,n="_sentryWorkerError"in t;return!(!e&&!n||e&&!(en(t._sentryDebugIds)||t._sentryDebugIds===void 0)||n&&!en(t._sentryWorkerError))}function IF(t){const e={...t};return Ty(e,"react"),cd("react",{version:Qe.version}),NP(e)}function kF(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}function RF(t,e){const n=new WeakSet;function r(i,s){if(!n.has(i)){if(i.cause)return n.add(i),r(i.cause,s);i.cause=s}}r(t,e)}function mf(t,{componentStack:e},n){if(kF(Qe.version)&&bn(t)&&e){const r=new Error(t.message);r.name=`React ErrorBoundary ${t.name}`,r.stack=e,RF(t,r)}return bt(r=>(r.setContext("react",{componentStack:e}),Pe(t,n)))}function xF(t){return(e,n)=>{const r=!!t,i=mf(e,n,{mechanism:{handled:r,type:"auto.function.react.error_handler"}});r&&t(e,n,i)}}const pS="ui.react.render",CF="ui.react.update",hS="ui.react.mount";var _u={exports:{}},me={};var Hg;function AF(){return Hg||(Hg=1,(function(){var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,l=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,f=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,h=t?Symbol.for("react.lazy"):60116,g=t?Symbol.for("react.block"):60121,m=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,v=t?Symbol.for("react.scope"):60119;function I(j){return typeof j=="string"||typeof j=="function"||j===r||j===u||j===s||j===i||j===d||j===f||typeof j=="object"&&j!==null&&(j.$$typeof===h||j.$$typeof===p||j.$$typeof===o||j.$$typeof===a||j.$$typeof===l||j.$$typeof===m||j.$$typeof===_||j.$$typeof===v||j.$$typeof===g)}function E(j){if(typeof j=="object"&&j!==null){var St=j.$$typeof;switch(St){case e:var ue=j.type;switch(ue){case c:case u:case r:case s:case i:case d:return ue;default:var ye=ue&&ue.$$typeof;switch(ye){case a:case l:case h:case p:case o:return ye;default:return St}}case n:return St}}}var C=c,A=u,S=a,w=o,W=e,T=l,M=r,R=h,O=p,U=n,Y=s,ee=i,se=d,k=!1;function z(j){return k||(k=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),x(j)||E(j)===c}function x(j){return E(j)===u}function V(j){return E(j)===a}function J(j){return E(j)===o}function K(j){return typeof j=="object"&&j!==null&&j.$$typeof===e}function ce(j){return E(j)===l}function Me(j){return E(j)===r}function qe(j){return E(j)===h}function ze(j){return E(j)===p}function Xe(j){return E(j)===n}function ft(j){return E(j)===s}function Ge(j){return E(j)===i}function un(j){return E(j)===d}me.AsyncMode=C,me.ConcurrentMode=A,me.ContextConsumer=S,me.ContextProvider=w,me.Element=W,me.ForwardRef=T,me.Fragment=M,me.Lazy=R,me.Memo=O,me.Portal=U,me.Profiler=Y,me.StrictMode=ee,me.Suspense=se,me.isAsyncMode=z,me.isConcurrentMode=x,me.isContextConsumer=V,me.isContextProvider=J,me.isElement=K,me.isForwardRef=ce,me.isFragment=Me,me.isLazy=qe,me.isMemo=ze,me.isPortal=Xe,me.isProfiler=ft,me.isStrictMode=Ge,me.isSuspense=un,me.isValidElementType=I,me.typeOf=E})()),me}var Wg;function MF(){return Wg||(Wg=1,_u.exports=AF()),_u.exports}var yu,jg;function PF(){if(jg)return yu;jg=1;var t=MF(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=i;function o(h){return t.isMemo(h)?i:s[h.$$typeof]||e}var a=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;function p(h,g,m){if(typeof g!="string"){if(f){var _=d(g);_&&_!==f&&p(h,_,m)}var v=c(g);u&&(v=v.concat(u(g)));for(var I=o(h),E=o(g),C=0;C<v.length;++C){var A=v[C];if(!n[A]&&!(m&&m[A])&&!(E&&E[A])&&!(I&&I[A])){var S=l(g,A);try{a(h,A,S)}catch{}}}}return h}return yu=p,yu}var gS=PF();const mS=NS(gS),OF=OS({__proto__:null,default:mS},[gS]),Ec=mS||OF,NF="unknown";class _f extends Qe.Component{constructor(e){super(e);const{name:n,disabled:r=!1}=this.props;r||(this._mountSpan=Nt({name:`<${n}>`,onlyIfParent:!0,op:hS,attributes:{[re]:"auto.ui.react.profiler","ui.component_name":n}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:e,includeUpdates:n=!0}){if(n&&this._mountSpan&&e!==this.props.updateProps){const r=Object.keys(e).filter(i=>e[i]!==this.props.updateProps[i]);if(r.length>0){const i=Ce();this._updateSpan=Ar(this._mountSpan,()=>Nt({name:`<${this.props.name}>`,onlyIfParent:!0,op:CF,startTime:i,attributes:{[re]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const e=Ce(),{name:n,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const i=q(this._mountSpan).timestamp;Ar(this._mountSpan,()=>{const s=Nt({onlyIfParent:!0,name:`<${n}>`,op:pS,startTime:i,attributes:{[re]:"auto.ui.react.profiler","ui.component_name":n}});s&&s.end(e)})}}render(){return this.props.children}}Object.assign(_f,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function LF(t,e){const n=e?.name||t.displayName||t.name||NF,r=i=>Qe.createElement(_f,{...e,name:n,updateProps:i},Qe.createElement(t,{...i}));return r.displayName=`profiler(${n})`,Ec(r,t),r}function DF(t,e={disabled:!1,hasRenderSpan:!0}){const[n]=Qe.useState(()=>{if(!e?.disabled)return Nt({name:`<${t}>`,onlyIfParent:!0,op:hS,attributes:{[re]:"auto.ui.react.profiler","ui.component_name":t}})});Qe.useEffect(()=>(n&&n.end(),()=>{if(n&&e.hasRenderSpan){const r=q(n).timestamp,i=Ce(),s=Nt({name:`<${t}>`,onlyIfParent:!0,op:pS,startTime:r,attributes:{[re]:"auto.ui.react.profiler","ui.component_name":t}});s&&s.end(i)}}),[])}const xt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$F="unknown",vu={componentStack:null,error:null,eventId:null};class _S extends Qe.Component{constructor(e){super(e),this.state=vu,this._openFallbackReportDialog=!0;const n=$();n&&e.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",r=>{!r.type&&this._lastEventId&&r.event_id===this._lastEventId&&El({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,n){const{componentStack:r}=n,{beforeCapture:i,onError:s,showDialog:o,dialogOptions:a}=this.props;bt(c=>{i&&i(c,e,r);const u=this.props.handled!=null?this.props.handled:!!this.props.fallback,l=mf(e,n,{mechanism:{handled:u,type:"auto.function.react.error_boundary"}});s&&s(e,r,l),o&&(this._lastEventId=l,this._openFallbackReportDialog&&El({...a,eventId:l})),this.setState({error:e,componentStack:r,eventId:l})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:r}=this.state,{onUnmount:i}=this.props;i&&(this.state===vu?i(null,null,null):i(e,n,r)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:e}=this.props,{error:n,componentStack:r,eventId:i}=this.state;e&&e(n,r,i),this.setState(vu)}render(){const{fallback:e,children:n}=this.props,r=this.state;if(r.componentStack===null)return typeof n=="function"?n():n;const i=typeof e=="function"?Qe.createElement(e,{error:r.error,componentStack:r.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:r.eventId}):e;return Qe.isValidElement(i)?i:(e&&xt&&y.warn("fallback did not produce a valid ReactElement"),null)}}function FF(t,e){const n=t.displayName||t.name||$F,r=Qe.memo(i=>Qe.createElement(_S,{...e},Qe.createElement(t,{...i})));return r.displayName=`errorBoundary(${n})`,Ec(r,t),r}const UF="redux.action",BF="info",HF={attachReduxState:!0,actionTransformer:t=>t,stateTransformer:t=>t||null};function WF(t){const e={...HF,...t};return n=>(r,i)=>{e.attachReduxState&&En().addEventProcessor((a,c)=>{try{a.type===void 0&&a.contexts.state.state.type==="redux"&&(c.attachments=[...c.attachments||[],{filename:"redux_state.json",data:JSON.stringify(a.contexts.state.state.value)}])}catch{}return a});function s(a){return(c,u)=>{const l=a(c,u),d=ne(),f=e.actionTransformer(u);typeof f<"u"&&f!==null&&zt({category:UF,data:f,type:BF});const p=e.stateTransformer(l);if(typeof p<"u"&&p!==null){const _=$()?.getOptions()?.normalizeDepth||3,v={state:{type:"redux",value:p}};Je(v,"__sentry_override_normalization_depth__",3+_),d.setContext("state",v)}else d.setContext("state",null);const{configureScopeWithState:h}=e;return typeof h=="function"&&h(d,l),l}}const o=n(s(r),i);return o.replaceReducer=new Proxy(o.replaceReducer,{apply:function(a,c,u){a.apply(c,[s(u[0])])}}),o}}function jF(t){const e=Ui({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,match:i,instrumentPageLoad:s=!0,instrumentNavigation:o=!0}=t;return{...e,afterAllSetup(a){e.afterAllSetup(a),s&&H.location&&qg(r,H.location,i,(c,u="url")=>{Bi(a,{name:c,attributes:{[Te]:"pageload",[re]:"auto.pageload.react.reactrouter_v3",[_e]:u}})}),o&&n.listen&&n.listen(c=>{(c.action==="PUSH"||c.action==="POP")&&qg(r,c,i,(u,l="url")=>{Hi(a,{name:u,attributes:{[Te]:"navigation",[re]:"auto.navigation.react.reactrouter_v3",[_e]:l}})})})}}}function qg(t,e,n,r){let i=e.pathname;n({location:e,routes:t},(s,o,a)=>{if(s||!a)return r(i);const c=qF(a.routes||[]);return c.length===0||c==="/*"?r(i):(i=c,r(i,"route"))})}function qF(t){if(!Array.isArray(t)||t.length===0)return"";const e=t.filter(r=>!!r.path);let n=-1;for(let r=e.length-1;r>=0;r--)if(e[r].path?.startsWith("/")){n=r;break}return e.slice(n).reduce((r,{path:i})=>{const s=r==="/"||r===""?i:`/${i}`;return`${r}${s}`},"")}function zF(t,e={}){const n=t,r=Ui({...e,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:i=!0,instrumentNavigation:s=!0}=e;return{...r,afterAllSetup(o){r.afterAllSetup(o);const a=H.location;if(i&&a){const c=n.matchRoutes(a.pathname,n.options.parseSearch(a.search),{preload:!1,throwOnError:!1}),u=c[c.length-1];Bi(o,{name:u?u.routeId:a.pathname,attributes:{[Te]:"pageload",[re]:"auto.pageload.react.tanstack_router",[_e]:u?"route":"url",...zg(u)}})}s&&n.subscribe("onBeforeNavigate",c=>{if(c.toLocation.state===c.fromLocation?.state)return;const u=n.matchRoutes(c.toLocation.pathname,c.toLocation.search,{preload:!1,throwOnError:!1}),l=u[u.length-1],d=H.location,f=Hi(o,{name:l?l.routeId:d.pathname,attributes:{[Te]:"navigation",[re]:"auto.navigation.react.tanstack_router",[_e]:l?"route":"url"}}),p=n.subscribe("onResolved",h=>{if(p(),f){const g=n.matchRoutes(h.toLocation.pathname,h.toLocation.search,{preload:!1,throwOnError:!1}),m=g[g.length-1];m&&(f.updateName(m.routeId),f.setAttribute(_e,"route"),f.setAttributes(zg(m)))}})})}}}function zg(t){if(!t)return{};const e={};return Object.entries(t.params).forEach(([n,r])=>{e[`url.path.params.${n}`]=r,e[`url.path.parameter.${n}`]=r,e[`params.${n}`]=r}),e}function GF(t){const e=Ui({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:i,instrumentPageLoad:s=!0,instrumentNavigation:o=!0}=t;return{...e,afterAllSetup(a){e.afterAllSetup(a),yS(a,s,o,n,"reactrouter_v4",r,i)}}}function VF(t){const e=Ui({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:i,instrumentPageLoad:s=!0,instrumentNavigation:o=!0}=t;return{...e,afterAllSetup(a){e.afterAllSetup(a),yS(a,s,o,n,"reactrouter_v5",r,i)}}}function yS(t,e,n,r,i,s=[],o){function a(){if(r.location)return r.location.pathname;if(H.location)return H.location.pathname}function c(u){if(s.length===0||!o)return[u,"url"];const l=vS(s,u,o);for(const d of l)if(d.match.isExact)return[d.match.path,"route"];return[u,"url"]}if(e){const u=a();if(u){const[l,d]=c(u);Bi(t,{name:l,attributes:{[Te]:"pageload",[re]:`auto.pageload.react.${i}`,[_e]:d}})}}n&&r.listen&&r.listen((u,l)=>{if(l&&(l==="PUSH"||l==="POP")){const[d,f]=c(u.pathname);Hi(t,{name:d,attributes:{[Te]:"navigation",[re]:`auto.navigation.react.${i}`,[_e]:f}})}})}function vS(t,e,n,r=[]){return t.some(i=>{const s=i.path?n(e,i):r.length?r[r.length-1].match:YF(e);return s&&(r.push({route:i,match:s}),i.routes&&vS(i.routes,e,n,r)),!!s}),r}function YF(t){return{path:"/",url:"/",params:{},isExact:t==="/"}}function JF(t){const e=t.displayName||t.name,n=r=>{if(r?.computedMatch?.isExact){const i=r.computedMatch.path,s=KF();ne().setTransactionName(i),s&&(s.updateName(i),s.setAttribute(_e,"route"))}return Qe.createElement(t,{...r})};return n.displayName=`sentryRoute(${e})`,Ec(n,t),n}function KF(){const t=De(),e=t&&Le(t);if(!e)return;const n=q(e).op;return n==="navigation"||n==="pageload"?e:void 0}function XF(t,e,n,r){const i=new Proxy(t,{apply(s,o,a){const c=s.apply(o,a);return ZF(c,e,n,r),c}});return Je(i,"__sentry_proxied__",!0),i}function ZF(t,e,n,r){Fr(t)?t.then(i=>{Array.isArray(i)&&r(i,e)}).catch(i=>{xt&&y.warn(`Error resolving async handler '${n}' for route`,e,i)}):Array.isArray(t)&&r(t,e)}function wc(t,e){if(t.handle&&typeof t.handle=="object")for(const n of Object.keys(t.handle)){const r=t.handle[n];typeof r=="function"&&!r.__sentry_proxied__&&(t.handle[n]=XF(r,t,n,e))}if(Array.isArray(t.children))for(const n of t.children)wc(n,e)}let yf,ui=!1;function QF(t,e=!1){yf=t,ui=e}function e3(t){return n3(t.route.path||"")}function t3(t){return t.params["*"]||""}function n3(t){return t[t.length-1]==="*"?t.slice(0,-1):t}function li(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function bS(t){return t.endsWith("*")}function er(t){return t.includes("/*")||t.endsWith("*")}function Gg(t,e){return bS(t)&&!!e.route.children?.length||!1}function r3(t){return!!(!t.children&&t.element&&t.path?.endsWith("/*"))}function i3(t,e,n){const r=t&&t.length>0?t:ui?Tc(e,n):e;let i=r.slice(-2)==="/*"?r.slice(0,-2):r;return i.length>1&&i[i.length-1]==="/"&&(i=i.slice(0,-1)),[i,"route"]}function Vg(t){return t.split(/\\?\//).filter(e=>e.length>0&&e!==",").length}function Tc(t,e){if(!e||e==="/"||!t.toLowerCase().startsWith(e.toLowerCase()))return t;const n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?t:t.slice(n)||"/"}function Ha(t){return t[0]==="/"?t:`/${t}`}function SS(t,e){const n=yf(t,e);if(!n||n.length===0)return"";for(const r of n)if(r.route.path&&r.route.path!=="*"){const i=e3(r),s=Tc(e.pathname,Ha(r.pathnameBase));return e.pathname===s?li(s):li(li(i||"")+Ha(SS(t.filter(o=>o!==r.route),{pathname:s})))}return""}function s3(t,e){const n=yf(e,t);if(n){for(const r of n)if(r3(r.route)&&t3(r))return!0}return!1}function Yg(t,e){return ui?Tc(t.pathname,e):t.pathname||""}function o3(t,e,n,r=""){if(!t||t.length===0)return[ui?Tc(e.pathname,r):e.pathname,"url"];if(!n)return[Yg(e,r),"url"];let i="";for(const s of n){const o=s.route;if(!o)continue;if(o.index)return i3(i,s.pathname,r);const a=o.path;if(!a||Gg(a,s))continue;const c=a[0]==="/"||i[i.length-1]==="/"?a:`/${a}`;if(i=li(i)+Ha(c),li(e.pathname)===li(r+s.pathname))return Vg(i)!==Vg(s.pathname)&&!bS(i)?[(ui?"":r)+c,"route"]:(Gg(i,s)&&(i=i.slice(0,-1)),[(ui?"":r)+i,"route"])}return[Yg(e,r),"url"]}function Ic(t,e,n,r,i=""){let s,o="url";const a=s3(t,n);return a&&(s=Ha(SS(n,t)),o="route"),(!a||!s)&&([s,o]=o3(e,t,r,i)),[s||t.pathname,o]}let Yn,Jn,Kn,Yo,Dt,kc=!1,br=3e3;const ES=new WeakSet,mr=new WeakMap,dt=new Set,Jo=new WeakMap;function a3(t){return H?.requestAnimationFrame?H.requestAnimationFrame(t):setTimeout(t,0)}function Jg(t){H?.cancelAnimationFrame?H.cancelAnimationFrame(t):clearTimeout(t)}function wS(t){return`${t.pathname}${t.search||""}${t.hash||""}`}function Kg(t){return t.includes(":")||t.includes("*")}function c3(t,e,n,r){if(!t)return{skip:!1,shouldUpdate:!1};if(t.locationKey===e&&(t.isPlaceholder||!r)){const s=!!t.routeName&&er(t.routeName),o=er(n),a=!!t.routeName&&Kg(t.routeName),c=Kg(n),u=s&&!o,l=!a&&c,d=n!==t.routeName&&n.length>(t.routeName?.length||0)&&!o;return{skip:!0,shouldUpdate:!!(t.routeName&&(u||l||d))}}return{skip:!1,shouldUpdate:!1}}function u3(t,e){const n=e.children||[],r=t.filter(i=>!n.some(s=>s===i||i.path&&s.path===i.path||i.id&&s.id===i.id));r.length>0&&(e.children=[...n,...r])}function l3(t,e){let n=Jo.get(t);n||(n=new Set,Jo.set(t,n)),n.add(e),e.finally(()=>{const r=Jo.get(t);r&&r.delete(e)})}function vf(t,e,n=null){t.forEach(i=>{dt.add(i),kc&&wc(i,vf)}),e&&u3(t,e);const r=nn();if(r){const i=q(r).op;let s=n;if(!s&&typeof H<"u"){const o=H.location;o&&(s={pathname:o.pathname})}s&&(i==="pageload"?Qs({activeRootSpan:r,location:{pathname:s.pathname},routes:Array.from(dt),allRoutes:Array.from(dt)}):i==="navigation"&&Ll(r,s,Array.from(dt),!1,Dt))}}function Ll(t,e,n,r=!1,i){const s=q(t),o=s.description,a=t?.__sentry_navigation_name_set__,c=o&&er(o);if((!a||r||c)&&!s.timestamp){const l=i(n,e),[d,f]=Ic(e,n,n,l||[],""),p=s.data?.[_e];d&&(!o||!a&&(p!=="route"||f==="route")||p!=="route"&&f==="route"||p==="route"&&f==="route"&&c)&&(t.updateName(d),t.setAttribute(_e,f),!er(d)&&f==="route"&&Je(t,"__sentry_navigation_name_set__",!0))}}function TS(t,e,n,r,i){let s=!1,o=!!i&&q(i).op==="pageload",a=!1,c=null,u=null;t.subscribe(l=>{if(!s){const f=nn();f&&q(f).op==="pageload"?o=!0:o&&(l.historyAction==="POP"&&!a?a=!0:s=!0)}if(l.historyAction==="PUSH"||l.historyAction==="POP"&&s){const f=wS(l.location),p=()=>{u!==f&&(u=f,c=null,bf({location:l.location,routes:e,navigationType:l.historyAction,version:n,basename:r,allRoutes:Array.from(dt)}))};l.navigation.state!=="idle"?(u!==f&&(u=null),c!==null&&Jg(c),c=a3(p)):(c!==null&&(Jg(c),c=null),p())}})}function IS(t,e){return!Yn||!Jn||!Kn||!Dt?(xt&&y.warn(`reactRouterV${e}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),t):function(n,r){if(Zs(n),kc)for(const c of n)wc(c,vf);const i=CS(r),s=t(n,i),o=r?.basename,a=nn();return s.state.historyAction==="POP"&&a&&Qs({activeRootSpan:a,location:s.state.location,routes:n,basename:o,allRoutes:Array.from(dt)}),TS(s,n,e,o,a),s}}function kS(t,e){return!Yn||!Jn||!Kn||!Dt?(xt&&y.warn(`reactRouterV${e}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),t):function(n,r){if(Zs(n),kc)for(const h of n)wc(h,vf);const i=CS(r,!0),s=t(n,i),o=r?.basename;let a;const c=r?.initialEntries,u=r?.initialIndex,l=c&&c.length===1,d=u!==void 0&&c&&c[u];a=l?c[0]:d?c[u]:void 0;const f=a?typeof a=="string"?{pathname:a}:a:s.state.location,p=nn();return s.state.historyAction==="POP"&&p&&Qs({activeRootSpan:p,location:f,routes:n,basename:o,allRoutes:Array.from(dt)}),TS(s,n,e,o,p),s}}function RS(t,e){const n=Ui({...t,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:r,useLocation:i,useNavigationType:s,createRoutesFromChildren:o,matchRoutes:a,stripBasename:c,enableAsyncRouteHandlers:u=!1,instrumentPageLoad:l=!0,instrumentNavigation:d=!0,lazyRouteTimeout:f}=t;return{...n,setup(p){n.setup(p);const h=t.finalTimeout??3e4,g=(t.idleTimeout??1e3)*3,m=f??g;m===1/0?(br=h,xt&&y.log("[React Router] lazyRouteTimeout set to Infinity, capping at finalTimeout:",h,"ms to prevent indefinite hangs")):Number.isNaN(m)?(xt&&y.warn("[React Router] lazyRouteTimeout must be a number, falling back to default:",g),br=g):m<0?(xt&&y.warn("[React Router] lazyRouteTimeout must be non-negative or Infinity, got:",m,"falling back to:",g),br=g):br=m,Yn=r,Jn=i,Kn=s,Dt=a,Yo=o,kc=u,QF(a,c||!1)},afterAllSetup(p){n.afterAllSetup(p);const h=H.location?.pathname;l&&h&&Bi(p,{name:h,attributes:{[_e]:"url",[Te]:"pageload",[re]:`auto.pageload.react.reactrouter_v${e}`}}),d&&ES.add(p)}}}function xS(t,e){if(!Yn||!Jn||!Kn||!Dt)return xt&&y.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),t;const n=r=>{const i=Qe.useRef(!0),{routes:s,locationArg:o}=r,a=t(s,o),c=Jn(),u=Kn(),l=typeof o=="string"||o?.pathname?o:c;return Yn(()=>{const d=typeof l=="string"?{pathname:l}:l;i.current?(Zs(s),Qs({activeRootSpan:nn(),location:d,routes:s,allRoutes:Array.from(dt)}),i.current=!1):bf({location:d,routes:s,navigationType:u,version:e,allRoutes:Array.from(dt)})},[u,l]),a};return(r,i)=>Qe.createElement(n,{routes:r,locationArg:i})}function CS(t,e=!1){if(!t||!("patchRoutesOnNavigation"in t)||typeof t.patchRoutesOnNavigation!="function")return t||{};const n=t.patchRoutesOnNavigation;return{...t,patchRoutesOnNavigation:async r=>{const i=r?.path,s=nn();if(!e){const a=r?.patch;a&&(r.patch=(c,u)=>{Zs(u);const l=nn();return l&&q(l).op==="navigation"&&Ll(l,{pathname:i,search:"",hash:"",state:null,key:"default"},Array.from(dt),!0,Dt),a(c,u)})}const o=(async()=>{const a=await n(r),c=nn();if(c&&q(c).op==="navigation"){const u=e?i:i||H.location?.pathname;u&&Ll(c,{pathname:u,search:"",hash:"",state:null,key:"default"},Array.from(dt),!1,Dt)}return a})();return s&&l3(s,o),o}}}function bf(t){const{location:e,routes:n,navigationType:r,version:i,matches:s,basename:o,allRoutes:a}=t,c=Array.isArray(s)?s:Dt(a||n,e,o),u=$();if(!u||!ES.has(u))return;const l=nn();if(!(l&&q(l).op==="pageload"&&r==="POP")&&(r==="PUSH"||r==="POP")&&c){const[d,f]=Ic(e,a||n,a||n,c,o),p=wS(e),h=mr.get(u),g=h&&!h.isPlaceholder?!!q(h.span).timestamp:!1,{skip:m,shouldUpdate:_}=c3(h,p,d,g);if(m){if(_&&h){const C=h.routeName;h.isPlaceholder?(h.routeName=d,xt&&y.log(`[Tracing] Updated placeholder navigation name from "${C}" to "${d}" (will apply to real span)`)):(h.span.updateName(d),h.span.setAttribute(_e,f),Je(h.span,"__sentry_navigation_name_set__",!0),h.routeName=d,xt&&y.log(`[Tracing] Updated navigation span name from "${C}" to "${d}"`))}else xt&&y.log(`[Tracing] Skipping duplicate navigation for location: ${p}`);return}const I={span:{end:()=>{}},routeName:d,pathname:e.pathname,locationKey:p,isPlaceholder:!0};mr.set(u,I);let E;try{E=Hi(u,{name:I.routeName,attributes:{[_e]:f,[Te]:"navigation",[re]:`auto.navigation.react.reactrouter_v${i}`}})}catch(C){throw mr.delete(u),C}E?(mr.set(u,{span:E,routeName:I.routeName,pathname:e.pathname,locationKey:p}),MS(E,e,n,o,a,"navigation")):mr.delete(u)}}function Zs(t){t.forEach(e=>{AS(e).forEach(r=>{dt.add(r)})})}function AS(t,e=new Set){return e.has(t)||(e.add(t),t.children&&!t.index&&t.children.forEach(n=>{AS(n,e).forEach(i=>{e.add(i)})})),e}function Qs({activeRootSpan:t,location:e,routes:n,matches:r,basename:i,allRoutes:s}){const o=Array.isArray(r)?r:Dt(s||n,e,i);if(o){const[a,c]=Ic(e,s||n,s||n,o,i);ne().setTransactionName(a||"/"),t&&(t.updateName(a),t.setAttribute(_e,c),MS(t,e,n,i,s,"pageload"))}}function d3(t,e,n,r,i=!1){return n?!!(!t&&i||t&&er(t)&&r==="route"&&!er(n)||e!=="route"&&r==="route"):!1}function bu(t,e,n,r,i,s,o,a){try{const c=e.data?.[_e];if(c==="route"&&n&&!er(n))return;const u=Array.from(a),l=u.length>0?u:i,d=Dt(l,r,s);if(!d)return;const[f,p]=Ic(r,l,l,d,s),h=d3(n,c,f,p,!0),g=o==="pageload"||!e.timestamp;h&&g&&(t.updateName(f),t.setAttribute(_e,p))}catch(c){xt&&y.warn(`Error updating span details before ending: ${c}`)}}function MS(t,e,n,r,i,s){const o=`__sentry_${s}_end_patched__`;if(t?.[o]||!t.end)return;const c=i?new Set(i):dt,u=t.end.bind(t);let l=!1;t.end=function(...f){if(l)return;l=!0;const p=f.length>0?f[0]:Date.now()/1e3,h=q(t),g=h.description,m=h.data?.[_e],_=()=>{const E=$();if(E&&s==="navigation"){const C=mr.get(E);C&&C.span===t&&mr.delete(E)}},v=Jo.get(t);if(v&&v.size>0&&g&&(er(g)||m!=="route")){if(br===0){bu(t,h,g,e,n,r,s,c),_(),u(p);return}const E=Promise.allSettled(v).then(()=>{});(br===1/0?E:Promise.race([E,new Promise(A=>setTimeout(A,br))])).then(()=>{const A=q(t);bu(t,A,A.description,e,n,r,s,c),_(),u(p)}).catch(()=>{_(),u(p)});return}bu(t,h,g,e,n,r,s,c),_(),u(p)},Je(t,o,!0)}function PS(t,e){if(!Yn||!Jn||!Kn||!Yo||!Dt)return xt&&y.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${Yn}. useLocation: ${Jn}. useNavigationType: ${Kn}.
      createRoutesFromChildren: ${Yo}. matchRoutes: ${Dt}.`),t;const n=r=>{const i=Qe.useRef(!0),s=Jn(),o=Kn();return Yn(()=>{const a=Yo(r.children);i.current?(Zs(a),Qs({activeRootSpan:nn(),location:s,routes:a,allRoutes:Array.from(dt)}),i.current=!1):bf({location:s,routes:a,navigationType:o,version:e,allRoutes:Array.from(dt)})},[s,o]),Qe.createElement(t,{...r})};return Ec(n,t),n}function nn(){const t=De(),e=t?Le(t):void 0;if(!e)return;const n=q(e).op;return n==="navigation"||n==="pageload"?e:void 0}function f3(t){return RS(t,"6")}function p3(t){return xS(t,"6")}function h3(t){return IS(t,"6")}function g3(t){return kS(t,"6")}function m3(t){return PS(t,"6")}function _3(t){return RS(t,"7")}function y3(t){return PS(t,"7")}function v3(t){return IS(t,"7")}function b3(t){return kS(t,"7")}function S3(t){return xS(t,"7")}const k3=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:_v,ErrorBoundary:_S,MULTIPLEXED_TRANSPORT_EXTRA_KEY:Do,OpenFeatureIntegrationHook:hF,Profiler:_f,SDK_VERSION:vn,SEMANTIC_ATTRIBUTE_SENTRY_OP:Te,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:re,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Va,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:_e,Scope:jt,WINDOW:H,addBreadcrumb:zt,addEventProcessor:ty,addIntegration:rl,breadcrumbsIntegration:Wv,browserApiErrorsIntegration:jv,browserProfilingIntegration:lF,browserSessionIntegration:qv,browserTracingIntegration:Ui,buildLaunchDarklyFlagUsedHandler:fF,captureConsoleIntegration:wk,captureEvent:Oi,captureException:Pe,captureFeedback:$y,captureMessage:Z_,captureReactException:mf,captureSession:nl,chromeStackLineParser:$v,close:aI,consoleLoggingIntegration:L1,contextLinesIntegration:rO,continueTrace:AT,createConsolaReporter:H1,createLangChainCallbackHandler:_x,createReduxEnhancer:WF,createTransport:py,createUserFeedbackEnvelope:QM,dedupeIntegration:My,defaultRequestInstrumentationOptions:pf,defaultStackLineParsers:Uv,defaultStackParser:Bv,diagnoseSdkConnectivity:vF,endSession:ud,eventFiltersIntegration:ky,eventFromException:gv,eventFromMessage:mv,exceptionFromError:lc,extraErrorDataIntegration:Pk,featureFlagsIntegration:h1,feedbackAsyncIntegration:tA,feedbackIntegration:jh,feedbackSyncIntegration:jh,flush:oI,forceLoad:LP,functionToStringIntegration:Iy,geckoStackLineParser:Fv,getActiveSpan:De,getClient:$,getCurrentScope:ne,getDefaultIntegrations:Zv,getFeedback:dC,getGlobalScope:En,getIsolationScope:je,getReplay:GD,getRootSpan:Le,getSpanDescendants:ds,getSpanStatusFromHttpCode:E_,getTraceData:yd,globalHandlersIntegration:zv,graphqlClientIntegration:dO,growthbookIntegration:_F,httpClientIntegration:jP,httpContextIntegration:Jv,inboundFiltersIntegration:Ry,init:IF,instrumentAnthropicAiClient:KR,instrumentGoogleGenAIClient:ux,instrumentLangGraph:Ix,instrumentOpenAiClient:MR,instrumentOutgoingRequests:tS,instrumentSupabaseClient:Dy,isEnabled:ey,isInitialized:cI,lastEventId:Q_,launchDarklyIntegration:dF,lazyLoadIntegration:pv,linkedErrorsIntegration:Kv,logger:C1,makeBrowserOfflineTransport:$$,makeFetchTransport:Vd,makeMultiplexedTransport:YI,metrics:U1,moduleMetadataIntegration:vk,onLoad:DP,openFeatureIntegration:pF,opera10StackLineParser:JM,opera11StackLineParser:ZM,parameterize:wy,reactErrorHandler:xF,reactRouterV3BrowserTracingIntegration:jF,reactRouterV4BrowserTracingIntegration:GF,reactRouterV5BrowserTracingIntegration:VF,reactRouterV6BrowserTracingIntegration:f3,reactRouterV7BrowserTracingIntegration:_3,registerSpanErrorInstrumentation:B_,registerWebWorker:wF,replayCanvasIntegration:d$,replayIntegration:jD,reportPageLoaded:C$,reportingObserverIntegration:BP,rewriteFramesIntegration:Bk,sendFeedback:Qy,setActiveSpanInBrowser:A$,setContext:cd,setCurrentClient:vy,setExtra:nI,setExtras:tI,setHttpStatus:ws,setMeasurement:z_,setTag:iI,setTags:rI,setUser:sI,showReportDialog:El,spanToBaggageHeader:aT,spanToJSON:q,spanToTraceHeader:D_,spotlightBrowserIntegration:Xv,startBrowserTracingNavigationSpan:Hi,startBrowserTracingPageLoadSpan:Bi,startInactiveSpan:Nt,startNewTrace:V_,startSession:tl,startSpan:Pn,startSpanManual:_n,statsigIntegration:yF,supabaseIntegration:Qk,suppressTracing:G_,tanstackRouterBrowserTracingIntegration:zF,thirdPartyErrorFilterIntegration:u1,uiProfiler:AM,unleashIntegration:gF,updateSpanName:iT,useProfiler:DF,webWorkerIntegration:SF,winjsStackLineParser:GM,withActiveSpan:Ar,withErrorBoundary:FF,withIsolationScope:Ow,withProfiler:LF,withScope:bt,withSentryReactRouterV6Routing:m3,withSentryReactRouterV7Routing:y3,withSentryRouting:JF,wrapCreateBrowserRouterV6:h3,wrapCreateBrowserRouterV7:v3,wrapCreateMemoryRouterV6:g3,wrapCreateMemoryRouterV7:b3,wrapUseRoutesV6:p3,wrapUseRoutesV7:S3,zodErrorsIntegration:c1},Symbol.toStringTag,{value:"Module"}));export{NS as g,k3 as i,T3 as m};
