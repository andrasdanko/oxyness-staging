import{r,j as e,i as v,a as N,b as S,c as T,d as w,e as k,o as P}from"../chunks/chunk-xZyjFQfo.js";import{u as E}from"../chunks/chunk-C01ADzZH.js";import"../chunks/chunk-BnwOTj5j.js";/* empty css                      *//* empty css                      */function y({flag:a,onToggle:x,onDelete:l,isLoading:o}){const[u,n]=r.useState(!1),d=async()=>{confirm(`Delete flag "${a.key}"?`)&&(n(!0),await l(a.key),n(!1))},m=a.key.split(":")[1]?.split("_").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs("tr",{className:"border-b border-border hover:bg-muted/50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium ${a.type==="PAGE"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"}`,children:a.type})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium",children:m}),e.jsx("div",{className:"text-sm text-muted-foreground font-mono",children:a.key})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:a.description||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>x(a.key),disabled:o,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${a.enabled?"bg-primary":"bg-gray-300 dark:bg-gray-600"} ${o?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${a.enabled?"translate-x-6":"translate-x-1"}`})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:d,disabled:u,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 disabled:opacity-50",children:u?"Deleting...":"Delete"})})]})}function D({onCreated:a}){const[x,l]=r.useState(!1),[o,u]=r.useState("PAGE"),[n,d]=r.useState(""),[m,c]=r.useState(""),[g,h]=r.useState(!1),[f,t]=r.useState(null),i=async s=>{s.preventDefault(),t(null),h(!0);const b=`${o.toLowerCase()}:${n.toLowerCase().replace(/\s+/g,"_")}`;try{const p=await fetch("/api/feature-flags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:b,type:o,enabled:!0,description:m||void 0})});if(!p.ok){const j=await p.json();throw new Error(j.message||"Failed to create flag")}d(""),c(""),l(!1),a()}catch(p){t(p instanceof Error?p.message:"Failed to create flag")}finally{h(!1)}};return x?e.jsxs("form",{onSubmit:i,className:"bg-muted p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),e.jsxs("select",{value:o,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 rounded-md border border-border bg-background",children:[e.jsx("option",{value:"PAGE",children:"Page"}),e.jsx("option",{value:"FEATURE",children:"Feature"})]})]}),e.jsxs("div",{className:"flex-[2]",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:n,onChange:s=>d(s.target.value),placeholder:"e.g., advisors or top_sites_reviews",className:"w-full px-3 py-2 rounded-md border border-border bg-background",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description (optional)"}),e.jsx("input",{type:"text",value:m,onChange:s=>c(s.target.value),placeholder:"What does this flag control?",className:"w-full px-3 py-2 rounded-md border border-border bg-background"})]}),f&&e.jsx("p",{className:"text-red-600 text-sm",children:f}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50",children:g?"Creating...":"Create Flag"}),e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/90",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"+ Add Flag"})}function A(){const a=E(),[x,l]=r.useState(a.flags),[o,u]=r.useState(null),[n,d]=r.useState(a.error);if(!a.isDev)return e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-red-200 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:"This page is only available in development mode."})]})});const m=async()=>{try{const t=await fetch("/api/feature-flags");if(t.ok){const i=await t.json();l(i),d(null)}}catch{d("Failed to refresh flags")}},c=async t=>{u(t);try{const i=await fetch(`/api/feature-flags/${encodeURIComponent(t)}/toggle`,{method:"POST"});if(i.ok){const s=await i.json();l(b=>b.map(p=>p.key===t?s:p))}}catch{d("Failed to toggle flag")}finally{u(null)}},g=async t=>{try{(await fetch(`/api/feature-flags/${encodeURIComponent(t)}`,{method:"DELETE"})).ok&&l(s=>s.filter(b=>b.key!==t))}catch{d("Failed to delete flag")}},h=x.filter(t=>t.type==="PAGE"),f=x.filter(t=>t.type==="FEATURE");return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Feature Flags"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage feature flags for SSG build. Changes take effect on the next build."})]}),n&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"How it works"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 list-disc list-inside space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Page flags"})," control whether entire page sections are generated during SSG build"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Feature flags"})," control whether specific features appear on pages"]}),e.jsx("li",{children:'Disabled pages will show a "Coming Soon" placeholder'}),e.jsx("li",{children:"Navigation links to disabled pages are hidden"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(D,{onCreated:m})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Page Flags (",h.length,")"]}),h.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No page flags defined."}):e.jsx("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Enabled"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(t=>e.jsx(y,{flag:t,onToggle:c,onDelete:g,isLoading:o===t.key},t.id))})]})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Feature Flags (",f.length,")"]}),f.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No feature flags defined."}):e.jsx("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Enabled"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Actions"})]})}),e.jsx("tbody",{children:f.map(t=>e.jsx(y,{flag:t,onToggle:c,onDelete:g,isLoading:o===t.key},t.id))})]})})]})]})}const F=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"})),L={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:P}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:k}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:w}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/dev/features/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:F}},guard:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+guard.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:T}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/pages/+Layout.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:S}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Oxyness - Spiritual & Esoteric Resources Directory"}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/pages/+Wrapper.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:N}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:v}}};export{L as configValuesSerialized};
